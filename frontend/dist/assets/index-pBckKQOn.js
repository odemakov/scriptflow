(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const _ of a)if(_.type==="childList")for(const v of _.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&r(v)}).observe(document,{childList:!0,subtree:!0});function s(a){const _={};return a.integrity&&(_.integrity=a.integrity),a.referrerPolicy&&(_.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?_.credentials="include":a.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function r(a){if(a.ep)return;a.ep=!0;const _=s(a);fetch(a.href,_)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Gi(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ee={},Kt=[],ot=()=>{},oa=()=>!1,Vs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ji=e=>e.startsWith("onUpdate:"),Be=Object.assign,Xi=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},aa=Object.prototype.hasOwnProperty,be=(e,t)=>aa.call(e,t),ue=Array.isArray,zt=e=>Gs(e)==="[object Map]",wn=e=>Gs(e)==="[object Set]",de=e=>typeof e=="function",De=e=>typeof e=="string",Et=e=>typeof e=="symbol",Re=e=>e!==null&&typeof e=="object",En=e=>(Re(e)||de(e))&&de(e.then)&&de(e.catch),kn=Object.prototype.toString,Gs=e=>kn.call(e),ca=e=>Gs(e).slice(8,-1),xn=e=>Gs(e)==="[object Object]",Yi=e=>De(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ns=Gi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Js=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},la=/-(\w)/g,Qe=Js(e=>e.replace(la,(t,s)=>s?s.toUpperCase():"")),ha=/\B([A-Z])/g,Ft=Js(e=>e.replace(ha,"-$1").toLowerCase()),Xs=Js(e=>e.charAt(0).toUpperCase()+e.slice(1)),di=Js(e=>e?`on${Xs(e)}`:""),yt=(e,t)=>!Object.is(e,t),Bs=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Rn=(e,t,s,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:s})},Ti=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Cr;const Ys=()=>Cr||(Cr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Zi(e){if(ue(e)){const t={};for(let s=0;s<e.length;s++){const r=e[s],a=De(r)?_a(r):Zi(r);if(a)for(const _ in a)t[_]=a[_]}return t}else if(De(e)||Re(e))return e}const ua=/;(?![^(]*\))/g,da=/:([^]+)/,fa=/\/\*[^]*?\*\//g;function _a(e){const t={};return e.replace(fa,"").split(ua).forEach(s=>{if(s){const r=s.split(da);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Zs(e){let t="";if(De(e))t=e;else if(ue(e))for(let s=0;s<e.length;s++){const r=Zs(e[s]);r&&(t+=r+" ")}else if(Re(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const pa="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ga=Gi(pa);function Ln(e){return!!e||e===""}const An=e=>!!(e&&e.__v_isRef===!0),Ce=e=>De(e)?e:e==null?"":ue(e)||Re(e)&&(e.toString===kn||!de(e.toString))?An(e)?Ce(e.value):JSON.stringify(e,Tn,2):String(e),Tn=(e,t)=>An(t)?Tn(e,t.value):zt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[r,a],_)=>(s[fi(r,_)+" =>"]=a,s),{})}:wn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>fi(s))}:Et(t)?fi(t):Re(t)&&!ue(t)&&!xn(t)?String(t):t,fi=(e,t="")=>{var s;return Et(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ne;class Dn{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ne,!t&&Ne&&(this.index=(Ne.scopes||(Ne.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=Ne;try{return Ne=this,t()}finally{Ne=s}}}on(){Ne=this}off(){Ne=this.parent}stop(t){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function On(e){return new Dn(e)}function Pn(){return Ne}function va(e,t=!1){Ne&&Ne.cleanups.push(e)}let ke;const _i=new WeakSet;class Bn{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ne&&Ne.active&&Ne.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_i.has(this)&&(_i.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||In(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wr(this),Hn(this);const t=ke,s=et;ke=this,et=!0;try{return this.fn()}finally{Fn(this),ke=t,et=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)tr(t);this.deps=this.depsTail=void 0,wr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_i.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Di(this)&&this.run()}get dirty(){return Di(this)}}let Mn=0,os,as;function In(e,t=!1){if(e.flags|=8,t){e.next=as,as=e;return}e.next=os,os=e}function Qi(){Mn++}function er(){if(--Mn>0)return;if(as){let t=as;for(as=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;os;){let t=os;for(os=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=s}}if(e)throw e}function Hn(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Fn(e){let t,s=e.depsTail,r=s;for(;r;){const a=r.prevDep;r.version===-1?(r===s&&(s=a),tr(r),ma(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=a}e.deps=t,e.depsTail=s}function Di(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&($n(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function $n(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===_s))return;e.globalVersion=_s;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Di(e)){e.flags&=-3;return}const s=ke,r=et;ke=e,et=!0;try{Hn(e);const a=e.fn(e._value);(t.version===0||yt(a,e._value))&&(e._value=a,t.version++)}catch(a){throw t.version++,a}finally{ke=s,et=r,Fn(e),e.flags&=-3}}function tr(e,t=!1){const{dep:s,prevSub:r,nextSub:a}=e;if(r&&(r.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=r,e.nextSub=void 0),s.subs===e&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let _=s.computed.deps;_;_=_.nextDep)tr(_,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function ma(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let et=!0;const Nn=[];function kt(){Nn.push(et),et=!1}function xt(){const e=Nn.pop();et=e===void 0?!0:e}function wr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=ke;ke=void 0;try{t()}finally{ke=s}}}let _s=0;class Sa{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class sr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!ke||!et||ke===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ke)s=this.activeLink=new Sa(ke,this),ke.deps?(s.prevDep=ke.depsTail,ke.depsTail.nextDep=s,ke.depsTail=s):ke.deps=ke.depsTail=s,Wn(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=ke.depsTail,s.nextDep=void 0,ke.depsTail.nextDep=s,ke.depsTail=s,ke.deps===s&&(ke.deps=r)}return s}trigger(t){this.version++,_s++,this.notify(t)}notify(t){Qi();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{er()}}}function Wn(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Wn(r)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Fs=new WeakMap,Pt=Symbol(""),Oi=Symbol(""),ps=Symbol("");function Ie(e,t,s){if(et&&ke){let r=Fs.get(e);r||Fs.set(e,r=new Map);let a=r.get(s);a||(r.set(s,a=new sr),a.map=r,a.key=s),a.track()}}function ut(e,t,s,r,a,_){const v=Fs.get(e);if(!v){_s++;return}const i=n=>{n&&n.trigger()};if(Qi(),t==="clear")v.forEach(i);else{const n=ue(e),d=n&&Yi(s);if(n&&s==="length"){const f=Number(r);v.forEach((h,g)=>{(g==="length"||g===ps||!Et(g)&&g>=f)&&i(h)})}else switch((s!==void 0||v.has(void 0))&&i(v.get(s)),d&&i(v.get(ps)),t){case"add":n?d&&i(v.get("length")):(i(v.get(Pt)),zt(e)&&i(v.get(Oi)));break;case"delete":n||(i(v.get(Pt)),zt(e)&&i(v.get(Oi)));break;case"set":zt(e)&&i(v.get(Pt));break}}er()}function ba(e,t){const s=Fs.get(e);return s&&s.get(t)}function Nt(e){const t=Se(e);return t===e?t:(Ie(t,"iterate",ps),Xe(e)?t:t.map(He))}function Qs(e){return Ie(e=Se(e),"iterate",ps),e}const ya={__proto__:null,[Symbol.iterator](){return pi(this,Symbol.iterator,He)},concat(...e){return Nt(this).concat(...e.map(t=>ue(t)?Nt(t):t))},entries(){return pi(this,"entries",e=>(e[1]=He(e[1]),e))},every(e,t){return ct(this,"every",e,t,void 0,arguments)},filter(e,t){return ct(this,"filter",e,t,s=>s.map(He),arguments)},find(e,t){return ct(this,"find",e,t,He,arguments)},findIndex(e,t){return ct(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ct(this,"findLast",e,t,He,arguments)},findLastIndex(e,t){return ct(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ct(this,"forEach",e,t,void 0,arguments)},includes(...e){return gi(this,"includes",e)},indexOf(...e){return gi(this,"indexOf",e)},join(e){return Nt(this).join(e)},lastIndexOf(...e){return gi(this,"lastIndexOf",e)},map(e,t){return ct(this,"map",e,t,void 0,arguments)},pop(){return es(this,"pop")},push(...e){return es(this,"push",e)},reduce(e,...t){return Er(this,"reduce",e,t)},reduceRight(e,...t){return Er(this,"reduceRight",e,t)},shift(){return es(this,"shift")},some(e,t){return ct(this,"some",e,t,void 0,arguments)},splice(...e){return es(this,"splice",e)},toReversed(){return Nt(this).toReversed()},toSorted(e){return Nt(this).toSorted(e)},toSpliced(...e){return Nt(this).toSpliced(...e)},unshift(...e){return es(this,"unshift",e)},values(){return pi(this,"values",He)}};function pi(e,t,s){const r=Qs(e),a=r[t]();return r!==e&&!Xe(e)&&(a._next=a.next,a.next=()=>{const _=a._next();return _.value&&(_.value=s(_.value)),_}),a}const Ca=Array.prototype;function ct(e,t,s,r,a,_){const v=Qs(e),i=v!==e&&!Xe(e),n=v[t];if(n!==Ca[t]){const h=n.apply(e,_);return i?He(h):h}let d=s;v!==e&&(i?d=function(h,g){return s.call(this,He(h),g,e)}:s.length>2&&(d=function(h,g){return s.call(this,h,g,e)}));const f=n.call(v,d,r);return i&&a?a(f):f}function Er(e,t,s,r){const a=Qs(e);let _=s;return a!==e&&(Xe(e)?s.length>3&&(_=function(v,i,n){return s.call(this,v,i,n,e)}):_=function(v,i,n){return s.call(this,v,He(i),n,e)}),a[t](_,...r)}function gi(e,t,s){const r=Se(e);Ie(r,"iterate",ps);const a=r[t](...s);return(a===-1||a===!1)&&nr(s[0])?(s[0]=Se(s[0]),r[t](...s)):a}function es(e,t,s=[]){kt(),Qi();const r=Se(e)[t].apply(e,s);return er(),xt(),r}const wa=Gi("__proto__,__v_isRef,__isVue"),jn=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Et));function Ea(e){Et(e)||(e=String(e));const t=Se(this);return Ie(t,"has",e),t.hasOwnProperty(e)}class Un{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,r){if(s==="__v_skip")return t.__v_skip;const a=this._isReadonly,_=this._isShallow;if(s==="__v_isReactive")return!a;if(s==="__v_isReadonly")return a;if(s==="__v_isShallow")return _;if(s==="__v_raw")return r===(a?_?Ba:Vn:_?zn:Kn).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const v=ue(t);if(!a){let n;if(v&&(n=ya[s]))return n;if(s==="hasOwnProperty")return Ea}const i=Reflect.get(t,s,Te(t)?t:r);return(Et(s)?jn.has(s):wa(s))||(a||Ie(t,"get",s),_)?i:Te(i)?v&&Yi(s)?i:i.value:Re(i)?a?Jn(i):Cs(i):i}}class qn extends Un{constructor(t=!1){super(!1,t)}set(t,s,r,a){let _=t[s];if(!this._isShallow){const n=Mt(_);if(!Xe(r)&&!Mt(r)&&(_=Se(_),r=Se(r)),!ue(t)&&Te(_)&&!Te(r))return n?!1:(_.value=r,!0)}const v=ue(t)&&Yi(s)?Number(s)<t.length:be(t,s),i=Reflect.set(t,s,r,Te(t)?t:a);return t===Se(a)&&(v?yt(r,_)&&ut(t,"set",s,r):ut(t,"add",s,r)),i}deleteProperty(t,s){const r=be(t,s);t[s];const a=Reflect.deleteProperty(t,s);return a&&r&&ut(t,"delete",s,void 0),a}has(t,s){const r=Reflect.has(t,s);return(!Et(s)||!jn.has(s))&&Ie(t,"has",s),r}ownKeys(t){return Ie(t,"iterate",ue(t)?"length":Pt),Reflect.ownKeys(t)}}class ka extends Un{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const xa=new qn,Ra=new ka,La=new qn(!0);const Pi=e=>e,Ts=e=>Reflect.getPrototypeOf(e);function Aa(e,t,s){return function(...r){const a=this.__v_raw,_=Se(a),v=zt(_),i=e==="entries"||e===Symbol.iterator&&v,n=e==="keys"&&v,d=a[e](...r),f=s?Pi:t?Bi:He;return!t&&Ie(_,"iterate",n?Oi:Pt),{next(){const{value:h,done:g}=d.next();return g?{value:h,done:g}:{value:i?[f(h[0]),f(h[1])]:f(h),done:g}},[Symbol.iterator](){return this}}}}function Ds(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ta(e,t){const s={get(a){const _=this.__v_raw,v=Se(_),i=Se(a);e||(yt(a,i)&&Ie(v,"get",a),Ie(v,"get",i));const{has:n}=Ts(v),d=t?Pi:e?Bi:He;if(n.call(v,a))return d(_.get(a));if(n.call(v,i))return d(_.get(i));_!==v&&_.get(a)},get size(){const a=this.__v_raw;return!e&&Ie(Se(a),"iterate",Pt),Reflect.get(a,"size",a)},has(a){const _=this.__v_raw,v=Se(_),i=Se(a);return e||(yt(a,i)&&Ie(v,"has",a),Ie(v,"has",i)),a===i?_.has(a):_.has(a)||_.has(i)},forEach(a,_){const v=this,i=v.__v_raw,n=Se(i),d=t?Pi:e?Bi:He;return!e&&Ie(n,"iterate",Pt),i.forEach((f,h)=>a.call(_,d(f),d(h),v))}};return Be(s,e?{add:Ds("add"),set:Ds("set"),delete:Ds("delete"),clear:Ds("clear")}:{add(a){!t&&!Xe(a)&&!Mt(a)&&(a=Se(a));const _=Se(this);return Ts(_).has.call(_,a)||(_.add(a),ut(_,"add",a,a)),this},set(a,_){!t&&!Xe(_)&&!Mt(_)&&(_=Se(_));const v=Se(this),{has:i,get:n}=Ts(v);let d=i.call(v,a);d||(a=Se(a),d=i.call(v,a));const f=n.call(v,a);return v.set(a,_),d?yt(_,f)&&ut(v,"set",a,_):ut(v,"add",a,_),this},delete(a){const _=Se(this),{has:v,get:i}=Ts(_);let n=v.call(_,a);n||(a=Se(a),n=v.call(_,a)),i&&i.call(_,a);const d=_.delete(a);return n&&ut(_,"delete",a,void 0),d},clear(){const a=Se(this),_=a.size!==0,v=a.clear();return _&&ut(a,"clear",void 0,void 0),v}}),["keys","values","entries",Symbol.iterator].forEach(a=>{s[a]=Aa(a,e,t)}),s}function ir(e,t){const s=Ta(e,t);return(r,a,_)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?r:Reflect.get(be(s,a)&&a in r?s:r,a,_)}const Da={get:ir(!1,!1)},Oa={get:ir(!1,!0)},Pa={get:ir(!0,!1)};const Kn=new WeakMap,zn=new WeakMap,Vn=new WeakMap,Ba=new WeakMap;function Ma(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ia(e){return e.__v_skip||!Object.isExtensible(e)?0:Ma(ca(e))}function Cs(e){return Mt(e)?e:rr(e,!1,xa,Da,Kn)}function Gn(e){return rr(e,!1,La,Oa,zn)}function Jn(e){return rr(e,!0,Ra,Pa,Vn)}function rr(e,t,s,r,a){if(!Re(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const _=a.get(e);if(_)return _;const v=Ia(e);if(v===0)return e;const i=new Proxy(e,v===2?r:s);return a.set(e,i),i}function Ct(e){return Mt(e)?Ct(e.__v_raw):!!(e&&e.__v_isReactive)}function Mt(e){return!!(e&&e.__v_isReadonly)}function Xe(e){return!!(e&&e.__v_isShallow)}function nr(e){return e?!!e.__v_raw:!1}function Se(e){const t=e&&e.__v_raw;return t?Se(t):e}function or(e){return!be(e,"__v_skip")&&Object.isExtensible(e)&&Rn(e,"__v_skip",!0),e}const He=e=>Re(e)?Cs(e):e,Bi=e=>Re(e)?Jn(e):e;function Te(e){return e?e.__v_isRef===!0:!1}function Pe(e){return Xn(e,!1)}function Ha(e){return Xn(e,!0)}function Xn(e,t){return Te(e)?e:new Fa(e,t)}class Fa{constructor(t,s){this.dep=new sr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Se(t),this._value=s?t:He(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,r=this.__v_isShallow||Xe(t)||Mt(t);t=r?t:Se(t),yt(t,s)&&(this._rawValue=t,this._value=r?t:He(t),this.dep.trigger())}}function Ye(e){return Te(e)?e.value:e}const $a={get:(e,t,s)=>t==="__v_raw"?e:Ye(Reflect.get(e,t,s)),set:(e,t,s,r)=>{const a=e[t];return Te(a)&&!Te(s)?(a.value=s,!0):Reflect.set(e,t,s,r)}};function Yn(e){return Ct(e)?e:new Proxy(e,$a)}function Na(e){const t=ue(e)?new Array(e.length):{};for(const s in e)t[s]=ja(e,s);return t}class Wa{constructor(t,s,r){this._object=t,this._key=s,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return ba(Se(this._object),this._key)}}function ja(e,t,s){const r=e[t];return Te(r)?r:new Wa(e,t,s)}class Ua{constructor(t,s,r){this.fn=t,this.setter=s,this._value=void 0,this.dep=new sr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=_s-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return In(this,!0),!0}get value(){const t=this.dep.track();return $n(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function qa(e,t,s=!1){let r,a;return de(e)?r=e:(r=e.get,a=e.set),new Ua(r,a,s)}const Os={},$s=new WeakMap;let Ot;function Ka(e,t=!1,s=Ot){if(s){let r=$s.get(s);r||$s.set(s,r=[]),r.push(e)}}function za(e,t,s=Ee){const{immediate:r,deep:a,once:_,scheduler:v,augmentJob:i,call:n}=s,d=p=>a?p:Xe(p)||a===!1||a===0?dt(p,1):dt(p);let f,h,g,m,w=!1,S=!1;if(Te(e)?(h=()=>e.value,w=Xe(e)):Ct(e)?(h=()=>d(e),w=!0):ue(e)?(S=!0,w=e.some(p=>Ct(p)||Xe(p)),h=()=>e.map(p=>{if(Te(p))return p.value;if(Ct(p))return d(p);if(de(p))return n?n(p,2):p()})):de(e)?t?h=n?()=>n(e,2):e:h=()=>{if(g){kt();try{g()}finally{xt()}}const p=Ot;Ot=f;try{return n?n(e,3,[m]):e(m)}finally{Ot=p}}:h=ot,t&&a){const p=h,y=a===!0?1/0:a;h=()=>dt(p(),y)}const c=Pn(),u=()=>{f.stop(),c&&c.active&&Xi(c.effects,f)};if(_&&t){const p=t;t=(...y)=>{p(...y),u()}}let o=S?new Array(e.length).fill(Os):Os;const l=p=>{if(!(!(f.flags&1)||!f.dirty&&!p))if(t){const y=f.run();if(a||w||(S?y.some((C,E)=>yt(C,o[E])):yt(y,o))){g&&g();const C=Ot;Ot=f;try{const E=[y,o===Os?void 0:S&&o[0]===Os?[]:o,m];n?n(t,3,E):t(...E),o=y}finally{Ot=C}}}else f.run()};return i&&i(l),f=new Bn(h),f.scheduler=v?()=>v(l,!1):l,m=p=>Ka(p,!1,f),g=f.onStop=()=>{const p=$s.get(f);if(p){if(n)n(p,4);else for(const y of p)y();$s.delete(f)}},t?r?l(!0):o=f.run():v?v(l.bind(null,!0),!0):f.run(),u.pause=f.pause.bind(f),u.resume=f.resume.bind(f),u.stop=u,u}function dt(e,t=1/0,s){if(t<=0||!Re(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,Te(e))dt(e.value,t,s);else if(ue(e))for(let r=0;r<e.length;r++)dt(e[r],t,s);else if(wn(e)||zt(e))e.forEach(r=>{dt(r,t,s)});else if(xn(e)){for(const r in e)dt(e[r],t,s);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&dt(e[r],t,s)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ws(e,t,s,r){try{return r?e(...r):e()}catch(a){ei(a,t,s)}}function at(e,t,s,r){if(de(e)){const a=ws(e,t,s,r);return a&&En(a)&&a.catch(_=>{ei(_,t,s)}),a}if(ue(e)){const a=[];for(let _=0;_<e.length;_++)a.push(at(e[_],t,s,r));return a}}function ei(e,t,s,r=!0){const a=t?t.vnode:null,{errorHandler:_,throwUnhandledErrorInProduction:v}=t&&t.appContext.config||Ee;if(t){let i=t.parent;const n=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const f=i.ec;if(f){for(let h=0;h<f.length;h++)if(f[h](e,n,d)===!1)return}i=i.parent}if(_){kt(),ws(_,null,10,[e,n,d]),xt();return}}Va(e,s,a,r,v)}function Va(e,t,s,r=!0,a=!1){if(a)throw e;console.error(e)}const We=[];let rt=-1;const Vt=[];let mt=null,jt=0;const Zn=Promise.resolve();let Ns=null;function ar(e){const t=Ns||Zn;return e?t.then(this?e.bind(this):e):t}function Ga(e){let t=rt+1,s=We.length;for(;t<s;){const r=t+s>>>1,a=We[r],_=gs(a);_<e||_===e&&a.flags&2?t=r+1:s=r}return t}function cr(e){if(!(e.flags&1)){const t=gs(e),s=We[We.length-1];!s||!(e.flags&2)&&t>=gs(s)?We.push(e):We.splice(Ga(t),0,e),e.flags|=1,Qn()}}function Qn(){Ns||(Ns=Zn.then(to))}function Ja(e){ue(e)?Vt.push(...e):mt&&e.id===-1?mt.splice(jt+1,0,e):e.flags&1||(Vt.push(e),e.flags|=1),Qn()}function kr(e,t,s=rt+1){for(;s<We.length;s++){const r=We[s];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;We.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function eo(e){if(Vt.length){const t=[...new Set(Vt)].sort((s,r)=>gs(s)-gs(r));if(Vt.length=0,mt){mt.push(...t);return}for(mt=t,jt=0;jt<mt.length;jt++){const s=mt[jt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}mt=null,jt=0}}const gs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function to(e){try{for(rt=0;rt<We.length;rt++){const t=We[rt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ws(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;rt<We.length;rt++){const t=We[rt];t&&(t.flags&=-2)}rt=-1,We.length=0,eo(),Ns=null,(We.length||Vt.length)&&to()}}let je=null,so=null;function Ws(e){const t=je;return je=e,so=e&&e.type.__scopeId||null,t}function Xa(e,t=je,s){if(!t||e._n)return e;const r=(...a)=>{r._d&&Br(-1);const _=Ws(t);let v;try{v=e(...a)}finally{Ws(_),r._d&&Br(1)}return v};return r._n=!0,r._c=!0,r._d=!0,r}function Mi(e,t){if(je===null)return e;const s=ni(je),r=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[_,v,i,n=Ee]=t[a];_&&(de(_)&&(_={mounted:_,updated:_}),_.deep&&dt(v),r.push({dir:_,instance:s,value:v,oldValue:void 0,arg:i,modifiers:n}))}return e}function At(e,t,s,r){const a=e.dirs,_=t&&t.dirs;for(let v=0;v<a.length;v++){const i=a[v];_&&(i.oldValue=_[v].value);let n=i.dir[r];n&&(kt(),at(n,s,8,[e.el,i,e,t]),xt())}}const Ya=Symbol("_vte"),Za=e=>e.__isTeleport;function lr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,lr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function xe(e,t){return de(e)?Be({name:e.name},t,{setup:e}):e}function io(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function js(e,t,s,r,a=!1){if(ue(e)){e.forEach((w,S)=>js(w,t&&(ue(t)?t[S]:t),s,r,a));return}if(cs(r)&&!a){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&js(e,t,s,r.component.subTree);return}const _=r.shapeFlag&4?ni(r.component):r.el,v=a?null:_,{i,r:n}=e,d=t&&t.r,f=i.refs===Ee?i.refs={}:i.refs,h=i.setupState,g=Se(h),m=h===Ee?()=>!1:w=>be(g,w);if(d!=null&&d!==n&&(De(d)?(f[d]=null,m(d)&&(h[d]=null)):Te(d)&&(d.value=null)),de(n))ws(n,i,12,[v,f]);else{const w=De(n),S=Te(n);if(w||S){const c=()=>{if(e.f){const u=w?m(n)?h[n]:f[n]:n.value;a?ue(u)&&Xi(u,_):ue(u)?u.includes(_)||u.push(_):w?(f[n]=[_],m(n)&&(h[n]=f[n])):(n.value=[_],e.k&&(f[e.k]=n.value))}else w?(f[n]=v,m(n)&&(h[n]=v)):S&&(n.value=v,e.k&&(f[e.k]=v))};v?(c.id=-1,Ke(c,s)):c()}}}Ys().requestIdleCallback;Ys().cancelIdleCallback;const cs=e=>!!e.type.__asyncLoader,ro=e=>e.type.__isKeepAlive;function Qa(e,t){no(e,"a",t)}function ec(e,t){no(e,"da",t)}function no(e,t,s=Me){const r=e.__wdc||(e.__wdc=()=>{let a=s;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(ti(t,r,s),s){let a=s.parent;for(;a&&a.parent;)ro(a.parent.vnode)&&tc(r,t,s,a),a=a.parent}}function tc(e,t,s,r){const a=ti(t,e,r,!0);Es(()=>{Xi(r[t],a)},s)}function ti(e,t,s=Me,r=!1){if(s){const a=s[e]||(s[e]=[]),_=t.__weh||(t.__weh=(...v)=>{kt();const i=ks(s),n=at(t,s,e,v);return i(),xt(),n});return r?a.unshift(_):a.push(_),_}}const _t=e=>(t,s=Me)=>{(!ms||e==="sp")&&ti(e,(...r)=>t(...r),s)},sc=_t("bm"),Rt=_t("m"),ic=_t("bu"),rc=_t("u"),nc=_t("bum"),Es=_t("um"),oc=_t("sp"),ac=_t("rtg"),cc=_t("rtc");function lc(e,t=Me){ti("ec",e,t)}const hc="components";function uc(e,t){return fc(hc,e,!0,t)||e}const dc=Symbol.for("v-ndc");function fc(e,t,s=!0,r=!1){const a=je||Me;if(a){const _=a.type;{const i=el(_,!1);if(i&&(i===t||i===Qe(t)||i===Xs(Qe(t))))return _}const v=xr(a[e]||_[e],t)||xr(a.appContext[e],t);return!v&&r?_:v}}function xr(e,t){return e&&(e[t]||e[Qe(t)]||e[Xs(Qe(t))])}function si(e,t,s,r){let a;const _=s,v=ue(e);if(v||De(e)){const i=v&&Ct(e);let n=!1;i&&(n=!Xe(e),e=Qs(e)),a=new Array(e.length);for(let d=0,f=e.length;d<f;d++)a[d]=t(n?He(e[d]):e[d],d,void 0,_)}else if(typeof e=="number"){a=new Array(e);for(let i=0;i<e;i++)a[i]=t(i+1,i,void 0,_)}else if(Re(e))if(e[Symbol.iterator])a=Array.from(e,(i,n)=>t(i,n,void 0,_));else{const i=Object.keys(e);a=new Array(i.length);for(let n=0,d=i.length;n<d;n++){const f=i[n];a[n]=t(e[f],f,n,_)}}else a=[];return a}const Ii=e=>e?Ro(e)?ni(e):Ii(e.parent):null,ls=Be(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ii(e.parent),$root:e=>Ii(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>hr(e),$forceUpdate:e=>e.f||(e.f=()=>{cr(e.update)}),$nextTick:e=>e.n||(e.n=ar.bind(e.proxy)),$watch:e=>Mc.bind(e)}),vi=(e,t)=>e!==Ee&&!e.__isScriptSetup&&be(e,t),_c={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:r,data:a,props:_,accessCache:v,type:i,appContext:n}=e;let d;if(t[0]!=="$"){const m=v[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return a[t];case 4:return s[t];case 3:return _[t]}else{if(vi(r,t))return v[t]=1,r[t];if(a!==Ee&&be(a,t))return v[t]=2,a[t];if((d=e.propsOptions[0])&&be(d,t))return v[t]=3,_[t];if(s!==Ee&&be(s,t))return v[t]=4,s[t];Hi&&(v[t]=0)}}const f=ls[t];let h,g;if(f)return t==="$attrs"&&Ie(e.attrs,"get",""),f(e);if((h=i.__cssModules)&&(h=h[t]))return h;if(s!==Ee&&be(s,t))return v[t]=4,s[t];if(g=n.config.globalProperties,be(g,t))return g[t]},set({_:e},t,s){const{data:r,setupState:a,ctx:_}=e;return vi(a,t)?(a[t]=s,!0):r!==Ee&&be(r,t)?(r[t]=s,!0):be(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(_[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:r,appContext:a,propsOptions:_}},v){let i;return!!s[v]||e!==Ee&&be(e,v)||vi(t,v)||(i=_[0])&&be(i,v)||be(r,v)||be(ls,v)||be(a.config.globalProperties,v)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:be(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Rr(e){return ue(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Hi=!0;function pc(e){const t=hr(e),s=e.proxy,r=e.ctx;Hi=!1,t.beforeCreate&&Lr(t.beforeCreate,e,"bc");const{data:a,computed:_,methods:v,watch:i,provide:n,inject:d,created:f,beforeMount:h,mounted:g,beforeUpdate:m,updated:w,activated:S,deactivated:c,beforeDestroy:u,beforeUnmount:o,destroyed:l,unmounted:p,render:y,renderTracked:C,renderTriggered:E,errorCaptured:b,serverPrefetch:k,expose:P,inheritAttrs:M,components:I,directives:D,filters:U}=t;if(d&&gc(d,r,null),v)for(const z in v){const V=v[z];de(V)&&(r[z]=V.bind(s))}if(a){const z=a.call(s,s);Re(z)&&(e.data=Cs(z))}if(Hi=!0,_)for(const z in _){const V=_[z],R=de(V)?V.bind(s,s):de(V.get)?V.get.bind(s,s):ot,O=!de(V)&&de(V.set)?V.set.bind(s):ot,B=we({get:R,set:O});Object.defineProperty(r,z,{enumerable:!0,configurable:!0,get:()=>B.value,set:H=>B.value=H})}if(i)for(const z in i)oo(i[z],r,s,z);if(n){const z=de(n)?n.call(s):n;Reflect.ownKeys(z).forEach(V=>{Ms(V,z[V])})}f&&Lr(f,e,"c");function G(z,V){ue(V)?V.forEach(R=>z(R.bind(s))):V&&z(V.bind(s))}if(G(sc,h),G(Rt,g),G(ic,m),G(rc,w),G(Qa,S),G(ec,c),G(lc,b),G(cc,C),G(ac,E),G(nc,o),G(Es,p),G(oc,k),ue(P))if(P.length){const z=e.exposed||(e.exposed={});P.forEach(V=>{Object.defineProperty(z,V,{get:()=>s[V],set:R=>s[V]=R})})}else e.exposed||(e.exposed={});y&&e.render===ot&&(e.render=y),M!=null&&(e.inheritAttrs=M),I&&(e.components=I),D&&(e.directives=D),k&&io(e)}function gc(e,t,s=ot){ue(e)&&(e=Fi(e));for(const r in e){const a=e[r];let _;Re(a)?"default"in a?_=Ze(a.from||r,a.default,!0):_=Ze(a.from||r):_=Ze(a),Te(_)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>_.value,set:v=>_.value=v}):t[r]=_}}function Lr(e,t,s){at(ue(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,s)}function oo(e,t,s,r){let a=r.includes(".")?yo(s,r):()=>s[r];if(De(e)){const _=t[e];de(_)&&wt(a,_)}else if(de(e))wt(a,e.bind(s));else if(Re(e))if(ue(e))e.forEach(_=>oo(_,t,s,r));else{const _=de(e.handler)?e.handler.bind(s):t[e.handler];de(_)&&wt(a,_,e)}}function hr(e){const t=e.type,{mixins:s,extends:r}=t,{mixins:a,optionsCache:_,config:{optionMergeStrategies:v}}=e.appContext,i=_.get(t);let n;return i?n=i:!a.length&&!s&&!r?n=t:(n={},a.length&&a.forEach(d=>Us(n,d,v,!0)),Us(n,t,v)),Re(t)&&_.set(t,n),n}function Us(e,t,s,r=!1){const{mixins:a,extends:_}=t;_&&Us(e,_,s,!0),a&&a.forEach(v=>Us(e,v,s,!0));for(const v in t)if(!(r&&v==="expose")){const i=vc[v]||s&&s[v];e[v]=i?i(e[v],t[v]):t[v]}return e}const vc={data:Ar,props:Tr,emits:Tr,methods:rs,computed:rs,beforeCreate:$e,created:$e,beforeMount:$e,mounted:$e,beforeUpdate:$e,updated:$e,beforeDestroy:$e,beforeUnmount:$e,destroyed:$e,unmounted:$e,activated:$e,deactivated:$e,errorCaptured:$e,serverPrefetch:$e,components:rs,directives:rs,watch:Sc,provide:Ar,inject:mc};function Ar(e,t){return t?e?function(){return Be(de(e)?e.call(this,this):e,de(t)?t.call(this,this):t)}:t:e}function mc(e,t){return rs(Fi(e),Fi(t))}function Fi(e){if(ue(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function $e(e,t){return e?[...new Set([].concat(e,t))]:t}function rs(e,t){return e?Be(Object.create(null),e,t):t}function Tr(e,t){return e?ue(e)&&ue(t)?[...new Set([...e,...t])]:Be(Object.create(null),Rr(e),Rr(t??{})):t}function Sc(e,t){if(!e)return t;if(!t)return e;const s=Be(Object.create(null),e);for(const r in t)s[r]=$e(e[r],t[r]);return s}function ao(){return{app:null,config:{isNativeTag:oa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bc=0;function yc(e,t){return function(r,a=null){de(r)||(r=Be({},r)),a!=null&&!Re(a)&&(a=null);const _=ao(),v=new WeakSet,i=[];let n=!1;const d=_.app={_uid:bc++,_component:r,_props:a,_container:null,_context:_,_instance:null,version:sl,get config(){return _.config},set config(f){},use(f,...h){return v.has(f)||(f&&de(f.install)?(v.add(f),f.install(d,...h)):de(f)&&(v.add(f),f(d,...h))),d},mixin(f){return _.mixins.includes(f)||_.mixins.push(f),d},component(f,h){return h?(_.components[f]=h,d):_.components[f]},directive(f,h){return h?(_.directives[f]=h,d):_.directives[f]},mount(f,h,g){if(!n){const m=d._ceVNode||fe(r,a);return m.appContext=_,g===!0?g="svg":g===!1&&(g=void 0),h&&t?t(m,f):e(m,f,g),n=!0,d._container=f,f.__vue_app__=d,ni(m.component)}},onUnmount(f){i.push(f)},unmount(){n&&(at(i,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(f,h){return _.provides[f]=h,d},runWithContext(f){const h=Bt;Bt=d;try{return f()}finally{Bt=h}}};return d}}let Bt=null;function Ms(e,t){if(Me){let s=Me.provides;const r=Me.parent&&Me.parent.provides;r===s&&(s=Me.provides=Object.create(r)),s[e]=t}}function Ze(e,t,s=!1){const r=Me||je;if(r||Bt){const a=Bt?Bt._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return s&&de(t)?t.call(r&&r.proxy):t}}function Cc(){return!!(Me||je||Bt)}const co={},lo=()=>Object.create(co),ho=e=>Object.getPrototypeOf(e)===co;function wc(e,t,s,r=!1){const a={},_=lo();e.propsDefaults=Object.create(null),uo(e,t,a,_);for(const v in e.propsOptions[0])v in a||(a[v]=void 0);s?e.props=r?a:Gn(a):e.type.props?e.props=a:e.props=_,e.attrs=_}function Ec(e,t,s,r){const{props:a,attrs:_,vnode:{patchFlag:v}}=e,i=Se(a),[n]=e.propsOptions;let d=!1;if((r||v>0)&&!(v&16)){if(v&8){const f=e.vnode.dynamicProps;for(let h=0;h<f.length;h++){let g=f[h];if(ii(e.emitsOptions,g))continue;const m=t[g];if(n)if(be(_,g))m!==_[g]&&(_[g]=m,d=!0);else{const w=Qe(g);a[w]=$i(n,i,w,m,e,!1)}else m!==_[g]&&(_[g]=m,d=!0)}}}else{uo(e,t,a,_)&&(d=!0);let f;for(const h in i)(!t||!be(t,h)&&((f=Ft(h))===h||!be(t,f)))&&(n?s&&(s[h]!==void 0||s[f]!==void 0)&&(a[h]=$i(n,i,h,void 0,e,!0)):delete a[h]);if(_!==i)for(const h in _)(!t||!be(t,h))&&(delete _[h],d=!0)}d&&ut(e.attrs,"set","")}function uo(e,t,s,r){const[a,_]=e.propsOptions;let v=!1,i;if(t)for(let n in t){if(ns(n))continue;const d=t[n];let f;a&&be(a,f=Qe(n))?!_||!_.includes(f)?s[f]=d:(i||(i={}))[f]=d:ii(e.emitsOptions,n)||(!(n in r)||d!==r[n])&&(r[n]=d,v=!0)}if(_){const n=Se(s),d=i||Ee;for(let f=0;f<_.length;f++){const h=_[f];s[h]=$i(a,n,h,d[h],e,!be(d,h))}}return v}function $i(e,t,s,r,a,_){const v=e[s];if(v!=null){const i=be(v,"default");if(i&&r===void 0){const n=v.default;if(v.type!==Function&&!v.skipFactory&&de(n)){const{propsDefaults:d}=a;if(s in d)r=d[s];else{const f=ks(a);r=d[s]=n.call(null,t),f()}}else r=n;a.ce&&a.ce._setProp(s,r)}v[0]&&(_&&!i?r=!1:v[1]&&(r===""||r===Ft(s))&&(r=!0))}return r}const kc=new WeakMap;function fo(e,t,s=!1){const r=s?kc:t.propsCache,a=r.get(e);if(a)return a;const _=e.props,v={},i=[];let n=!1;if(!de(e)){const f=h=>{n=!0;const[g,m]=fo(h,t,!0);Be(v,g),m&&i.push(...m)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!_&&!n)return Re(e)&&r.set(e,Kt),Kt;if(ue(_))for(let f=0;f<_.length;f++){const h=Qe(_[f]);Dr(h)&&(v[h]=Ee)}else if(_)for(const f in _){const h=Qe(f);if(Dr(h)){const g=_[f],m=v[h]=ue(g)||de(g)?{type:g}:Be({},g),w=m.type;let S=!1,c=!0;if(ue(w))for(let u=0;u<w.length;++u){const o=w[u],l=de(o)&&o.name;if(l==="Boolean"){S=!0;break}else l==="String"&&(c=!1)}else S=de(w)&&w.name==="Boolean";m[0]=S,m[1]=c,(S||be(m,"default"))&&i.push(h)}}const d=[v,i];return Re(e)&&r.set(e,d),d}function Dr(e){return e[0]!=="$"&&!ns(e)}const _o=e=>e[0]==="_"||e==="$stable",ur=e=>ue(e)?e.map(nt):[nt(e)],xc=(e,t,s)=>{if(t._n)return t;const r=Xa((...a)=>ur(t(...a)),s);return r._c=!1,r},po=(e,t,s)=>{const r=e._ctx;for(const a in e){if(_o(a))continue;const _=e[a];if(de(_))t[a]=xc(a,_,r);else if(_!=null){const v=ur(_);t[a]=()=>v}}},go=(e,t)=>{const s=ur(t);e.slots.default=()=>s},vo=(e,t,s)=>{for(const r in t)(s||r!=="_")&&(e[r]=t[r])},Rc=(e,t,s)=>{const r=e.slots=lo();if(e.vnode.shapeFlag&32){const a=t._;a?(vo(r,t,s),s&&Rn(r,"_",a,!0)):po(t,r)}else t&&go(e,t)},Lc=(e,t,s)=>{const{vnode:r,slots:a}=e;let _=!0,v=Ee;if(r.shapeFlag&32){const i=t._;i?s&&i===1?_=!1:vo(a,t,s):(_=!t.$stable,po(t,a)),v=t}else t&&(go(e,t),v={default:1});if(_)for(const i in a)!_o(i)&&v[i]==null&&delete a[i]},Ke=jc;function Ac(e){return Tc(e)}function Tc(e,t){const s=Ys();s.__VUE__=!0;const{insert:r,remove:a,patchProp:_,createElement:v,createText:i,createComment:n,setText:d,setElementText:f,parentNode:h,nextSibling:g,setScopeId:m=ot,insertStaticContent:w}=e,S=(L,T,N,K=null,j=null,X=null,ie=void 0,se=null,ee=!!T.dynamicChildren)=>{if(L===T)return;L&&!ts(L,T)&&(K=A(L),H(L,j,X,!0),L=null),T.patchFlag===-2&&(ee=!1,T.dynamicChildren=null);const{type:Q,ref:oe,shapeFlag:re}=T;switch(Q){case ri:c(L,T,N,K);break;case It:u(L,T,N,K);break;case bi:L==null&&o(T,N,K,ie);break;case Oe:I(L,T,N,K,j,X,ie,se,ee);break;default:re&1?y(L,T,N,K,j,X,ie,se,ee):re&6?D(L,T,N,K,j,X,ie,se,ee):(re&64||re&128)&&Q.process(L,T,N,K,j,X,ie,se,ee,F)}oe!=null&&j&&js(oe,L&&L.ref,X,T||L,!T)},c=(L,T,N,K)=>{if(L==null)r(T.el=i(T.children),N,K);else{const j=T.el=L.el;T.children!==L.children&&d(j,T.children)}},u=(L,T,N,K)=>{L==null?r(T.el=n(T.children||""),N,K):T.el=L.el},o=(L,T,N,K)=>{[L.el,L.anchor]=w(L.children,T,N,K,L.el,L.anchor)},l=({el:L,anchor:T},N,K)=>{let j;for(;L&&L!==T;)j=g(L),r(L,N,K),L=j;r(T,N,K)},p=({el:L,anchor:T})=>{let N;for(;L&&L!==T;)N=g(L),a(L),L=N;a(T)},y=(L,T,N,K,j,X,ie,se,ee)=>{T.type==="svg"?ie="svg":T.type==="math"&&(ie="mathml"),L==null?C(T,N,K,j,X,ie,se,ee):k(L,T,j,X,ie,se,ee)},C=(L,T,N,K,j,X,ie,se)=>{let ee,Q;const{props:oe,shapeFlag:re,transition:ne,dirs:le}=L;if(ee=L.el=v(L.type,X,oe&&oe.is,oe),re&8?f(ee,L.children):re&16&&b(L.children,ee,null,K,j,mi(L,X),ie,se),le&&At(L,null,K,"created"),E(ee,L,L.scopeId,ie,K),oe){for(const ge in oe)ge!=="value"&&!ns(ge)&&_(ee,ge,null,oe[ge],X,K);"value"in oe&&_(ee,"value",null,oe.value,X),(Q=oe.onVnodeBeforeMount)&&it(Q,K,L)}le&&At(L,null,K,"beforeMount");const _e=Dc(j,ne);_e&&ne.beforeEnter(ee),r(ee,T,N),((Q=oe&&oe.onVnodeMounted)||_e||le)&&Ke(()=>{Q&&it(Q,K,L),_e&&ne.enter(ee),le&&At(L,null,K,"mounted")},j)},E=(L,T,N,K,j)=>{if(N&&m(L,N),K)for(let X=0;X<K.length;X++)m(L,K[X]);if(j){let X=j.subTree;if(T===X||wo(X.type)&&(X.ssContent===T||X.ssFallback===T)){const ie=j.vnode;E(L,ie,ie.scopeId,ie.slotScopeIds,j.parent)}}},b=(L,T,N,K,j,X,ie,se,ee=0)=>{for(let Q=ee;Q<L.length;Q++){const oe=L[Q]=se?St(L[Q]):nt(L[Q]);S(null,oe,T,N,K,j,X,ie,se)}},k=(L,T,N,K,j,X,ie)=>{const se=T.el=L.el;let{patchFlag:ee,dynamicChildren:Q,dirs:oe}=T;ee|=L.patchFlag&16;const re=L.props||Ee,ne=T.props||Ee;let le;if(N&&Tt(N,!1),(le=ne.onVnodeBeforeUpdate)&&it(le,N,T,L),oe&&At(T,L,N,"beforeUpdate"),N&&Tt(N,!0),(re.innerHTML&&ne.innerHTML==null||re.textContent&&ne.textContent==null)&&f(se,""),Q?P(L.dynamicChildren,Q,se,N,K,mi(T,j),X):ie||V(L,T,se,null,N,K,mi(T,j),X,!1),ee>0){if(ee&16)M(se,re,ne,N,j);else if(ee&2&&re.class!==ne.class&&_(se,"class",null,ne.class,j),ee&4&&_(se,"style",re.style,ne.style,j),ee&8){const _e=T.dynamicProps;for(let ge=0;ge<_e.length;ge++){const me=_e[ge],Le=re[me],Ae=ne[me];(Ae!==Le||me==="value")&&_(se,me,Le,Ae,j,N)}}ee&1&&L.children!==T.children&&f(se,T.children)}else!ie&&Q==null&&M(se,re,ne,N,j);((le=ne.onVnodeUpdated)||oe)&&Ke(()=>{le&&it(le,N,T,L),oe&&At(T,L,N,"updated")},K)},P=(L,T,N,K,j,X,ie)=>{for(let se=0;se<T.length;se++){const ee=L[se],Q=T[se],oe=ee.el&&(ee.type===Oe||!ts(ee,Q)||ee.shapeFlag&70)?h(ee.el):N;S(ee,Q,oe,null,K,j,X,ie,!0)}},M=(L,T,N,K,j)=>{if(T!==N){if(T!==Ee)for(const X in T)!ns(X)&&!(X in N)&&_(L,X,T[X],null,j,K);for(const X in N){if(ns(X))continue;const ie=N[X],se=T[X];ie!==se&&X!=="value"&&_(L,X,se,ie,j,K)}"value"in N&&_(L,"value",T.value,N.value,j)}},I=(L,T,N,K,j,X,ie,se,ee)=>{const Q=T.el=L?L.el:i(""),oe=T.anchor=L?L.anchor:i("");let{patchFlag:re,dynamicChildren:ne,slotScopeIds:le}=T;le&&(se=se?se.concat(le):le),L==null?(r(Q,N,K),r(oe,N,K),b(T.children||[],N,oe,j,X,ie,se,ee)):re>0&&re&64&&ne&&L.dynamicChildren?(P(L.dynamicChildren,ne,N,j,X,ie,se),(T.key!=null||j&&T===j.subTree)&&mo(L,T,!0)):V(L,T,N,oe,j,X,ie,se,ee)},D=(L,T,N,K,j,X,ie,se,ee)=>{T.slotScopeIds=se,L==null?T.shapeFlag&512?j.ctx.activate(T,N,K,ie,ee):U(T,N,K,j,X,ie,ee):q(L,T,ee)},U=(L,T,N,K,j,X,ie)=>{const se=L.component=Jc(L,K,j);if(ro(L)&&(se.ctx.renderer=F),Xc(se,!1,ie),se.asyncDep){if(j&&j.registerDep(se,G,ie),!L.el){const ee=se.subTree=fe(It);u(null,ee,T,N)}}else G(se,L,T,N,j,X,ie)},q=(L,T,N)=>{const K=T.component=L.component;if(Nc(L,T,N))if(K.asyncDep&&!K.asyncResolved){z(K,T,N);return}else K.next=T,K.update();else T.el=L.el,K.vnode=T},G=(L,T,N,K,j,X,ie)=>{const se=()=>{if(L.isMounted){let{next:re,bu:ne,u:le,parent:_e,vnode:ge}=L;{const Fe=So(L);if(Fe){re&&(re.el=ge.el,z(L,re,ie)),Fe.asyncDep.then(()=>{L.isUnmounted||se()});return}}let me=re,Le;Tt(L,!1),re?(re.el=ge.el,z(L,re,ie)):re=ge,ne&&Bs(ne),(Le=re.props&&re.props.onVnodeBeforeUpdate)&&it(Le,_e,re,ge),Tt(L,!0);const Ae=Si(L),ve=L.subTree;L.subTree=Ae,S(ve,Ae,h(ve.el),A(ve),L,j,X),re.el=Ae.el,me===null&&Wc(L,Ae.el),le&&Ke(le,j),(Le=re.props&&re.props.onVnodeUpdated)&&Ke(()=>it(Le,_e,re,ge),j)}else{let re;const{el:ne,props:le}=T,{bm:_e,m:ge,parent:me,root:Le,type:Ae}=L,ve=cs(T);if(Tt(L,!1),_e&&Bs(_e),!ve&&(re=le&&le.onVnodeBeforeMount)&&it(re,me,T),Tt(L,!0),ne&&Z){const Fe=()=>{L.subTree=Si(L),Z(ne,L.subTree,L,j,null)};ve&&Ae.__asyncHydrate?Ae.__asyncHydrate(ne,L,Fe):Fe()}else{Le.ce&&Le.ce._injectChildStyle(Ae);const Fe=L.subTree=Si(L);S(null,Fe,N,K,L,j,X),T.el=Fe.el}if(ge&&Ke(ge,j),!ve&&(re=le&&le.onVnodeMounted)){const Fe=T;Ke(()=>it(re,me,Fe),j)}(T.shapeFlag&256||me&&cs(me.vnode)&&me.vnode.shapeFlag&256)&&L.a&&Ke(L.a,j),L.isMounted=!0,T=N=K=null}};L.scope.on();const ee=L.effect=new Bn(se);L.scope.off();const Q=L.update=ee.run.bind(ee),oe=L.job=ee.runIfDirty.bind(ee);oe.i=L,oe.id=L.uid,ee.scheduler=()=>cr(oe),Tt(L,!0),Q()},z=(L,T,N)=>{T.component=L;const K=L.vnode.props;L.vnode=T,L.next=null,Ec(L,T.props,K,N),Lc(L,T.children,N),kt(),kr(L),xt()},V=(L,T,N,K,j,X,ie,se,ee=!1)=>{const Q=L&&L.children,oe=L?L.shapeFlag:0,re=T.children,{patchFlag:ne,shapeFlag:le}=T;if(ne>0){if(ne&128){O(Q,re,N,K,j,X,ie,se,ee);return}else if(ne&256){R(Q,re,N,K,j,X,ie,se,ee);return}}le&8?(oe&16&&ae(Q,j,X),re!==Q&&f(N,re)):oe&16?le&16?O(Q,re,N,K,j,X,ie,se,ee):ae(Q,j,X,!0):(oe&8&&f(N,""),le&16&&b(re,N,K,j,X,ie,se,ee))},R=(L,T,N,K,j,X,ie,se,ee)=>{L=L||Kt,T=T||Kt;const Q=L.length,oe=T.length,re=Math.min(Q,oe);let ne;for(ne=0;ne<re;ne++){const le=T[ne]=ee?St(T[ne]):nt(T[ne]);S(L[ne],le,N,null,j,X,ie,se,ee)}Q>oe?ae(L,j,X,!0,!1,re):b(T,N,K,j,X,ie,se,ee,re)},O=(L,T,N,K,j,X,ie,se,ee)=>{let Q=0;const oe=T.length;let re=L.length-1,ne=oe-1;for(;Q<=re&&Q<=ne;){const le=L[Q],_e=T[Q]=ee?St(T[Q]):nt(T[Q]);if(ts(le,_e))S(le,_e,N,null,j,X,ie,se,ee);else break;Q++}for(;Q<=re&&Q<=ne;){const le=L[re],_e=T[ne]=ee?St(T[ne]):nt(T[ne]);if(ts(le,_e))S(le,_e,N,null,j,X,ie,se,ee);else break;re--,ne--}if(Q>re){if(Q<=ne){const le=ne+1,_e=le<oe?T[le].el:K;for(;Q<=ne;)S(null,T[Q]=ee?St(T[Q]):nt(T[Q]),N,_e,j,X,ie,se,ee),Q++}}else if(Q>ne)for(;Q<=re;)H(L[Q],j,X,!0),Q++;else{const le=Q,_e=Q,ge=new Map;for(Q=_e;Q<=ne;Q++){const Ue=T[Q]=ee?St(T[Q]):nt(T[Q]);Ue.key!=null&&ge.set(Ue.key,Q)}let me,Le=0;const Ae=ne-_e+1;let ve=!1,Fe=0;const Qt=new Array(Ae);for(Q=0;Q<Ae;Q++)Qt[Q]=0;for(Q=le;Q<=re;Q++){const Ue=L[Q];if(Le>=Ae){H(Ue,j,X,!0);continue}let st;if(Ue.key!=null)st=ge.get(Ue.key);else for(me=_e;me<=ne;me++)if(Qt[me-_e]===0&&ts(Ue,T[me])){st=me;break}st===void 0?H(Ue,j,X,!0):(Qt[st-_e]=Q+1,st>=Fe?Fe=st:ve=!0,S(Ue,T[st],N,null,j,X,ie,se,ee),Le++)}const br=ve?Oc(Qt):Kt;for(me=br.length-1,Q=Ae-1;Q>=0;Q--){const Ue=_e+Q,st=T[Ue],yr=Ue+1<oe?T[Ue+1].el:K;Qt[Q]===0?S(null,st,N,yr,j,X,ie,se,ee):ve&&(me<0||Q!==br[me]?B(st,N,yr,2):me--)}}},B=(L,T,N,K,j=null)=>{const{el:X,type:ie,transition:se,children:ee,shapeFlag:Q}=L;if(Q&6){B(L.component.subTree,T,N,K);return}if(Q&128){L.suspense.move(T,N,K);return}if(Q&64){ie.move(L,T,N,F);return}if(ie===Oe){r(X,T,N);for(let re=0;re<ee.length;re++)B(ee[re],T,N,K);r(L.anchor,T,N);return}if(ie===bi){l(L,T,N);return}if(K!==2&&Q&1&&se)if(K===0)se.beforeEnter(X),r(X,T,N),Ke(()=>se.enter(X),j);else{const{leave:re,delayLeave:ne,afterLeave:le}=se,_e=()=>r(X,T,N),ge=()=>{re(X,()=>{_e(),le&&le()})};ne?ne(X,_e,ge):ge()}else r(X,T,N)},H=(L,T,N,K=!1,j=!1)=>{const{type:X,props:ie,ref:se,children:ee,dynamicChildren:Q,shapeFlag:oe,patchFlag:re,dirs:ne,cacheIndex:le}=L;if(re===-2&&(j=!1),se!=null&&js(se,null,N,L,!0),le!=null&&(T.renderCache[le]=void 0),oe&256){T.ctx.deactivate(L);return}const _e=oe&1&&ne,ge=!cs(L);let me;if(ge&&(me=ie&&ie.onVnodeBeforeUnmount)&&it(me,T,L),oe&6)ce(L.component,N,K);else{if(oe&128){L.suspense.unmount(N,K);return}_e&&At(L,null,T,"beforeUnmount"),oe&64?L.type.remove(L,T,N,F,K):Q&&!Q.hasOnce&&(X!==Oe||re>0&&re&64)?ae(Q,T,N,!1,!0):(X===Oe&&re&384||!j&&oe&16)&&ae(ee,T,N),K&&J(L)}(ge&&(me=ie&&ie.onVnodeUnmounted)||_e)&&Ke(()=>{me&&it(me,T,L),_e&&At(L,null,T,"unmounted")},N)},J=L=>{const{type:T,el:N,anchor:K,transition:j}=L;if(T===Oe){te(N,K);return}if(T===bi){p(L);return}const X=()=>{a(N),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(L.shapeFlag&1&&j&&!j.persisted){const{leave:ie,delayLeave:se}=j,ee=()=>ie(N,X);se?se(L.el,X,ee):ee()}else X()},te=(L,T)=>{let N;for(;L!==T;)N=g(L),a(L),L=N;a(T)},ce=(L,T,N)=>{const{bum:K,scope:j,job:X,subTree:ie,um:se,m:ee,a:Q}=L;Or(ee),Or(Q),K&&Bs(K),j.stop(),X&&(X.flags|=8,H(ie,L,T,N)),se&&Ke(se,T),Ke(()=>{L.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&L.asyncDep&&!L.asyncResolved&&L.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},ae=(L,T,N,K=!1,j=!1,X=0)=>{for(let ie=X;ie<L.length;ie++)H(L[ie],T,N,K,j)},A=L=>{if(L.shapeFlag&6)return A(L.component.subTree);if(L.shapeFlag&128)return L.suspense.next();const T=g(L.anchor||L.el),N=T&&T[Ya];return N?g(N):T};let x=!1;const $=(L,T,N)=>{L==null?T._vnode&&H(T._vnode,null,null,!0):S(T._vnode||null,L,T,null,null,null,N),T._vnode=L,x||(x=!0,kr(),eo(),x=!1)},F={p:S,um:H,m:B,r:J,mt:U,mc:b,pc:V,pbc:P,n:A,o:e};let Y,Z;return{render:$,hydrate:Y,createApp:yc($,Y)}}function mi({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Tt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Dc(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function mo(e,t,s=!1){const r=e.children,a=t.children;if(ue(r)&&ue(a))for(let _=0;_<r.length;_++){const v=r[_];let i=a[_];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=a[_]=St(a[_]),i.el=v.el),!s&&i.patchFlag!==-2&&mo(v,i)),i.type===ri&&(i.el=v.el)}}function Oc(e){const t=e.slice(),s=[0];let r,a,_,v,i;const n=e.length;for(r=0;r<n;r++){const d=e[r];if(d!==0){if(a=s[s.length-1],e[a]<d){t[r]=a,s.push(r);continue}for(_=0,v=s.length-1;_<v;)i=_+v>>1,e[s[i]]<d?_=i+1:v=i;d<e[s[_]]&&(_>0&&(t[r]=s[_-1]),s[_]=r)}}for(_=s.length,v=s[_-1];_-- >0;)s[_]=v,v=t[v];return s}function So(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:So(t)}function Or(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Pc=Symbol.for("v-scx"),Bc=()=>Ze(Pc);function wt(e,t,s){return bo(e,t,s)}function bo(e,t,s=Ee){const{immediate:r,deep:a,flush:_,once:v}=s,i=Be({},s),n=t&&r||!t&&_!=="post";let d;if(ms){if(_==="sync"){const m=Bc();d=m.__watcherHandles||(m.__watcherHandles=[])}else if(!n){const m=()=>{};return m.stop=ot,m.resume=ot,m.pause=ot,m}}const f=Me;i.call=(m,w,S)=>at(m,f,w,S);let h=!1;_==="post"?i.scheduler=m=>{Ke(m,f&&f.suspense)}:_!=="sync"&&(h=!0,i.scheduler=(m,w)=>{w?m():cr(m)}),i.augmentJob=m=>{t&&(m.flags|=4),h&&(m.flags|=2,f&&(m.id=f.uid,m.i=f))};const g=za(e,t,i);return ms&&(d?d.push(g):n&&g()),g}function Mc(e,t,s){const r=this.proxy,a=De(e)?e.includes(".")?yo(r,e):()=>r[e]:e.bind(r,r);let _;de(t)?_=t:(_=t.handler,s=t);const v=ks(this),i=bo(a,_.bind(r),s);return v(),i}function yo(e,t){const s=t.split(".");return()=>{let r=e;for(let a=0;a<s.length&&r;a++)r=r[s[a]];return r}}const Ic=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Qe(t)}Modifiers`]||e[`${Ft(t)}Modifiers`];function Hc(e,t,...s){if(e.isUnmounted)return;const r=e.vnode.props||Ee;let a=s;const _=t.startsWith("update:"),v=_&&Ic(r,t.slice(7));v&&(v.trim&&(a=s.map(f=>De(f)?f.trim():f)),v.number&&(a=s.map(Ti)));let i,n=r[i=di(t)]||r[i=di(Qe(t))];!n&&_&&(n=r[i=di(Ft(t))]),n&&at(n,e,6,a);const d=r[i+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,at(d,e,6,a)}}function Co(e,t,s=!1){const r=t.emitsCache,a=r.get(e);if(a!==void 0)return a;const _=e.emits;let v={},i=!1;if(!de(e)){const n=d=>{const f=Co(d,t,!0);f&&(i=!0,Be(v,f))};!s&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return!_&&!i?(Re(e)&&r.set(e,null),null):(ue(_)?_.forEach(n=>v[n]=null):Be(v,_),Re(e)&&r.set(e,v),v)}function ii(e,t){return!e||!Vs(t)?!1:(t=t.slice(2).replace(/Once$/,""),be(e,t[0].toLowerCase()+t.slice(1))||be(e,Ft(t))||be(e,t))}function Si(e){const{type:t,vnode:s,proxy:r,withProxy:a,propsOptions:[_],slots:v,attrs:i,emit:n,render:d,renderCache:f,props:h,data:g,setupState:m,ctx:w,inheritAttrs:S}=e,c=Ws(e);let u,o;try{if(s.shapeFlag&4){const p=a||r,y=p;u=nt(d.call(y,p,f,h,m,g,w)),o=i}else{const p=t;u=nt(p.length>1?p(h,{attrs:i,slots:v,emit:n}):p(h,null)),o=t.props?i:Fc(i)}}catch(p){hs.length=0,ei(p,e,1),u=fe(It)}let l=u;if(o&&S!==!1){const p=Object.keys(o),{shapeFlag:y}=l;p.length&&y&7&&(_&&p.some(Ji)&&(o=$c(o,_)),l=Jt(l,o,!1,!0))}return s.dirs&&(l=Jt(l,null,!1,!0),l.dirs=l.dirs?l.dirs.concat(s.dirs):s.dirs),s.transition&&lr(l,s.transition),u=l,Ws(c),u}const Fc=e=>{let t;for(const s in e)(s==="class"||s==="style"||Vs(s))&&((t||(t={}))[s]=e[s]);return t},$c=(e,t)=>{const s={};for(const r in e)(!Ji(r)||!(r.slice(9)in t))&&(s[r]=e[r]);return s};function Nc(e,t,s){const{props:r,children:a,component:_}=e,{props:v,children:i,patchFlag:n}=t,d=_.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&n>=0){if(n&1024)return!0;if(n&16)return r?Pr(r,v,d):!!v;if(n&8){const f=t.dynamicProps;for(let h=0;h<f.length;h++){const g=f[h];if(v[g]!==r[g]&&!ii(d,g))return!0}}}else return(a||i)&&(!i||!i.$stable)?!0:r===v?!1:r?v?Pr(r,v,d):!0:!!v;return!1}function Pr(e,t,s){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let a=0;a<r.length;a++){const _=r[a];if(t[_]!==e[_]&&!ii(s,_))return!0}return!1}function Wc({vnode:e,parent:t},s){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=s,t=t.parent;else break}}const wo=e=>e.__isSuspense;function jc(e,t){t&&t.pendingBranch?ue(e)?t.effects.push(...e):t.effects.push(e):Ja(e)}const Oe=Symbol.for("v-fgt"),ri=Symbol.for("v-txt"),It=Symbol.for("v-cmt"),bi=Symbol.for("v-stc"),hs=[];let Ve=null;function he(e=!1){hs.push(Ve=e?null:[])}function Uc(){hs.pop(),Ve=hs[hs.length-1]||null}let vs=1;function Br(e,t=!1){vs+=e,e<0&&Ve&&t&&(Ve.hasOnce=!0)}function Eo(e){return e.dynamicChildren=vs>0?Ve||Kt:null,Uc(),vs>0&&Ve&&Ve.push(e),e}function pe(e,t,s,r,a,_){return Eo(W(e,t,s,r,a,_,!0))}function Je(e,t,s,r,a){return Eo(fe(e,t,s,r,a,!0))}function qs(e){return e?e.__v_isVNode===!0:!1}function ts(e,t){return e.type===t.type&&e.key===t.key}const ko=({key:e})=>e??null,Is=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?De(e)||Te(e)||de(e)?{i:je,r:e,k:t,f:!!s}:e:null);function W(e,t=null,s=null,r=0,a=null,_=e===Oe?0:1,v=!1,i=!1){const n={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ko(t),ref:t&&Is(t),scopeId:so,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:_,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:je};return i?(dr(n,s),_&128&&e.normalize(n)):s&&(n.shapeFlag|=De(s)?8:16),vs>0&&!v&&Ve&&(n.patchFlag>0||_&6)&&n.patchFlag!==32&&Ve.push(n),n}const fe=qc;function qc(e,t=null,s=null,r=0,a=null,_=!1){if((!e||e===dc)&&(e=It),qs(e)){const i=Jt(e,t,!0);return s&&dr(i,s),vs>0&&!_&&Ve&&(i.shapeFlag&6?Ve[Ve.indexOf(e)]=i:Ve.push(i)),i.patchFlag=-2,i}if(tl(e)&&(e=e.__vccOpts),t){t=Kc(t);let{class:i,style:n}=t;i&&!De(i)&&(t.class=Zs(i)),Re(n)&&(nr(n)&&!ue(n)&&(n=Be({},n)),t.style=Zi(n))}const v=De(e)?1:wo(e)?128:Za(e)?64:Re(e)?4:de(e)?2:0;return W(e,t,s,r,a,v,_,!0)}function Kc(e){return e?nr(e)||ho(e)?Be({},e):e:null}function Jt(e,t,s=!1,r=!1){const{props:a,ref:_,patchFlag:v,children:i,transition:n}=e,d=t?zc(a||{},t):a,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&ko(d),ref:t&&t.ref?s&&_?ue(_)?_.concat(Is(t)):[_,Is(t)]:Is(t):_,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Oe?v===-1?16:v|16:v,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:n,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Jt(e.ssContent),ssFallback:e.ssFallback&&Jt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return n&&r&&lr(f,n.clone(f)),f}function xo(e=" ",t=0){return fe(ri,null,e,t)}function ft(e="",t=!1){return t?(he(),Je(It,null,e)):fe(It,null,e)}function nt(e){return e==null||typeof e=="boolean"?fe(It):ue(e)?fe(Oe,null,e.slice()):qs(e)?St(e):fe(ri,null,String(e))}function St(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Jt(e)}function dr(e,t){let s=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ue(t))s=16;else if(typeof t=="object")if(r&65){const a=t.default;a&&(a._c&&(a._d=!1),dr(e,a()),a._c&&(a._d=!0));return}else{s=32;const a=t._;!a&&!ho(t)?t._ctx=je:a===3&&je&&(je.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else de(t)?(t={default:t,_ctx:je},s=32):(t=String(t),r&64?(s=16,t=[xo(t)]):s=8);e.children=t,e.shapeFlag|=s}function zc(...e){const t={};for(let s=0;s<e.length;s++){const r=e[s];for(const a in r)if(a==="class")t.class!==r.class&&(t.class=Zs([t.class,r.class]));else if(a==="style")t.style=Zi([t.style,r.style]);else if(Vs(a)){const _=t[a],v=r[a];v&&_!==v&&!(ue(_)&&_.includes(v))&&(t[a]=_?[].concat(_,v):v)}else a!==""&&(t[a]=r[a])}return t}function it(e,t,s,r=null){at(e,t,7,[s,r])}const Vc=ao();let Gc=0;function Jc(e,t,s){const r=e.type,a=(t?t.appContext:e.appContext)||Vc,_={uid:Gc++,vnode:e,type:r,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Dn(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fo(r,a),emitsOptions:Co(r,a),emit:null,emitted:null,propsDefaults:Ee,inheritAttrs:r.inheritAttrs,ctx:Ee,data:Ee,props:Ee,attrs:Ee,slots:Ee,refs:Ee,setupState:Ee,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return _.ctx={_},_.root=t?t.root:_,_.emit=Hc.bind(null,_),e.ce&&e.ce(_),_}let Me=null,Ks,Ni;{const e=Ys(),t=(s,r)=>{let a;return(a=e[s])||(a=e[s]=[]),a.push(r),_=>{a.length>1?a.forEach(v=>v(_)):a[0](_)}};Ks=t("__VUE_INSTANCE_SETTERS__",s=>Me=s),Ni=t("__VUE_SSR_SETTERS__",s=>ms=s)}const ks=e=>{const t=Me;return Ks(e),e.scope.on(),()=>{e.scope.off(),Ks(t)}},Mr=()=>{Me&&Me.scope.off(),Ks(null)};function Ro(e){return e.vnode.shapeFlag&4}let ms=!1;function Xc(e,t=!1,s=!1){t&&Ni(t);const{props:r,children:a}=e.vnode,_=Ro(e);wc(e,r,_,t),Rc(e,a,s);const v=_?Yc(e,t):void 0;return t&&Ni(!1),v}function Yc(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,_c);const{setup:r}=s;if(r){kt();const a=e.setupContext=r.length>1?Qc(e):null,_=ks(e),v=ws(r,e,0,[e.props,a]),i=En(v);if(xt(),_(),(i||e.sp)&&!cs(e)&&io(e),i){if(v.then(Mr,Mr),t)return v.then(n=>{Ir(e,n,t)}).catch(n=>{ei(n,e,0)});e.asyncDep=v}else Ir(e,v,t)}else Lo(e,t)}function Ir(e,t,s){de(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Re(t)&&(e.setupState=Yn(t)),Lo(e,s)}let Hr;function Lo(e,t,s){const r=e.type;if(!e.render){if(!t&&Hr&&!r.render){const a=r.template||hr(e).template;if(a){const{isCustomElement:_,compilerOptions:v}=e.appContext.config,{delimiters:i,compilerOptions:n}=r,d=Be(Be({isCustomElement:_,delimiters:i},v),n);r.render=Hr(a,d)}}e.render=r.render||ot}{const a=ks(e);kt();try{pc(e)}finally{xt(),a()}}}const Zc={get(e,t){return Ie(e,"get",""),e[t]}};function Qc(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Zc),slots:e.slots,emit:e.emit,expose:t}}function ni(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Yn(or(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in ls)return ls[s](e)},has(t,s){return s in t||s in ls}})):e.proxy}function el(e,t=!0){return de(e)?e.displayName||e.name:e.name||t&&e.__name}function tl(e){return de(e)&&"__vccOpts"in e}const we=(e,t)=>qa(e,t,ms);function Ao(e,t,s){const r=arguments.length;return r===2?Re(t)&&!ue(t)?qs(t)?fe(e,null,[t]):fe(e,t):fe(e,null,t):(r>3?s=Array.prototype.slice.call(arguments,2):r===3&&qs(s)&&(s=[s]),fe(e,t,s))}const sl="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wi;const Fr=typeof window<"u"&&window.trustedTypes;if(Fr)try{Wi=Fr.createPolicy("vue",{createHTML:e=>e})}catch{}const To=Wi?e=>Wi.createHTML(e):e=>e,il="http://www.w3.org/2000/svg",rl="http://www.w3.org/1998/Math/MathML",ht=typeof document<"u"?document:null,$r=ht&&ht.createElement("template"),nl={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,r)=>{const a=t==="svg"?ht.createElementNS(il,e):t==="mathml"?ht.createElementNS(rl,e):s?ht.createElement(e,{is:s}):ht.createElement(e);return e==="select"&&r&&r.multiple!=null&&a.setAttribute("multiple",r.multiple),a},createText:e=>ht.createTextNode(e),createComment:e=>ht.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ht.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,r,a,_){const v=s?s.previousSibling:t.lastChild;if(a&&(a===_||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),s),!(a===_||!(a=a.nextSibling)););else{$r.innerHTML=To(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const i=$r.content;if(r==="svg"||r==="mathml"){const n=i.firstChild;for(;n.firstChild;)i.appendChild(n.firstChild);i.removeChild(n)}t.insertBefore(i,s)}return[v?v.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},ol=Symbol("_vtc");function al(e,t,s){const r=e[ol];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const zs=Symbol("_vod"),Do=Symbol("_vsh"),cl={beforeMount(e,{value:t},{transition:s}){e[zs]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):ss(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:r}){!t!=!s&&(r?t?(r.beforeEnter(e),ss(e,!0),r.enter(e)):r.leave(e,()=>{ss(e,!1)}):ss(e,t))},beforeUnmount(e,{value:t}){ss(e,t)}};function ss(e,t){e.style.display=t?e[zs]:"none",e[Do]=!t}const ll=Symbol(""),hl=/(^|;)\s*display\s*:/;function ul(e,t,s){const r=e.style,a=De(s);let _=!1;if(s&&!a){if(t)if(De(t))for(const v of t.split(";")){const i=v.slice(0,v.indexOf(":")).trim();s[i]==null&&Hs(r,i,"")}else for(const v in t)s[v]==null&&Hs(r,v,"");for(const v in s)v==="display"&&(_=!0),Hs(r,v,s[v])}else if(a){if(t!==s){const v=r[ll];v&&(s+=";"+v),r.cssText=s,_=hl.test(s)}}else t&&e.removeAttribute("style");zs in e&&(e[zs]=_?r.display:"",e[Do]&&(r.display="none"))}const Nr=/\s*!important$/;function Hs(e,t,s){if(ue(s))s.forEach(r=>Hs(e,t,r));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const r=dl(e,t);Nr.test(s)?e.setProperty(Ft(r),s.replace(Nr,""),"important"):e[r]=s}}const Wr=["Webkit","Moz","ms"],yi={};function dl(e,t){const s=yi[t];if(s)return s;let r=Qe(t);if(r!=="filter"&&r in e)return yi[t]=r;r=Xs(r);for(let a=0;a<Wr.length;a++){const _=Wr[a]+r;if(_ in e)return yi[t]=_}return t}const jr="http://www.w3.org/1999/xlink";function Ur(e,t,s,r,a,_=ga(t)){r&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(jr,t.slice(6,t.length)):e.setAttributeNS(jr,t,s):s==null||_&&!Ln(s)?e.removeAttribute(t):e.setAttribute(t,_?"":Et(s)?String(s):s)}function qr(e,t,s,r,a){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?To(s):s);return}const _=e.tagName;if(t==="value"&&_!=="PROGRESS"&&!_.includes("-")){const i=_==="OPTION"?e.getAttribute("value")||"":e.value,n=s==null?e.type==="checkbox"?"on":"":String(s);(i!==n||!("_value"in e))&&(e.value=n),s==null&&e.removeAttribute(t),e._value=s;return}let v=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=Ln(s):s==null&&i==="string"?(s="",v=!0):i==="number"&&(s=0,v=!0)}try{e[t]=s}catch{}v&&e.removeAttribute(a||t)}function Ut(e,t,s,r){e.addEventListener(t,s,r)}function fl(e,t,s,r){e.removeEventListener(t,s,r)}const Kr=Symbol("_vei");function _l(e,t,s,r,a=null){const _=e[Kr]||(e[Kr]={}),v=_[t];if(r&&v)v.value=r;else{const[i,n]=pl(t);if(r){const d=_[t]=ml(r,a);Ut(e,i,d,n)}else v&&(fl(e,i,v,n),_[t]=void 0)}}const zr=/(?:Once|Passive|Capture)$/;function pl(e){let t;if(zr.test(e)){t={};let r;for(;r=e.match(zr);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ft(e.slice(2)),t]}let Ci=0;const gl=Promise.resolve(),vl=()=>Ci||(gl.then(()=>Ci=0),Ci=Date.now());function ml(e,t){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;at(Sl(r,s.value),t,5,[r])};return s.value=e,s.attached=vl(),s}function Sl(e,t){if(ue(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(r=>a=>!a._stopped&&r&&r(a))}else return t}const Vr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,bl=(e,t,s,r,a,_)=>{const v=a==="svg";t==="class"?al(e,r,v):t==="style"?ul(e,s,r):Vs(t)?Ji(t)||_l(e,t,s,r,_):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):yl(e,t,r,v))?(qr(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ur(e,t,r,v,_,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!De(r))?qr(e,Qe(t),r,_,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Ur(e,t,r,v))};function yl(e,t,s,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Vr(t)&&de(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Vr(t)&&De(s)?!1:t in e}const Gr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ue(t)?s=>Bs(t,s):t};function Cl(e){e.target.composing=!0}function Jr(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const wi=Symbol("_assign"),Xr={created(e,{modifiers:{lazy:t,trim:s,number:r}},a){e[wi]=Gr(a);const _=r||a.props&&a.props.type==="number";Ut(e,t?"change":"input",v=>{if(v.target.composing)return;let i=e.value;s&&(i=i.trim()),_&&(i=Ti(i)),e[wi](i)}),s&&Ut(e,"change",()=>{e.value=e.value.trim()}),t||(Ut(e,"compositionstart",Cl),Ut(e,"compositionend",Jr),Ut(e,"change",Jr))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:r,trim:a,number:_}},v){if(e[wi]=Gr(v),e.composing)return;const i=(_||e.type==="number")&&!/^0\d/.test(e.value)?Ti(e.value):e.value,n=t??"";i!==n&&(document.activeElement===e&&e.type!=="range"&&(r&&t===s||a&&e.value.trim()===n)||(e.value=n))}},wl=Be({patchProp:bl},nl);let Yr;function El(){return Yr||(Yr=Ac(wl))}const kl=(...e)=>{const t=El().createApp(...e),{mount:s}=t;return t.mount=r=>{const a=Rl(r);if(!a)return;const _=t._component;!de(_)&&!_.render&&!_.template&&(_.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const v=s(a,!1,xl(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),v},t};function xl(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Rl(e){return De(e)?document.querySelector(e):e}var Ll=!1;/*!
 * pinia v2.2.6
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let Oo;const oi=e=>Oo=e,Po=Symbol();function ji(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var us;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(us||(us={}));function Al(){const e=On(!0),t=e.run(()=>Pe({}));let s=[],r=[];const a=or({install(_){oi(a),a._a=_,_.provide(Po,a),_.config.globalProperties.$pinia=a,r.forEach(v=>s.push(v)),r=[]},use(_){return!this._a&&!Ll?r.push(_):s.push(_),this},_p:s,_a:null,_e:e,_s:new Map,state:t});return a}const Bo=()=>{};function Zr(e,t,s,r=Bo){e.push(t);const a=()=>{const _=e.indexOf(t);_>-1&&(e.splice(_,1),r())};return!s&&Pn()&&va(a),a}function Wt(e,...t){e.slice().forEach(s=>{s(...t)})}const Tl=e=>e(),Qr=Symbol(),Ei=Symbol();function Ui(e,t){e instanceof Map&&t instanceof Map?t.forEach((s,r)=>e.set(r,s)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const s in t){if(!t.hasOwnProperty(s))continue;const r=t[s],a=e[s];ji(a)&&ji(r)&&e.hasOwnProperty(s)&&!Te(r)&&!Ct(r)?e[s]=Ui(a,r):e[s]=r}return e}const Dl=Symbol();function Ol(e){return!ji(e)||!e.hasOwnProperty(Dl)}const{assign:vt}=Object;function Pl(e){return!!(Te(e)&&e.effect)}function Bl(e,t,s,r){const{state:a,actions:_,getters:v}=t,i=s.state.value[e];let n;function d(){i||(s.state.value[e]=a?a():{});const f=Na(s.state.value[e]);return vt(f,_,Object.keys(v||{}).reduce((h,g)=>(h[g]=or(we(()=>{oi(s);const m=s._s.get(e);return v[g].call(m,m)})),h),{}))}return n=Mo(e,d,t,s,r,!0),n}function Mo(e,t,s={},r,a,_){let v;const i=vt({actions:{}},s),n={deep:!0};let d,f,h=[],g=[],m;const w=r.state.value[e];!_&&!w&&(r.state.value[e]={}),Pe({});let S;function c(b){let k;d=f=!1,typeof b=="function"?(b(r.state.value[e]),k={type:us.patchFunction,storeId:e,events:m}):(Ui(r.state.value[e],b),k={type:us.patchObject,payload:b,storeId:e,events:m});const P=S=Symbol();ar().then(()=>{S===P&&(d=!0)}),f=!0,Wt(h,k,r.state.value[e])}const u=_?function(){const{state:k}=s,P=k?k():{};this.$patch(M=>{vt(M,P)})}:Bo;function o(){v.stop(),h=[],g=[],r._s.delete(e)}const l=(b,k="")=>{if(Qr in b)return b[Ei]=k,b;const P=function(){oi(r);const M=Array.from(arguments),I=[],D=[];function U(z){I.push(z)}function q(z){D.push(z)}Wt(g,{args:M,name:P[Ei],store:y,after:U,onError:q});let G;try{G=b.apply(this&&this.$id===e?this:y,M)}catch(z){throw Wt(D,z),z}return G instanceof Promise?G.then(z=>(Wt(I,z),z)).catch(z=>(Wt(D,z),Promise.reject(z))):(Wt(I,G),G)};return P[Qr]=!0,P[Ei]=k,P},p={_p:r,$id:e,$onAction:Zr.bind(null,g),$patch:c,$reset:u,$subscribe(b,k={}){const P=Zr(h,b,k.detached,()=>M()),M=v.run(()=>wt(()=>r.state.value[e],I=>{(k.flush==="sync"?f:d)&&b({storeId:e,type:us.direct,events:m},I)},vt({},n,k)));return P},$dispose:o},y=Cs(p);r._s.set(e,y);const E=(r._a&&r._a.runWithContext||Tl)(()=>r._e.run(()=>(v=On()).run(()=>t({action:l}))));for(const b in E){const k=E[b];if(Te(k)&&!Pl(k)||Ct(k))_||(w&&Ol(k)&&(Te(k)?k.value=w[b]:Ui(k,w[b])),r.state.value[e][b]=k);else if(typeof k=="function"){const P=l(k,b);E[b]=P,i.actions[b]=k}}return vt(y,E),vt(Se(y),E),Object.defineProperty(y,"$state",{get:()=>r.state.value[e],set:b=>{c(k=>{vt(k,b)})}}),r._p.forEach(b=>{vt(y,v.run(()=>b({store:y,app:r._a,pinia:r,options:i})))}),w&&_&&s.hydrate&&s.hydrate(y.$state,w),d=!0,f=!0,y}/*! #__NO_SIDE_EFFECTS__ */function xs(e,t,s){let r,a;const _=typeof t=="function";typeof e=="string"?(r=e,a=_?s:t):(a=e,r=e.id);function v(i,n){const d=Cc();return i=i||(d?Ze(Po,null):null),i&&oi(i),i=Oo,i._s.has(r)||(_?Mo(r,t,a,i):Bl(r,a,i)),i._s.get(r)}return v.$id=r,v}/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const qt=typeof document<"u";function Io(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ml(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Io(e.default)}const ye=Object.assign;function ki(e,t){const s={};for(const r in t){const a=t[r];s[r]=tt(a)?a.map(e):e(a)}return s}const ds=()=>{},tt=Array.isArray,Ho=/#/g,Il=/&/g,Hl=/\//g,Fl=/=/g,$l=/\?/g,Fo=/\+/g,Nl=/%5B/g,Wl=/%5D/g,$o=/%5E/g,jl=/%60/g,No=/%7B/g,Ul=/%7C/g,Wo=/%7D/g,ql=/%20/g;function fr(e){return encodeURI(""+e).replace(Ul,"|").replace(Nl,"[").replace(Wl,"]")}function Kl(e){return fr(e).replace(No,"{").replace(Wo,"}").replace($o,"^")}function qi(e){return fr(e).replace(Fo,"%2B").replace(ql,"+").replace(Ho,"%23").replace(Il,"%26").replace(jl,"`").replace(No,"{").replace(Wo,"}").replace($o,"^")}function zl(e){return qi(e).replace(Fl,"%3D")}function Vl(e){return fr(e).replace(Ho,"%23").replace($l,"%3F")}function Gl(e){return e==null?"":Vl(e).replace(Hl,"%2F")}function Ss(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Jl=/\/$/,Xl=e=>e.replace(Jl,"");function xi(e,t,s="/"){let r,a={},_="",v="";const i=t.indexOf("#");let n=t.indexOf("?");return i<n&&i>=0&&(n=-1),n>-1&&(r=t.slice(0,n),_=t.slice(n+1,i>-1?i:t.length),a=e(_)),i>-1&&(r=r||t.slice(0,i),v=t.slice(i,t.length)),r=eh(r??t,s),{fullPath:r+(_&&"?")+_+v,path:r,query:a,hash:Ss(v)}}function Yl(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function en(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Zl(e,t,s){const r=t.matched.length-1,a=s.matched.length-1;return r>-1&&r===a&&Xt(t.matched[r],s.matched[a])&&jo(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Xt(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function jo(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!Ql(e[s],t[s]))return!1;return!0}function Ql(e,t){return tt(e)?tn(e,t):tt(t)?tn(t,e):e===t}function tn(e,t){return tt(t)?e.length===t.length&&e.every((s,r)=>s===t[r]):e.length===1&&e[0]===t}function eh(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),r=e.split("/"),a=r[r.length-1];(a===".."||a===".")&&r.push("");let _=s.length-1,v,i;for(v=0;v<r.length;v++)if(i=r[v],i!==".")if(i==="..")_>1&&_--;else break;return s.slice(0,_).join("/")+"/"+r.slice(v).join("/")}const pt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var bs;(function(e){e.pop="pop",e.push="push"})(bs||(bs={}));var fs;(function(e){e.back="back",e.forward="forward",e.unknown=""})(fs||(fs={}));function th(e){if(!e)if(qt){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Xl(e)}const sh=/^[^#]+#/;function ih(e,t){return e.replace(sh,"#")+t}function rh(e,t){const s=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-s.left-(t.left||0),top:r.top-s.top-(t.top||0)}}const ai=()=>({left:window.scrollX,top:window.scrollY});function nh(e){let t;if("el"in e){const s=e.el,r=typeof s=="string"&&s.startsWith("#"),a=typeof s=="string"?r?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!a)return;t=rh(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function sn(e,t){return(history.state?history.state.position-t:-1)+e}const Ki=new Map;function oh(e,t){Ki.set(e,t)}function ah(e){const t=Ki.get(e);return Ki.delete(e),t}let ch=()=>location.protocol+"//"+location.host;function Uo(e,t){const{pathname:s,search:r,hash:a}=t,_=e.indexOf("#");if(_>-1){let i=a.includes(e.slice(_))?e.slice(_).length:1,n=a.slice(i);return n[0]!=="/"&&(n="/"+n),en(n,"")}return en(s,e)+r+a}function lh(e,t,s,r){let a=[],_=[],v=null;const i=({state:g})=>{const m=Uo(e,location),w=s.value,S=t.value;let c=0;if(g){if(s.value=m,t.value=g,v&&v===w){v=null;return}c=S?g.position-S.position:0}else r(m);a.forEach(u=>{u(s.value,w,{delta:c,type:bs.pop,direction:c?c>0?fs.forward:fs.back:fs.unknown})})};function n(){v=s.value}function d(g){a.push(g);const m=()=>{const w=a.indexOf(g);w>-1&&a.splice(w,1)};return _.push(m),m}function f(){const{history:g}=window;g.state&&g.replaceState(ye({},g.state,{scroll:ai()}),"")}function h(){for(const g of _)g();_=[],window.removeEventListener("popstate",i),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",i),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:n,listen:d,destroy:h}}function rn(e,t,s,r=!1,a=!1){return{back:e,current:t,forward:s,replaced:r,position:window.history.length,scroll:a?ai():null}}function hh(e){const{history:t,location:s}=window,r={value:Uo(e,s)},a={value:t.state};a.value||_(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function _(n,d,f){const h=e.indexOf("#"),g=h>-1?(s.host&&document.querySelector("base")?e:e.slice(h))+n:ch()+e+n;try{t[f?"replaceState":"pushState"](d,"",g),a.value=d}catch(m){console.error(m),s[f?"replace":"assign"](g)}}function v(n,d){const f=ye({},t.state,rn(a.value.back,n,a.value.forward,!0),d,{position:a.value.position});_(n,f,!0),r.value=n}function i(n,d){const f=ye({},a.value,t.state,{forward:n,scroll:ai()});_(f.current,f,!0);const h=ye({},rn(r.value,n,null),{position:f.position+1},d);_(n,h,!1),r.value=n}return{location:r,state:a,push:i,replace:v}}function uh(e){e=th(e);const t=hh(e),s=lh(e,t.state,t.location,t.replace);function r(_,v=!0){v||s.pauseListeners(),history.go(_)}const a=ye({location:"",base:e,go:r,createHref:ih.bind(null,e)},t,s);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function dh(e){return typeof e=="string"||e&&typeof e=="object"}function qo(e){return typeof e=="string"||typeof e=="symbol"}const Ko=Symbol("");var nn;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(nn||(nn={}));function Yt(e,t){return ye(new Error,{type:e,[Ko]:!0},t)}function lt(e,t){return e instanceof Error&&Ko in e&&(t==null||!!(e.type&t))}const on="[^/]+?",fh={sensitive:!1,strict:!1,start:!0,end:!0},_h=/[.+*?^${}()[\]/\\]/g;function ph(e,t){const s=ye({},fh,t),r=[];let a=s.start?"^":"";const _=[];for(const d of e){const f=d.length?[]:[90];s.strict&&!d.length&&(a+="/");for(let h=0;h<d.length;h++){const g=d[h];let m=40+(s.sensitive?.25:0);if(g.type===0)h||(a+="/"),a+=g.value.replace(_h,"\\$&"),m+=40;else if(g.type===1){const{value:w,repeatable:S,optional:c,regexp:u}=g;_.push({name:w,repeatable:S,optional:c});const o=u||on;if(o!==on){m+=10;try{new RegExp(`(${o})`)}catch(p){throw new Error(`Invalid custom RegExp for param "${w}" (${o}): `+p.message)}}let l=S?`((?:${o})(?:/(?:${o}))*)`:`(${o})`;h||(l=c&&d.length<2?`(?:/${l})`:"/"+l),c&&(l+="?"),a+=l,m+=20,c&&(m+=-8),S&&(m+=-20),o===".*"&&(m+=-50)}f.push(m)}r.push(f)}if(s.strict&&s.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}s.strict||(a+="/?"),s.end?a+="$":s.strict&&(a+="(?:/|$)");const v=new RegExp(a,s.sensitive?"":"i");function i(d){const f=d.match(v),h={};if(!f)return null;for(let g=1;g<f.length;g++){const m=f[g]||"",w=_[g-1];h[w.name]=m&&w.repeatable?m.split("/"):m}return h}function n(d){let f="",h=!1;for(const g of e){(!h||!f.endsWith("/"))&&(f+="/"),h=!1;for(const m of g)if(m.type===0)f+=m.value;else if(m.type===1){const{value:w,repeatable:S,optional:c}=m,u=w in d?d[w]:"";if(tt(u)&&!S)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const o=tt(u)?u.join("/"):u;if(!o)if(c)g.length<2&&(f.endsWith("/")?f=f.slice(0,-1):h=!0);else throw new Error(`Missing required param "${w}"`);f+=o}}return f||"/"}return{re:v,score:r,keys:_,parse:i,stringify:n}}function gh(e,t){let s=0;for(;s<e.length&&s<t.length;){const r=t[s]-e[s];if(r)return r;s++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function zo(e,t){let s=0;const r=e.score,a=t.score;for(;s<r.length&&s<a.length;){const _=gh(r[s],a[s]);if(_)return _;s++}if(Math.abs(a.length-r.length)===1){if(an(r))return 1;if(an(a))return-1}return a.length-r.length}function an(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const vh={type:0,value:""},mh=/[a-zA-Z0-9_]/;function Sh(e){if(!e)return[[]];if(e==="/")return[[vh]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${s})/"${d}": ${m}`)}let s=0,r=s;const a=[];let _;function v(){_&&a.push(_),_=[]}let i=0,n,d="",f="";function h(){d&&(s===0?_.push({type:0,value:d}):s===1||s===2||s===3?(_.length>1&&(n==="*"||n==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),_.push({type:1,value:d,regexp:f,repeatable:n==="*"||n==="+",optional:n==="*"||n==="?"})):t("Invalid state to consume buffer"),d="")}function g(){d+=n}for(;i<e.length;){if(n=e[i++],n==="\\"&&s!==2){r=s,s=4;continue}switch(s){case 0:n==="/"?(d&&h(),v()):n===":"?(h(),s=1):g();break;case 4:g(),s=r;break;case 1:n==="("?s=2:mh.test(n)?g():(h(),s=0,n!=="*"&&n!=="?"&&n!=="+"&&i--);break;case 2:n===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+n:s=3:f+=n;break;case 3:h(),s=0,n!=="*"&&n!=="?"&&n!=="+"&&i--,f="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${d}"`),h(),v(),a}function bh(e,t,s){const r=ph(Sh(e.path),s),a=ye(r,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function yh(e,t){const s=[],r=new Map;t=un({strict:!1,end:!0,sensitive:!1},t);function a(h){return r.get(h)}function _(h,g,m){const w=!m,S=ln(h);S.aliasOf=m&&m.record;const c=un(t,h),u=[S];if("alias"in h){const p=typeof h.alias=="string"?[h.alias]:h.alias;for(const y of p)u.push(ln(ye({},S,{components:m?m.record.components:S.components,path:y,aliasOf:m?m.record:S})))}let o,l;for(const p of u){const{path:y}=p;if(g&&y[0]!=="/"){const C=g.record.path,E=C[C.length-1]==="/"?"":"/";p.path=g.record.path+(y&&E+y)}if(o=bh(p,g,c),m?m.alias.push(o):(l=l||o,l!==o&&l.alias.push(o),w&&h.name&&!hn(o)&&v(h.name)),Vo(o)&&n(o),S.children){const C=S.children;for(let E=0;E<C.length;E++)_(C[E],o,m&&m.children[E])}m=m||o}return l?()=>{v(l)}:ds}function v(h){if(qo(h)){const g=r.get(h);g&&(r.delete(h),s.splice(s.indexOf(g),1),g.children.forEach(v),g.alias.forEach(v))}else{const g=s.indexOf(h);g>-1&&(s.splice(g,1),h.record.name&&r.delete(h.record.name),h.children.forEach(v),h.alias.forEach(v))}}function i(){return s}function n(h){const g=Eh(h,s);s.splice(g,0,h),h.record.name&&!hn(h)&&r.set(h.record.name,h)}function d(h,g){let m,w={},S,c;if("name"in h&&h.name){if(m=r.get(h.name),!m)throw Yt(1,{location:h});c=m.record.name,w=ye(cn(g.params,m.keys.filter(l=>!l.optional).concat(m.parent?m.parent.keys.filter(l=>l.optional):[]).map(l=>l.name)),h.params&&cn(h.params,m.keys.map(l=>l.name))),S=m.stringify(w)}else if(h.path!=null)S=h.path,m=s.find(l=>l.re.test(S)),m&&(w=m.parse(S),c=m.record.name);else{if(m=g.name?r.get(g.name):s.find(l=>l.re.test(g.path)),!m)throw Yt(1,{location:h,currentLocation:g});c=m.record.name,w=ye({},g.params,h.params),S=m.stringify(w)}const u=[];let o=m;for(;o;)u.unshift(o.record),o=o.parent;return{name:c,path:S,params:w,matched:u,meta:wh(u)}}e.forEach(h=>_(h));function f(){s.length=0,r.clear()}return{addRoute:_,resolve:d,removeRoute:v,clearRoutes:f,getRoutes:i,getRecordMatcher:a}}function cn(e,t){const s={};for(const r of t)r in e&&(s[r]=e[r]);return s}function ln(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Ch(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Ch(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const r in e.components)t[r]=typeof s=="object"?s[r]:s;return t}function hn(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function wh(e){return e.reduce((t,s)=>ye(t,s.meta),{})}function un(e,t){const s={};for(const r in e)s[r]=r in t?t[r]:e[r];return s}function Eh(e,t){let s=0,r=t.length;for(;s!==r;){const _=s+r>>1;zo(e,t[_])<0?r=_:s=_+1}const a=kh(e);return a&&(r=t.lastIndexOf(a,r-1)),r}function kh(e){let t=e;for(;t=t.parent;)if(Vo(t)&&zo(e,t)===0)return t}function Vo({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function xh(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<r.length;++a){const _=r[a].replace(Fo," "),v=_.indexOf("="),i=Ss(v<0?_:_.slice(0,v)),n=v<0?null:Ss(_.slice(v+1));if(i in t){let d=t[i];tt(d)||(d=t[i]=[d]),d.push(n)}else t[i]=n}return t}function dn(e){let t="";for(let s in e){const r=e[s];if(s=zl(s),r==null){r!==void 0&&(t+=(t.length?"&":"")+s);continue}(tt(r)?r.map(_=>_&&qi(_)):[r&&qi(r)]).forEach(_=>{_!==void 0&&(t+=(t.length?"&":"")+s,_!=null&&(t+="="+_))})}return t}function Rh(e){const t={};for(const s in e){const r=e[s];r!==void 0&&(t[s]=tt(r)?r.map(a=>a==null?null:""+a):r==null?r:""+r)}return t}const Lh=Symbol(""),fn=Symbol(""),ci=Symbol(""),_r=Symbol(""),zi=Symbol("");function is(){let e=[];function t(r){return e.push(r),()=>{const a=e.indexOf(r);a>-1&&e.splice(a,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function bt(e,t,s,r,a,_=v=>v()){const v=r&&(r.enterCallbacks[a]=r.enterCallbacks[a]||[]);return()=>new Promise((i,n)=>{const d=g=>{g===!1?n(Yt(4,{from:s,to:t})):g instanceof Error?n(g):dh(g)?n(Yt(2,{from:t,to:g})):(v&&r.enterCallbacks[a]===v&&typeof g=="function"&&v.push(g),i())},f=_(()=>e.call(r&&r.instances[a],t,s,d));let h=Promise.resolve(f);e.length<3&&(h=h.then(d)),h.catch(g=>n(g))})}function Ri(e,t,s,r,a=_=>_()){const _=[];for(const v of e)for(const i in v.components){let n=v.components[i];if(!(t!=="beforeRouteEnter"&&!v.instances[i]))if(Io(n)){const f=(n.__vccOpts||n)[t];f&&_.push(bt(f,s,r,v,i,a))}else{let d=n();_.push(()=>d.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${i}" at "${v.path}"`);const h=Ml(f)?f.default:f;v.mods[i]=f,v.components[i]=h;const m=(h.__vccOpts||h)[t];return m&&bt(m,s,r,v,i,a)()}))}}return _}function _n(e){const t=Ze(ci),s=Ze(_r),r=we(()=>{const n=Ye(e.to);return t.resolve(n)}),a=we(()=>{const{matched:n}=r.value,{length:d}=n,f=n[d-1],h=s.matched;if(!f||!h.length)return-1;const g=h.findIndex(Xt.bind(null,f));if(g>-1)return g;const m=pn(n[d-2]);return d>1&&pn(f)===m&&h[h.length-1].path!==m?h.findIndex(Xt.bind(null,n[d-2])):g}),_=we(()=>a.value>-1&&Oh(s.params,r.value.params)),v=we(()=>a.value>-1&&a.value===s.matched.length-1&&jo(s.params,r.value.params));function i(n={}){return Dh(n)?t[Ye(e.replace)?"replace":"push"](Ye(e.to)).catch(ds):Promise.resolve()}return{route:r,href:we(()=>r.value.href),isActive:_,isExactActive:v,navigate:i}}const Ah=xe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:_n,setup(e,{slots:t}){const s=Cs(_n(e)),{options:r}=Ze(ci),a=we(()=>({[gn(e.activeClass,r.linkActiveClass,"router-link-active")]:s.isActive,[gn(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const _=t.default&&t.default(s);return e.custom?_:Ao("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:a.value},_)}}}),Th=Ah;function Dh(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Oh(e,t){for(const s in t){const r=t[s],a=e[s];if(typeof r=="string"){if(r!==a)return!1}else if(!tt(a)||a.length!==r.length||r.some((_,v)=>_!==a[v]))return!1}return!0}function pn(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const gn=(e,t,s)=>e??t??s,Ph=xe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const r=Ze(zi),a=we(()=>e.route||r.value),_=Ze(fn,0),v=we(()=>{let d=Ye(_);const{matched:f}=a.value;let h;for(;(h=f[d])&&!h.components;)d++;return d}),i=we(()=>a.value.matched[v.value]);Ms(fn,we(()=>v.value+1)),Ms(Lh,i),Ms(zi,a);const n=Pe();return wt(()=>[n.value,i.value,e.name],([d,f,h],[g,m,w])=>{f&&(f.instances[h]=d,m&&m!==f&&d&&d===g&&(f.leaveGuards.size||(f.leaveGuards=m.leaveGuards),f.updateGuards.size||(f.updateGuards=m.updateGuards))),d&&f&&(!m||!Xt(f,m)||!g)&&(f.enterCallbacks[h]||[]).forEach(S=>S(d))},{flush:"post"}),()=>{const d=a.value,f=e.name,h=i.value,g=h&&h.components[f];if(!g)return vn(s.default,{Component:g,route:d});const m=h.props[f],w=m?m===!0?d.params:typeof m=="function"?m(d):m:null,c=Ao(g,ye({},w,t,{onVnodeUnmounted:u=>{u.component.isUnmounted&&(h.instances[f]=null)},ref:n}));return vn(s.default,{Component:c,route:d})||c}}});function vn(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Bh=Ph;function Mh(e){const t=yh(e.routes,e),s=e.parseQuery||xh,r=e.stringifyQuery||dn,a=e.history,_=is(),v=is(),i=is(),n=Ha(pt);let d=pt;qt&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=ki.bind(null,A=>""+A),h=ki.bind(null,Gl),g=ki.bind(null,Ss);function m(A,x){let $,F;return qo(A)?($=t.getRecordMatcher(A),F=x):F=A,t.addRoute(F,$)}function w(A){const x=t.getRecordMatcher(A);x&&t.removeRoute(x)}function S(){return t.getRoutes().map(A=>A.record)}function c(A){return!!t.getRecordMatcher(A)}function u(A,x){if(x=ye({},x||n.value),typeof A=="string"){const T=xi(s,A,x.path),N=t.resolve({path:T.path},x),K=a.createHref(T.fullPath);return ye(T,N,{params:g(N.params),hash:Ss(T.hash),redirectedFrom:void 0,href:K})}let $;if(A.path!=null)$=ye({},A,{path:xi(s,A.path,x.path).path});else{const T=ye({},A.params);for(const N in T)T[N]==null&&delete T[N];$=ye({},A,{params:h(T)}),x.params=h(x.params)}const F=t.resolve($,x),Y=A.hash||"";F.params=f(g(F.params));const Z=Yl(r,ye({},A,{hash:Kl(Y),path:F.path})),L=a.createHref(Z);return ye({fullPath:Z,hash:Y,query:r===dn?Rh(A.query):A.query||{}},F,{redirectedFrom:void 0,href:L})}function o(A){return typeof A=="string"?xi(s,A,n.value.path):ye({},A)}function l(A,x){if(d!==A)return Yt(8,{from:x,to:A})}function p(A){return E(A)}function y(A){return p(ye(o(A),{replace:!0}))}function C(A){const x=A.matched[A.matched.length-1];if(x&&x.redirect){const{redirect:$}=x;let F=typeof $=="function"?$(A):$;return typeof F=="string"&&(F=F.includes("?")||F.includes("#")?F=o(F):{path:F},F.params={}),ye({query:A.query,hash:A.hash,params:F.path!=null?{}:A.params},F)}}function E(A,x){const $=d=u(A),F=n.value,Y=A.state,Z=A.force,L=A.replace===!0,T=C($);if(T)return E(ye(o(T),{state:typeof T=="object"?ye({},Y,T.state):Y,force:Z,replace:L}),x||$);const N=$;N.redirectedFrom=x;let K;return!Z&&Zl(r,F,$)&&(K=Yt(16,{to:N,from:F}),B(F,F,!0,!1)),(K?Promise.resolve(K):P(N,F)).catch(j=>lt(j)?lt(j,2)?j:O(j):V(j,N,F)).then(j=>{if(j){if(lt(j,2))return E(ye({replace:L},o(j.to),{state:typeof j.to=="object"?ye({},Y,j.to.state):Y,force:Z}),x||N)}else j=I(N,F,!0,L,Y);return M(N,F,j),j})}function b(A,x){const $=l(A,x);return $?Promise.reject($):Promise.resolve()}function k(A){const x=te.values().next().value;return x&&typeof x.runWithContext=="function"?x.runWithContext(A):A()}function P(A,x){let $;const[F,Y,Z]=Ih(A,x);$=Ri(F.reverse(),"beforeRouteLeave",A,x);for(const T of F)T.leaveGuards.forEach(N=>{$.push(bt(N,A,x))});const L=b.bind(null,A,x);return $.push(L),ae($).then(()=>{$=[];for(const T of _.list())$.push(bt(T,A,x));return $.push(L),ae($)}).then(()=>{$=Ri(Y,"beforeRouteUpdate",A,x);for(const T of Y)T.updateGuards.forEach(N=>{$.push(bt(N,A,x))});return $.push(L),ae($)}).then(()=>{$=[];for(const T of Z)if(T.beforeEnter)if(tt(T.beforeEnter))for(const N of T.beforeEnter)$.push(bt(N,A,x));else $.push(bt(T.beforeEnter,A,x));return $.push(L),ae($)}).then(()=>(A.matched.forEach(T=>T.enterCallbacks={}),$=Ri(Z,"beforeRouteEnter",A,x,k),$.push(L),ae($))).then(()=>{$=[];for(const T of v.list())$.push(bt(T,A,x));return $.push(L),ae($)}).catch(T=>lt(T,8)?T:Promise.reject(T))}function M(A,x,$){i.list().forEach(F=>k(()=>F(A,x,$)))}function I(A,x,$,F,Y){const Z=l(A,x);if(Z)return Z;const L=x===pt,T=qt?history.state:{};$&&(F||L?a.replace(A.fullPath,ye({scroll:L&&T&&T.scroll},Y)):a.push(A.fullPath,Y)),n.value=A,B(A,x,$,L),O()}let D;function U(){D||(D=a.listen((A,x,$)=>{if(!ce.listening)return;const F=u(A),Y=C(F);if(Y){E(ye(Y,{replace:!0}),F).catch(ds);return}d=F;const Z=n.value;qt&&oh(sn(Z.fullPath,$.delta),ai()),P(F,Z).catch(L=>lt(L,12)?L:lt(L,2)?(E(L.to,F).then(T=>{lt(T,20)&&!$.delta&&$.type===bs.pop&&a.go(-1,!1)}).catch(ds),Promise.reject()):($.delta&&a.go(-$.delta,!1),V(L,F,Z))).then(L=>{L=L||I(F,Z,!1),L&&($.delta&&!lt(L,8)?a.go(-$.delta,!1):$.type===bs.pop&&lt(L,20)&&a.go(-1,!1)),M(F,Z,L)}).catch(ds)}))}let q=is(),G=is(),z;function V(A,x,$){O(A);const F=G.list();return F.length?F.forEach(Y=>Y(A,x,$)):console.error(A),Promise.reject(A)}function R(){return z&&n.value!==pt?Promise.resolve():new Promise((A,x)=>{q.add([A,x])})}function O(A){return z||(z=!A,U(),q.list().forEach(([x,$])=>A?$(A):x()),q.reset()),A}function B(A,x,$,F){const{scrollBehavior:Y}=e;if(!qt||!Y)return Promise.resolve();const Z=!$&&ah(sn(A.fullPath,0))||(F||!$)&&history.state&&history.state.scroll||null;return ar().then(()=>Y(A,x,Z)).then(L=>L&&nh(L)).catch(L=>V(L,A,x))}const H=A=>a.go(A);let J;const te=new Set,ce={currentRoute:n,listening:!0,addRoute:m,removeRoute:w,clearRoutes:t.clearRoutes,hasRoute:c,getRoutes:S,resolve:u,options:e,push:p,replace:y,go:H,back:()=>H(-1),forward:()=>H(1),beforeEach:_.add,beforeResolve:v.add,afterEach:i.add,onError:G.add,isReady:R,install(A){const x=this;A.component("RouterLink",Th),A.component("RouterView",Bh),A.config.globalProperties.$router=x,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>Ye(n)}),qt&&!J&&n.value===pt&&(J=!0,p(a.location).catch(Y=>{}));const $={};for(const Y in pt)Object.defineProperty($,Y,{get:()=>n.value[Y],enumerable:!0});A.provide(ci,x),A.provide(_r,Gn($)),A.provide(zi,n);const F=A.unmount;te.add(A),A.unmount=function(){te.delete(A),te.size<1&&(d=pt,D&&D(),D=null,n.value=pt,J=!1,z=!1),F()}}};function ae(A){return A.reduce((x,$)=>x.then(()=>k($)),Promise.resolve())}return ce}function Ih(e,t){const s=[],r=[],a=[],_=Math.max(t.matched.length,e.matched.length);for(let v=0;v<_;v++){const i=t.matched[v];i&&(e.matched.find(d=>Xt(d,i))?r.push(i):s.push(i));const n=e.matched[v];n&&(t.matched.find(d=>Xt(d,n))||a.push(n))}return[s,r,a]}function Zt(){return Ze(ci)}function li(e){return Ze(_r)}class Ge extends Error{constructor(t){var s,r,a,_;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,Ge.prototype),t!==null&&typeof t=="object"&&(this.url=typeof t.url=="string"?t.url:"",this.status=typeof t.status=="number"?t.status:0,this.isAbort=!!t.isAbort,this.originalError=t.originalError,t.response!==null&&typeof t.response=="object"?this.response=t.response:t.data!==null&&typeof t.data=="object"?this.response=t.data:this.response={}),this.originalError||t instanceof Ge||(this.originalError=t),typeof DOMException<"u"&&t instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(s=this.response)==null?void 0:s.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(_=(a=(r=this.originalError)==null?void 0:r.cause)==null?void 0:a.message)!=null&&_.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const Ps=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Hh(e,t){const s={};if(typeof e!="string")return s;const r=Object.assign({},{}).decode||Fh;let a=0;for(;a<e.length;){const _=e.indexOf("=",a);if(_===-1)break;let v=e.indexOf(";",a);if(v===-1)v=e.length;else if(v<_){a=e.lastIndexOf(";",_-1)+1;continue}const i=e.slice(a,_).trim();if(s[i]===void 0){let n=e.slice(_+1,v).trim();n.charCodeAt(0)===34&&(n=n.slice(1,-1));try{s[i]=r(n)}catch{s[i]=n}}a=v+1}return s}function mn(e,t,s){const r=Object.assign({},s||{}),a=r.encode||$h;if(!Ps.test(e))throw new TypeError("argument name is invalid");const _=a(t);if(_&&!Ps.test(_))throw new TypeError("argument val is invalid");let v=e+"="+_;if(r.maxAge!=null){const i=r.maxAge-0;if(isNaN(i)||!isFinite(i))throw new TypeError("option maxAge is invalid");v+="; Max-Age="+Math.floor(i)}if(r.domain){if(!Ps.test(r.domain))throw new TypeError("option domain is invalid");v+="; Domain="+r.domain}if(r.path){if(!Ps.test(r.path))throw new TypeError("option path is invalid");v+="; Path="+r.path}if(r.expires){if(!function(n){return Object.prototype.toString.call(n)==="[object Date]"||n instanceof Date}(r.expires)||isNaN(r.expires.valueOf()))throw new TypeError("option expires is invalid");v+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(v+="; HttpOnly"),r.secure&&(v+="; Secure"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():r.priority){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"strict":v+="; SameSite=Strict";break;case"none":v+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return v}function Fh(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function $h(e){return encodeURIComponent(e)}const Nh=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let Go;function Gt(e){if(e)try{const t=decodeURIComponent(Go(e.split(".")[1]).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)||{}}catch{}return{}}function Jo(e,t=0){let s=Gt(e);return!(Object.keys(s).length>0&&(!s.exp||s.exp-t>Date.now()/1e3))}Go=typeof atob!="function"||Nh?e=>{let t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var s,r,a=0,_=0,v="";r=t.charAt(_++);~r&&(s=a%4?64*s+r:r,a++%4)?v+=String.fromCharCode(255&s>>(-2*a&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return v}:atob;const Sn="pb_auth";class Wh{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!Jo(this.token)}get isAdmin(){return Gt(this.token).type==="admin"}get isAuthRecord(){return Gt(this.token).type==="authRecord"}save(t,s){this.baseToken=t||"",this.baseModel=s||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(t,s=Sn){const r=Hh(t||"")[s]||"";let a={};try{a=JSON.parse(r),(typeof a===null||typeof a!="object"||Array.isArray(a))&&(a={})}catch{}this.save(a.token||"",a.model||null)}exportToCookie(t,s=Sn){var n,d;const r={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},a=Gt(this.token);r.expires=a!=null&&a.exp?new Date(1e3*a.exp):new Date("1970-01-01"),t=Object.assign({},r,t);const _={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let v=mn(s,JSON.stringify(_),t);const i=typeof Blob<"u"?new Blob([v]).size:v.length;if(_.model&&i>4096){_.model={id:(n=_==null?void 0:_.model)==null?void 0:n.id,email:(d=_==null?void 0:_.model)==null?void 0:d.email};const f=["collectionId","username","verified"];for(const h in this.model)f.includes(h)&&(_.model[h]=this.model[h]);v=mn(s,JSON.stringify(_),t)}return v}onChange(t,s=!1){return this._onChangeCallbacks.push(t),s&&t(this.token,this.model),()=>{for(let r=this._onChangeCallbacks.length-1;r>=0;r--)if(this._onChangeCallbacks[r]==t)return delete this._onChangeCallbacks[r],void this._onChangeCallbacks.splice(r,1)}}triggerChange(){for(const t of this._onChangeCallbacks)t&&t(this.token,this.model)}}class jh extends Wh{constructor(t="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=t,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(t,s){this._storageSet(this.storageKey,{token:t,model:s}),super.save(t,s)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(t){if(typeof window<"u"&&(window!=null&&window.localStorage)){const s=window.localStorage.getItem(t)||"";try{return JSON.parse(s)}catch{return s}}return this.storageFallback[t]}_storageSet(t,s){if(typeof window<"u"&&(window!=null&&window.localStorage)){let r=s;typeof s!="string"&&(r=JSON.stringify(s)),window.localStorage.setItem(t,r)}else this.storageFallback[t]=s}_storageRemove(t){var s;typeof window<"u"&&(window!=null&&window.localStorage)&&((s=window.localStorage)==null||s.removeItem(t)),delete this.storageFallback[t]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",t=>{if(t.key!=this.storageKey)return;const s=this._storageGet(this.storageKey)||{};super.save(s.token||"",s.model||null)})}}class $t{constructor(t){this.client=t}}class Uh extends $t{async getAll(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/settings",t)}async update(t,s){return s=Object.assign({method:"PATCH",body:t},s),this.client.send("/api/settings",s)}async testS3(t="storage",s){return s=Object.assign({method:"POST",body:{filesystem:t}},s),this.client.send("/api/settings/test/s3",s).then(()=>!0)}async testEmail(t,s,r){return r=Object.assign({method:"POST",body:{email:t,template:s}},r),this.client.send("/api/settings/test/email",r).then(()=>!0)}async generateAppleClientSecret(t,s,r,a,_,v){return v=Object.assign({method:"POST",body:{clientId:t,teamId:s,keyId:r,privateKey:a,duration:_}},v),this.client.send("/api/settings/apple/generate-client-secret",v)}}class pr extends $t{decode(t){return t}async getFullList(t,s){if(typeof t=="number")return this._getFullList(t,s);let r=500;return(s=Object.assign({},t,s)).batch&&(r=s.batch,delete s.batch),this._getFullList(r,s)}async getList(t=1,s=30,r){return(r=Object.assign({method:"GET"},r)).query=Object.assign({page:t,perPage:s},r.query),this.client.send(this.baseCrudPath,r).then(a=>{var _;return a.items=((_=a.items)==null?void 0:_.map(v=>this.decode(v)))||[],a})}async getFirstListItem(t,s){return(s=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+t},s)).query=Object.assign({filter:t,skipTotal:1},s.query),this.getList(1,1,s).then(r=>{var a;if(!((a=r==null?void 0:r.items)!=null&&a.length))throw new Ge({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return r.items[0]})}async getOne(t,s){if(!t)throw new Ge({url:this.client.buildUrl(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return s=Object.assign({method:"GET"},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),s).then(r=>this.decode(r))}async create(t,s){return s=Object.assign({method:"POST",body:t},s),this.client.send(this.baseCrudPath,s).then(r=>this.decode(r))}async update(t,s,r){return r=Object.assign({method:"PATCH",body:s},r),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),r).then(a=>this.decode(a))}async delete(t,s){return s=Object.assign({method:"DELETE"},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),s).then(()=>!0)}_getFullList(t=500,s){(s=s||{}).query=Object.assign({skipTotal:1},s.query);let r=[],a=async _=>this.getList(_,t||500,s).then(v=>{const i=v.items;return r=r.concat(i),i.length==v.perPage?a(_+1):r});return a(1)}}function ze(e,t,s,r){const a=r!==void 0;return a||s!==void 0?a?(console.warn(e),t.body=Object.assign({},t.body,s),t.query=Object.assign({},t.query,r),t):Object.assign(t,s):t}function Li(e){var t;(t=e._resetAutoRefresh)==null||t.call(e)}class qh extends pr{get baseCrudPath(){return"/api/admins"}async update(t,s,r){return super.update(t,s,r).then(a=>{var _,v;return((_=this.client.authStore.model)==null?void 0:_.id)===a.id&&((v=this.client.authStore.model)==null?void 0:v.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,a),a})}async delete(t,s){return super.delete(t,s).then(r=>{var a,_;return r&&((a=this.client.authStore.model)==null?void 0:a.id)===t&&((_=this.client.authStore.model)==null?void 0:_.collectionId)===void 0&&this.client.authStore.clear(),r})}authResponse(t){const s=this.decode((t==null?void 0:t.admin)||{});return t!=null&&t.token&&(t!=null&&t.admin)&&this.client.authStore.save(t.token,s),Object.assign({},t,{token:(t==null?void 0:t.token)||"",admin:s})}async authWithPassword(t,s,r,a){let _={method:"POST",body:{identity:t,password:s}};_=ze("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",_,r,a);const v=_.autoRefreshThreshold;delete _.autoRefreshThreshold,_.autoRefresh||Li(this.client);let i=await this.client.send(this.baseCrudPath+"/auth-with-password",_);return i=this.authResponse(i),v&&function(d,f,h,g){Li(d);const m=d.beforeSend,w=d.authStore.model,S=d.authStore.onChange((c,u)=>{(!c||(u==null?void 0:u.id)!=(w==null?void 0:w.id)||(u!=null&&u.collectionId||w!=null&&w.collectionId)&&(u==null?void 0:u.collectionId)!=(w==null?void 0:w.collectionId))&&Li(d)});d._resetAutoRefresh=function(){S(),d.beforeSend=m,delete d._resetAutoRefresh},d.beforeSend=async(c,u)=>{var y;const o=d.authStore.token;if((y=u.query)!=null&&y.autoRefresh)return m?m(c,u):{url:c,sendOptions:u};let l=d.authStore.isValid;if(l&&Jo(d.authStore.token,f))try{await h()}catch{l=!1}l||await g();const p=u.headers||{};for(let C in p)if(C.toLowerCase()=="authorization"&&o==p[C]&&d.authStore.token){p[C]=d.authStore.token;break}return u.headers=p,m?m(c,u):{url:c,sendOptions:u}}}(this.client,v,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(t,s,Object.assign({autoRefresh:!0},_))),i}async authRefresh(t,s){let r={method:"POST"};return r=ze("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",r,t,s),this.client.send(this.baseCrudPath+"/auth-refresh",r).then(this.authResponse.bind(this))}async requestPasswordReset(t,s,r){let a={method:"POST",body:{email:t}};return a=ze("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",a,s,r),this.client.send(this.baseCrudPath+"/request-password-reset",a).then(()=>!0)}async confirmPasswordReset(t,s,r,a,_){let v={method:"POST",body:{token:t,password:s,passwordConfirm:r}};return v=ze("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",v,a,_),this.client.send(this.baseCrudPath+"/confirm-password-reset",v).then(()=>!0)}}const Kh=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function Xo(e){if(e){e.query=e.query||{};for(let t in e)Kh.includes(t)||(e.query[t]=e[t],delete e[t])}}class Yo extends $t{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(t,s,r){var v;if(!t)throw new Error("topic must be set.");let a=t;if(r){Xo(r=Object.assign({},r));const i="options="+encodeURIComponent(JSON.stringify({query:r.query,headers:r.headers}));a+=(a.includes("?")?"&":"?")+i}const _=function(i){const n=i;let d;try{d=JSON.parse(n==null?void 0:n.data)}catch{}s(d||{})};return this.subscriptions[a]||(this.subscriptions[a]=[]),this.subscriptions[a].push(_),this.isConnected?this.subscriptions[a].length===1?await this.submitSubscriptions():(v=this.eventSource)==null||v.addEventListener(a,_):await this.connect(),async()=>this.unsubscribeByTopicAndListener(t,_)}async unsubscribe(t){var r;let s=!1;if(t){const a=this.getSubscriptionsByTopic(t);for(let _ in a)if(this.hasSubscriptionListeners(_)){for(let v of this.subscriptions[_])(r=this.eventSource)==null||r.removeEventListener(_,v);delete this.subscriptions[_],s||(s=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?s&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(t){var r;let s=!1;for(let a in this.subscriptions)if((a+"?").startsWith(t)){s=!0;for(let _ of this.subscriptions[a])(r=this.eventSource)==null||r.removeEventListener(a,_);delete this.subscriptions[a]}s&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(t,s){var _;let r=!1;const a=this.getSubscriptionsByTopic(t);for(let v in a){if(!Array.isArray(this.subscriptions[v])||!this.subscriptions[v].length)continue;let i=!1;for(let n=this.subscriptions[v].length-1;n>=0;n--)this.subscriptions[v][n]===s&&(i=!0,delete this.subscriptions[v][n],this.subscriptions[v].splice(n,1),(_=this.eventSource)==null||_.removeEventListener(v,s));i&&(this.subscriptions[v].length||delete this.subscriptions[v],r||this.hasSubscriptionListeners(v)||(r=!0))}this.hasSubscriptionListeners()?r&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(t){var s,r;if(this.subscriptions=this.subscriptions||{},t)return!!((s=this.subscriptions[t])!=null&&s.length);for(let a in this.subscriptions)if((r=this.subscriptions[a])!=null&&r.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(t=>{if(!(t!=null&&t.isAbort))throw t})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(t){const s={};t=t.includes("?")?t:t+"?";for(let r in this.subscriptions)(r+"?").startsWith(t)&&(s[r]=this.subscriptions[r]);return s}getNonEmptySubscriptionKeys(){const t=[];for(let s in this.subscriptions)this.subscriptions[s].length&&t.push(s);return t}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let t in this.subscriptions)for(let s of this.subscriptions[t])this.eventSource.addEventListener(t,s)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let t in this.subscriptions)for(let s of this.subscriptions[t])this.eventSource.removeEventListener(t,s)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((t,s)=>{this.pendingConnects.push({resolve:t,reject:s}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=t=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",t=>{const s=t;this.clientId=s==null?void 0:s.lastEventId,this.submitSubscriptions().then(async()=>{let r=3;for(;this.hasUnsentSubscriptions()&&r>0;)r--,await this.submitSubscriptions()}).then(()=>{for(let a of this.pendingConnects)a.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const r=this.getSubscriptionsByTopic("PB_CONNECT");for(let a in r)for(let _ of r[a])_(t)}).catch(r=>{this.clientId="",this.connectErrorHandler(r)})})}hasUnsentSubscriptions(){const t=this.getNonEmptySubscriptionKeys();if(t.length!=this.lastSentSubscriptions.length)return!0;for(const s of t)if(!this.lastSentSubscriptions.includes(s))return!0;return!1}connectErrorHandler(t){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let r of this.pendingConnects)r.reject(new Ge(t));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const s=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},s)}disconnect(t=!1){var s;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(s=this.eventSource)==null||s.close(),this.eventSource=null,this.clientId="",!t){this.reconnectAttempts=0;for(let r of this.pendingConnects)r.resolve();this.pendingConnects=[]}}}class zh extends pr{constructor(t,s){super(t),this.collectionIdOrName=s}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribe(t,s,r){if(!t)throw new Error("Missing topic.");if(!s)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+t,s,r)}async unsubscribe(t){return t?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+t):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(t,s){if(typeof t=="number")return super.getFullList(t,s);const r=Object.assign({},t,s);return super.getFullList(r)}async getList(t=1,s=30,r){return super.getList(t,s,r)}async getFirstListItem(t,s){return super.getFirstListItem(t,s)}async getOne(t,s){return super.getOne(t,s)}async create(t,s){return super.create(t,s)}async update(t,s,r){return super.update(t,s,r).then(a=>{var _,v,i;return((_=this.client.authStore.model)==null?void 0:_.id)!==(a==null?void 0:a.id)||((v=this.client.authStore.model)==null?void 0:v.collectionId)!==this.collectionIdOrName&&((i=this.client.authStore.model)==null?void 0:i.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,a),a})}async delete(t,s){return super.delete(t,s).then(r=>{var a,_,v;return!r||((a=this.client.authStore.model)==null?void 0:a.id)!==t||((_=this.client.authStore.model)==null?void 0:_.collectionId)!==this.collectionIdOrName&&((v=this.client.authStore.model)==null?void 0:v.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),r})}authResponse(t){const s=this.decode((t==null?void 0:t.record)||{});return this.client.authStore.save(t==null?void 0:t.token,s),Object.assign({},t,{token:(t==null?void 0:t.token)||"",record:s})}async listAuthMethods(t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCollectionPath+"/auth-methods",t).then(s=>Object.assign({},s,{usernamePassword:!!(s!=null&&s.usernamePassword),emailPassword:!!(s!=null&&s.emailPassword),authProviders:Array.isArray(s==null?void 0:s.authProviders)?s==null?void 0:s.authProviders:[]}))}async authWithPassword(t,s,r,a){let _={method:"POST",body:{identity:t,password:s}};return _=ze("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",_,r,a),this.client.send(this.baseCollectionPath+"/auth-with-password",_).then(v=>this.authResponse(v))}async authWithOAuth2Code(t,s,r,a,_,v,i){let n={method:"POST",body:{provider:t,code:s,codeVerifier:r,redirectUrl:a,createData:_}};return n=ze("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",n,v,i),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",n).then(d=>this.authResponse(d))}authWithOAuth2(...t){if(t.length>1||typeof(t==null?void 0:t[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((t==null?void 0:t[0])||"",(t==null?void 0:t[1])||"",(t==null?void 0:t[2])||"",(t==null?void 0:t[3])||"",(t==null?void 0:t[4])||{},(t==null?void 0:t[5])||{},(t==null?void 0:t[6])||{});const s=(t==null?void 0:t[0])||{};let r=null;s.urlCallback||(r=bn(void 0));const a=new Yo(this.client);function _(){r==null||r.close(),a.unsubscribe()}const v={},i=s.requestKey;return i&&(v.requestKey=i),this.listAuthMethods(v).then(n=>{var g;const d=n.authProviders.find(m=>m.name===s.provider);if(!d)throw new Ge(new Error(`Missing or invalid provider "${s.provider}".`));const f=this.client.buildUrl("/api/oauth2-redirect"),h=i?(g=this.client.cancelControllers)==null?void 0:g[i]:void 0;return h&&(h.signal.onabort=()=>{_()}),new Promise(async(m,w)=>{var S;try{await a.subscribe("@oauth2",async l=>{var y;const p=a.clientId;try{if(!l.state||p!==l.state)throw new Error("State parameters don't match.");if(l.error||!l.code)throw new Error("OAuth2 redirect error or missing code: "+l.error);const C=Object.assign({},s);delete C.provider,delete C.scopes,delete C.createData,delete C.urlCallback,(y=h==null?void 0:h.signal)!=null&&y.onabort&&(h.signal.onabort=null);const E=await this.authWithOAuth2Code(d.name,l.code,d.codeVerifier,f,s.createData,C);m(E)}catch(C){w(new Ge(C))}_()});const c={state:a.clientId};(S=s.scopes)!=null&&S.length&&(c.scope=s.scopes.join(" "));const u=this._replaceQueryParams(d.authUrl+f,c);await(s.urlCallback||function(l){r?r.location.href=l:r=bn(l)})(u)}catch(c){_(),w(new Ge(c))}})}).catch(n=>{throw _(),n})}async authRefresh(t,s){let r={method:"POST"};return r=ze("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",r,t,s),this.client.send(this.baseCollectionPath+"/auth-refresh",r).then(a=>this.authResponse(a))}async requestPasswordReset(t,s,r){let a={method:"POST",body:{email:t}};return a=ze("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",a,s,r),this.client.send(this.baseCollectionPath+"/request-password-reset",a).then(()=>!0)}async confirmPasswordReset(t,s,r,a,_){let v={method:"POST",body:{token:t,password:s,passwordConfirm:r}};return v=ze("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",v,a,_),this.client.send(this.baseCollectionPath+"/confirm-password-reset",v).then(()=>!0)}async requestVerification(t,s,r){let a={method:"POST",body:{email:t}};return a=ze("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",a,s,r),this.client.send(this.baseCollectionPath+"/request-verification",a).then(()=>!0)}async confirmVerification(t,s,r){let a={method:"POST",body:{token:t}};return a=ze("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",a,s,r),this.client.send(this.baseCollectionPath+"/confirm-verification",a).then(()=>{const _=Gt(t),v=this.client.authStore.model;return v&&!v.verified&&v.id===_.id&&v.collectionId===_.collectionId&&(v.verified=!0,this.client.authStore.save(this.client.authStore.token,v)),!0})}async requestEmailChange(t,s,r){let a={method:"POST",body:{newEmail:t}};return a=ze("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",a,s,r),this.client.send(this.baseCollectionPath+"/request-email-change",a).then(()=>!0)}async confirmEmailChange(t,s,r,a){let _={method:"POST",body:{token:t,password:s}};return _=ze("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",_,r,a),this.client.send(this.baseCollectionPath+"/confirm-email-change",_).then(()=>{const v=Gt(t),i=this.client.authStore.model;return i&&i.id===v.id&&i.collectionId===v.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(t,s){return s=Object.assign({method:"GET"},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths",s)}async unlinkExternalAuth(t,s,r){return r=Object.assign({method:"DELETE"},r),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths/"+encodeURIComponent(s),r).then(()=>!0)}_replaceQueryParams(t,s={}){let r=t,a="";t.indexOf("?")>=0&&(r=t.substring(0,t.indexOf("?")),a=t.substring(t.indexOf("?")+1));const _={},v=a.split("&");for(const i of v){if(i=="")continue;const n=i.split("=");_[decodeURIComponent(n[0].replace(/\+/g," "))]=decodeURIComponent((n[1]||"").replace(/\+/g," "))}for(let i in s)s.hasOwnProperty(i)&&(s[i]==null?delete _[i]:_[i]=s[i]);a="";for(let i in _)_.hasOwnProperty(i)&&(a!=""&&(a+="&"),a+=encodeURIComponent(i.replace(/%20/g,"+"))+"="+encodeURIComponent(_[i].replace(/%20/g,"+")));return a!=""?r+"?"+a:r}}function bn(e){if(typeof window>"u"||!(window!=null&&window.open))throw new Ge(new Error("Not in a browser context - please pass a custom urlCallback function."));let t=1024,s=768,r=window.innerWidth,a=window.innerHeight;t=t>r?r:t,s=s>a?a:s;let _=r/2-t/2,v=a/2-s/2;return window.open(e,"popup_window","width="+t+",height="+s+",top="+v+",left="+_+",resizable,menubar=no")}class Vh extends pr{get baseCrudPath(){return"/api/collections"}async import(t,s=!1,r){return r=Object.assign({method:"PUT",body:{collections:t,deleteMissing:s}},r),this.client.send(this.baseCrudPath+"/import",r).then(()=>!0)}}class Gh extends $t{async getList(t=1,s=30,r){return(r=Object.assign({method:"GET"},r)).query=Object.assign({page:t,perPage:s},r.query),this.client.send("/api/logs",r)}async getOne(t,s){if(!t)throw new Ge({url:this.client.buildUrl("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return s=Object.assign({method:"GET"},s),this.client.send("/api/logs/"+encodeURIComponent(t),s)}async getStats(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/stats",t)}}class Jh extends $t{async check(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/health",t)}}class Xh extends $t{getUrl(t,s,r={}){if(!s||!(t!=null&&t.id)||!(t!=null&&t.collectionId)&&!(t!=null&&t.collectionName))return"";const a=[];a.push("api"),a.push("files"),a.push(encodeURIComponent(t.collectionId||t.collectionName)),a.push(encodeURIComponent(t.id)),a.push(encodeURIComponent(s));let _=this.client.buildUrl(a.join("/"));if(Object.keys(r).length){r.download===!1&&delete r.download;const v=new URLSearchParams(r);_+=(_.includes("?")?"&":"?")+v}return _}async getToken(t){return t=Object.assign({method:"POST"},t),this.client.send("/api/files/token",t).then(s=>(s==null?void 0:s.token)||"")}}class Yh extends $t{async getFullList(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/backups",t)}async create(t,s){return s=Object.assign({method:"POST",body:{name:t}},s),this.client.send("/api/backups",s).then(()=>!0)}async upload(t,s){return s=Object.assign({method:"POST",body:t},s),this.client.send("/api/backups/upload",s).then(()=>!0)}async delete(t,s){return s=Object.assign({method:"DELETE"},s),this.client.send(`/api/backups/${encodeURIComponent(t)}`,s).then(()=>!0)}async restore(t,s){return s=Object.assign({method:"POST"},s),this.client.send(`/api/backups/${encodeURIComponent(t)}/restore`,s).then(()=>!0)}getDownloadUrl(t,s){return this.client.buildUrl(`/api/backups/${encodeURIComponent(s)}?token=${encodeURIComponent(t)}`)}}class Zh{constructor(t="/",s,r="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=t,this.lang=r,this.authStore=s||new jh,this.admins=new qh(this),this.collections=new Vh(this),this.files=new Xh(this),this.logs=new Gh(this),this.settings=new Uh(this),this.realtime=new Yo(this),this.health=new Jh(this),this.backups=new Yh(this)}collection(t){return this.recordServices[t]||(this.recordServices[t]=new zh(this,t)),this.recordServices[t]}autoCancellation(t){return this.enableAutoCancellation=!!t,this}cancelRequest(t){return this.cancelControllers[t]&&(this.cancelControllers[t].abort(),delete this.cancelControllers[t]),this}cancelAllRequests(){for(let t in this.cancelControllers)this.cancelControllers[t].abort();return this.cancelControllers={},this}filter(t,s){if(!s)return t;for(let r in s){let a=s[r];switch(typeof a){case"boolean":case"number":a=""+a;break;case"string":a="'"+a.replace(/'/g,"\\'")+"'";break;default:a=a===null?"null":a instanceof Date?"'"+a.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(a).replace(/'/g,"\\'")+"'"}t=t.replaceAll("{:"+r+"}",a)}return t}getFileUrl(t,s,r={}){return this.files.getUrl(t,s,r)}buildUrl(t){var r;let s=this.baseUrl;return typeof window>"u"||!window.location||s.startsWith("https://")||s.startsWith("http://")||(s=(r=window.location.origin)!=null&&r.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(s+=window.location.pathname||"/",s+=s.endsWith("/")?"":"/"),s+=this.baseUrl),t&&(s+=s.endsWith("/")?"":"/",s+=t.startsWith("/")?t.substring(1):t),s}async send(t,s){s=this.initSendOptions(t,s);let r=this.buildUrl(t);if(this.beforeSend){const a=Object.assign({},await this.beforeSend(r,s));a.url!==void 0||a.options!==void 0?(r=a.url||r,s=a.options||s):Object.keys(a).length&&(s=a,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(s.query!==void 0){const a=this.serializeQueryParams(s.query);a&&(r+=(r.includes("?")?"&":"?")+a),delete s.query}return this.getHeader(s.headers,"Content-Type")=="application/json"&&s.body&&typeof s.body!="string"&&(s.body=JSON.stringify(s.body)),(s.fetch||fetch)(r,s).then(async a=>{let _={};try{_=await a.json()}catch{}if(this.afterSend&&(_=await this.afterSend(a,_)),a.status>=400)throw new Ge({url:a.url,status:a.status,data:_});return _}).catch(a=>{throw new Ge(a)})}initSendOptions(t,s){if((s=Object.assign({method:"GET"},s)).body=this.convertToFormDataIfNeeded(s.body),Xo(s),s.query=Object.assign({},s.params,s.query),s.requestKey===void 0&&(s.$autoCancel===!1||s.query.$autoCancel===!1?s.requestKey=null:(s.$cancelKey||s.query.$cancelKey)&&(s.requestKey=s.$cancelKey||s.query.$cancelKey)),delete s.$autoCancel,delete s.query.$autoCancel,delete s.$cancelKey,delete s.query.$cancelKey,this.getHeader(s.headers,"Content-Type")!==null||this.isFormData(s.body)||(s.headers=Object.assign({},s.headers,{"Content-Type":"application/json"})),this.getHeader(s.headers,"Accept-Language")===null&&(s.headers=Object.assign({},s.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(s.headers,"Authorization")===null&&(s.headers=Object.assign({},s.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&s.requestKey!==null){const r=s.requestKey||(s.method||"GET")+t;delete s.requestKey,this.cancelRequest(r);const a=new AbortController;this.cancelControllers[r]=a,s.signal=a.signal}return s}convertToFormDataIfNeeded(t){if(typeof FormData>"u"||t===void 0||typeof t!="object"||t===null||this.isFormData(t)||!this.hasBlobField(t))return t;const s=new FormData;for(const r in t){const a=t[r];if(typeof a!="object"||this.hasBlobField({data:a})){const _=Array.isArray(a)?a:[a];for(let v of _)s.append(r,v)}else{let _={};_[r]=a,s.append("@jsonPayload",JSON.stringify(_))}}return s}hasBlobField(t){for(const s in t){const r=Array.isArray(t[s])?t[s]:[t[s]];for(const a of r)if(typeof Blob<"u"&&a instanceof Blob||typeof File<"u"&&a instanceof File)return!0}return!1}getHeader(t,s){t=t||{},s=s.toLowerCase();for(let r in t)if(r.toLowerCase()==s)return t[r];return null}isFormData(t){return t&&(t.constructor.name==="FormData"||typeof FormData<"u"&&t instanceof FormData)}serializeQueryParams(t){const s=[];for(const r in t){if(t[r]===null)continue;const a=t[r],_=encodeURIComponent(r);if(Array.isArray(a))for(const v of a)s.push(_+"="+encodeURIComponent(v));else a instanceof Date?s.push(_+"="+encodeURIComponent(a.toISOString())):typeof a!==null&&typeof a=="object"?s.push(_+"="+encodeURIComponent(JSON.stringify(a))):s.push(_+"="+encodeURIComponent(a))}return s.join("&")}}const qe=new Zh(void 0),Rs=xs("auth",()=>{const e=Pe(qe.authStore.model),t=Pe(qe.authStore.isValid),s=Pe(qe.authStore.token);return qe.authStore.onChange(()=>{e.value=qe.authStore.model,t.value=qe.authStore.isValid,s.value=qe.authStore.token}),{user:e,isAuthenticated:t,token:s,login:async(v,i)=>{const n=await qe.collection("users").authWithPassword(v,i);e.value=n.record,s.value=n.token,t.value=!0},logout:()=>{qe.authStore.clear(),e.value=null,s.value="",t.value=!1},fetchUser:async()=>{if(t.value&&qe.authStore.model)try{e.value=await qe.collection("users").getOne(qe.authStore.model.id)}catch(v){console.error("Failed to fetch user details:",v)}}}}),hi=()=>qe,Qh={class:"bg-gray-600 text-white hover:bg-gray-700 px-4 py-2 rounded-md"},eu=xe({__name:"Button",props:{title:{type:String,required:!0}},setup(e){const t=e;return(s,r)=>(he(),pe("button",Qh,Ce(t.title),1))}}),tu={class:"mx-auto p-8 min-w-[400px] max-w-[400px] rounded shadow-lg bg-neutral-content"},su={class:"mt-4"},iu={class:"mt-4"},ru={class:"mt-4 text-center"},nu={key:0,class:"text-error mt-4"},ou=xe({__name:"LoginForm",setup(e){const t=Rs(),s=Zt(),r=Pe(""),a=Pe(""),_=Pe(""),v=async()=>{_.value="";try{await t.login(r.value,a.value),s.push({name:"home"})}catch(i){_.value=i.message}};return(i,n)=>(he(),pe("div",tu,[n[4]||(n[4]=W("h2",{class:"text-xl font-bold"},"Login",-1)),W("div",su,[n[2]||(n[2]=W("label",{for:"email",class:"block"},"Email:",-1)),Mi(W("input",{"onUpdate:modelValue":n[0]||(n[0]=d=>r.value=d),type:"email",id:"email",required:"",placeholder:"Enter your email",class:"w-full px-4 py-2 border rounded mt-2"},null,512),[[Xr,r.value]])]),W("div",iu,[n[3]||(n[3]=W("label",{for:"password",class:"block"},"Password:",-1)),Mi(W("input",{"onUpdate:modelValue":n[1]||(n[1]=d=>a.value=d),type:"password",id:"password",required:"",placeholder:"Enter your password",class:"w-full px-4 py-2 border rounded mt-2"},null,512),[[Xr,a.value]])]),W("div",ru,[fe(eu,{onClick:v,title:"Login"})]),_.value?(he(),pe("p",nu,Ce(_.value),1)):ft("",!0)]))}});var au={projects:"projects"};const cu=xs("projects",()=>{const e=hi(),t=Pe([]),s=we(()=>t.value);async function r(){const a=await e.collection(au.projects).getList(1,50,{sort:"-created"});t.value=a.items}return{getProjects:s,fetchProjects:r}}),lu={class:"bg-gray-300 text-gray-900 font-mono rounded-md py-1 px-2 my-1 text-xs hover:cursor-pointer"},Ht=xe({__name:"Identifier",props:{id:{}},setup(e){return(t,s)=>(he(),pe("span",lu,Ce(t.id),1))}}),hu={class:"mx-auto p-8 min-w-[400px] max-w-[400px] rounded shadow-lg"},uu={class:"table mx-auto"},du=xe({__name:"SelectProject",setup(e){const t=cu(),s=we(()=>t.getProjects),r=a=>{ys.push({name:"tasks",params:{projectId:a}})};return Rt(async()=>{await t.fetchProjects()}),(a,_)=>(he(),pe("div",hu,[W("table",uu,[_[0]||(_[0]=W("thead",null,[W("tr",null,[W("th",null,"id"),W("th",null,"name")])],-1)),W("tbody",null,[(he(!0),pe(Oe,null,si(s.value,v=>(he(),pe("tr",{key:v.id},[W("td",null,[fe(Ht,{id:v.id,onClick:i=>r(v.id)},null,8,["id","onClick"])]),W("td",null,Ce(v.name),1)]))),128))])])]))}}),fu={class:"text-xl text-primary text-center pb-4"},Ls=xe({__name:"PageTitle",props:{title:{}},setup(e){const t=e;return(s,r)=>(he(),pe("div",fu,Ce(t.title),1))}}),_u=xe({__name:"HomeView",setup(e){const t=Rs();return(s,r)=>Ye(t).isAuthenticated?(he(),pe(Oe,{key:0},[fe(Ls,{title:"Projects"}),fe(du)],64)):(he(),Je(ou,{key:1}))}}),Lt=xs("toasts",()=>{const e=Pe([]),t=we(()=>e.value);function s(a,_,v=4e3){const i={fired:new Date().toISOString(),message:a,type:_,duration:v,timeout:setTimeout(()=>{r(i.fired)},v)};e.value.push(i)}function r(a){const _=e.value.find(v=>v.fired===a);_&&(clearTimeout(_.timeout),e.value=e.value.filter(v=>v!==_))}return{getToasts:t,addToast:s,removeToast:r}});var Ai={tasks:"tasks"};const gr=xs("tasks",()=>{const e=hi(),t=Pe([]),s=Pe({}),r=we(()=>t.value),a=we(()=>s.value);async function _(d){const f=await e.collection(Ai.tasks).getList(1,100,{expand:"node,project",sort:"-created",filter:e.filter("project = {:projectId}",{projectId:d})});t.value=f.items}async function v(d){const f=await e.collection(Ai.tasks).getOne(d,{expand:"node,project"});s.value=f}async function i(d,f){await e.collection(Ai.tasks).update(d,f),n(d,f)}function n(d,f){const h=t.value.findIndex(g=>g.id===d);h!==-1&&(t.value[h]={...t.value[h],...f})}return{getTasks:r,getTask:a,fetchTasks:_,fetchTask:v,updateTask:i,updateStoredTask:n}});var yn={runs:"runs"};const vr=xs("runs",()=>{const e=hi(),t=Pe({}),s=Pe({}),r=we(()=>t.value),a=we(()=>s.value);async function _(d){const f=await e.collection(yn.runs).getList(1,50,{requestKey:d,filter:e.filter("task.id={:taskId}",{taskId:d}),sort:"-created"});t.value[d]=f.items}async function v(d){const f=await e.collection(yn.runs).getOne(d,{expand:"task"});s.value=f}function i(d,f){t.value[d]=t.value[d].map(h=>h.id===f.id?{...h,...f}:h)}function n(d,f){t.value[d].unshift(f),t.value[d]=t.value[d].slice(0,100)}return{getLastRuns:r,getRun:a,fetchTaskLastRuns:_,fetchRun:v,updateStoreRun:i,addStoreRun:n}}),pu={class:"text-xs text-left bg-primary-content text-accent-content p-2 my-1 rounded-md max-w-full overflow-x-auto"},ui=xe({__name:"Command",props:{command:{}},setup(e){const t=e;return(s,r)=>(he(),pe("pre",pu,Ce(t.command),1))}});var Dt={started:"started",completed:"completed",interrupted:"interrupted",error:"error",internal_error:"internal_error"};const mr=xe({__name:"RunStatus",props:{run:{},title:{}},setup(e){const t=e,s=we(()=>{switch(t.run.status){case Dt.completed:return"badge-success";case Dt.started:return"badge-info";case Dt.error:case Dt.internal_error:return"badge-error";case Dt.interrupted:return"badge-warning";default:return""}}),r=we(()=>t.run.status==Dt.error?`${t.run.status}(${t.run.exit_code})`:t.run.status==Dt.internal_error?`${t.run.status}(SSH)`:t.run.status);return(a,_)=>(he(),pe("span",{class:Zs([s.value,"badge"])},Ce(r.value),3))}}),gu=e=>{const t=new Date(e);return Zo(Math.round((new Date().getTime()-t.getTime())/1e3))},Cn=(e,t)=>{const s=new Date(e),r=new Date(t);return Zo(Math.round((r.getTime()-s.getTime())/1e3))};function Zo(e){if(e===null||e===0)return"0";if(e<60)return`${e}s`;e=Math.floor(e/60);const t=Math.round(e%60);e=Math.floor(e/60);const s=Math.round(e%24);return s>0?t===0?`${s}h`:`${s}h${t}`:`${t}m`}const vu={class:"text-brown"},Vi=xe({__name:"RunTimeAgo",props:{datetime:{}},setup(e){const t=e;return(s,r)=>(he(),pe("span",null,[W("span",vu,Ce(Ye(gu)(t.datetime)),1),r[0]||(r[0]=xo(" ago "))]))}});var gt={tasks:"tasks",runs:"runs"};const mu={class:"overflow-x-auto"},Su={class:"table"},bu={class:""},yu=["checked","onChange"],Cu=xe({__name:"TasksView",setup(e){const t=hi(),s=Zt(),r=li(),a=Lt(),_=Array.isArray(r.params.projectId)?r.params.projectId[0]:r.params.projectId,v=gr(),i=vr(),n=we(()=>v.getTasks),d=we(()=>i.getLastRuns),f=c=>c in d.value&&d.value[c].length>0?d.value[c][0]:null,h=async()=>{try{await v.fetchTasks(_)}catch(c){a.addToast(c.message,"error")}t.collection(gt.tasks).subscribe("*",c=>{var u;((u=c.record)==null?void 0:u.collectionName)==gt.tasks&&(c.action=="create"||c.action=="update")&&v.updateStoredTask(c.record.id,{id:c.record.id,updated:c.record.updated,name:c.record.name,command:c.record.command,schedule:c.record.schedule,node:c.record.node,project:c.record.project,active:c.record.active,prepend_datetime:c.record.prepend_datetime})})},g=async()=>{try{for(const c of n.value)await i.fetchTaskLastRuns(c.id)}catch(c){a.addToast(c.message,"error")}t.collection(gt.runs).subscribe("*",c=>{var u;if(((u=c.record)==null?void 0:u.collectionName)==gt.runs&&(c.action=="create"||c.action=="update")){const o={id:c.record.id,updated:c.record.updated,status:c.record.status,command:c.record.command,connection_error:c.record.connection_error,exit_code:c.record.exit_code};c.action=="update"?i.updateStoreRun(c.record.task,o):c.action=="create"&&(o.created=new Date().toISOString(),o.updated=o.created,i.addStoreRun(c.record.task,o))}})};Rt(async()=>{t.collection(gt.runs).unsubscribe(),t.collection(gt.tasks).unsubscribe(),await h(),await g()}),Es(()=>{t.collection(gt.runs).unsubscribe(),t.collection(gt.tasks).unsubscribe()});const m=c=>{s.push({name:"task",params:{id:c}})},w=c=>{s.push({name:"run",params:{id:c}})},S=async c=>{const u=n.value.find(o=>o.id===c);if(u)try{u.active=!u.active,v.updateTask(u.id,{active:u.active})}catch(o){u.active=!u.active,a.addToast(o.message,"error")}};return(c,u)=>(he(),pe(Oe,null,[fe(Ls,{title:`Tasks for project ${Ye(_)}`},null,8,["title"]),W("div",mu,[W("table",Su,[u[0]||(u[0]=W("thead",null,[W("tr",{class:""},[W("th",{class:""}),W("th",{class:""},"id"),W("th",{class:""},"name"),W("th",{class:""},"schedule"),W("th",{class:""},"command"),W("th",{class:""},"run id"),W("th",{class:""},"run status"),W("th",{class:""},"run updated")])],-1)),W("tbody",null,[(he(!0),pe(Oe,null,si(n.value,o=>{var l,p;return he(),pe("tr",{key:o.id,class:""},[W("td",bu,[W("input",{type:"checkbox",class:"toggle toggle-sm",checked:o.active,onChange:y=>S(o.id)},null,40,yu)]),W("td",null,[fe(Ht,{onClick:y=>m(o.id),id:o.id},null,8,["onClick","id"])]),W("td",null,Ce(o.name),1),W("td",null,Ce(o.schedule),1),W("td",null,[fe(ui,{command:o.command},null,8,["command"])]),W("td",null,[f(o.id)?(he(),Je(Ht,{key:0,onClick:y=>w(o.id),id:(l=f(o.id))==null?void 0:l.id},null,8,["onClick","id"])):ft("",!0)]),W("td",null,[f(o.id)?(he(),Je(mr,{key:0,run:f(o.id)},null,8,["run"])):ft("",!0)]),W("td",null,[f(o.id)?(he(),Je(Vi,{key:0,datetime:(p=f(o.id))==null?void 0:p.updated},null,8,["datetime"])):ft("",!0)])])}),128))])])])],64))}}),wu={class:"card card-compact bg-base-200 w-96 shadow-xl"},Eu={class:"card-body"},ku={class:"card-title"},xu={class:"table table-xs"},Qo=xe({__name:"TaskCard",props:{task:{}},setup(e){const t=e;return(s,r)=>{var a,_,v,i;return he(),pe("div",wu,[W("div",Eu,[W("h2",ku,Ce(t.task.name),1),t.task.command?(he(),Je(ui,{key:0,command:t.task.command},null,8,["command"])):ft("",!0),W("table",xu,[W("tbody",null,[W("tr",null,[r[0]||(r[0]=W("td",null,"Id",-1)),W("td",null,[fe(Ht,{id:t.task.id},null,8,["id"])])]),W("tr",null,[r[1]||(r[1]=W("td",null,"Project",-1)),W("td",null,Ce((_=(a=t.task.expand)==null?void 0:a.project)==null?void 0:_.name),1)]),W("tr",null,[r[2]||(r[2]=W("td",null,"Node",-1)),W("td",null,Ce((i=(v=t.task.expand)==null?void 0:v.node)==null?void 0:i.host),1)]),W("tr",null,[r[3]||(r[3]=W("td",null,"Schedule",-1)),W("td",null,Ce(t.task.schedule),1)]),W("tr",null,[r[4]||(r[4]=W("td",null,"Active",-1)),W("td",null,Ce(t.task.active),1)]),W("tr",null,[r[5]||(r[5]=W("td",null,"Prepend datetime",-1)),W("td",null,Ce(t.task.prepend_datetime),1)]),W("tr",null,[r[6]||(r[6]=W("td",null,"Created",-1)),W("td",null,Ce(t.task.created),1)]),W("tr",null,[r[7]||(r[7]=W("td",null,"Updated",-1)),W("td",null,Ce(t.task.updated),1)])])])])])}}});var Ru={started:"started"};const Lu={class:"text-brown"},Au=xe({__name:"RunTimeDiff",props:{run:{}},setup(e){const t=e,s=we(()=>t.run.status==Ru.started?Cn(t.run.created,new Date().toISOString()):Cn(t.run.created,t.run.updated));return(r,a)=>(he(),pe("span",null,[W("span",Lu,Ce(s.value),1)]))}});var Tu={started:"started"};const Du={class:"overflow-x-auto"},Ou={class:"table"},Pu={key:0,class:"bg-error/20 p-1 rounded-md"},Bu=xe({__name:"TaskRuns",props:{task:{}},setup(e){const t=e,s=Zt(),r=Lt(),a=vr(),_=we(()=>a.getLastRuns[t.task.id]),v=i=>{i.status===Tu.started?s.push({name:"task-log",params:{id:t.task.id}}):s.push({name:"run",params:{id:i.id}})};return wt(()=>t.task,async()=>{try{await a.fetchTaskLastRuns(t.task.id)}catch(i){r.addToast(i.message,"error")}}),(i,n)=>(he(),pe("div",Du,[W("table",Ou,[n[0]||(n[0]=W("thead",null,[W("tr",{class:""},[W("th",{class:""},"id"),W("th",{class:""},"command"),W("th",{class:""},"status"),W("th",{class:""},"exit code"),W("th",{class:""},"error"),W("th",{class:""},"running time"),W("th",{class:""},"created"),W("th",{class:""},"updated")])],-1)),W("tbody",null,[(he(!0),pe(Oe,null,si(_.value,d=>(he(),pe("tr",{key:d.id,class:""},[W("td",null,[fe(Ht,{onClick:f=>v(d),id:d.id},null,8,["onClick","id"])]),W("td",null,[fe(ui,{command:d.command},null,8,["command"])]),W("td",null,[fe(mr,{run:d},null,8,["run"])]),W("td",null,Ce(d.exit_code),1),W("td",null,[d.connection_error?(he(),pe("div",Pu,Ce(d.connection_error),1)):ft("",!0)]),W("td",null,[fe(Au,{run:d},null,8,["run"])]),W("td",null,[fe(Vi,{datetime:d.updated},null,8,["datetime"])]),W("td",null,[fe(Vi,{datetime:d.created},null,8,["datetime"])])]))),128))])])]))}}),Mu={class:"flex flex-row gap-4"},Iu={class:"basis-1/4"},Hu={class:"basis-3/4"},Fu={role:"tablist",class:"tabs tabs-lifted"},$u={role:"tabpanel",class:"tab-content bg-base-100 border-base-300 rounded-box p-6"},Nu=xe({__name:"TaskView",setup(e){const t=Lt(),s=gr(),r=Zt(),a=li(),_=Array.isArray(a.params.id)?a.params.id[0]:a.params.id,v=we(()=>s.getTask);Rt(async()=>{try{await s.fetchTask(_)}catch(n){t.addToast(n.message,"error")}});const i=()=>{r.push({name:"task-log",params:{id:_}})};return(n,d)=>(he(),pe(Oe,null,[fe(Ls,{title:`Task history ${Ye(_)}`},null,8,["title"]),W("div",Mu,[W("div",Iu,[fe(Qo,{task:v.value},null,8,["task"])]),W("div",Hu,[W("div",Fu,[d[1]||(d[1]=W("a",{role:"tab",class:"tab tab-active"},"History",-1)),W("div",$u,[fe(Bu,{task:v.value},null,8,["task"])]),W("a",{role:"tab",class:"tab",onClick:d[0]||(d[0]=f=>i())},"Logs"),d[2]||(d[2]=W("div",{role:"tabpanel",class:"tab-content bg-base-100 border-base-300 rounded-box p-6"},null,-1))])])])],64))}});var ea={exports:{}};(function(e,t){(function(s,r){e.exports=r()})(globalThis,()=>(()=>{var s={4567:function(v,i,n){var d=this&&this.__decorate||function(o,l,p,y){var C,E=arguments.length,b=E<3?l:y===null?y=Object.getOwnPropertyDescriptor(l,p):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(o,l,p,y);else for(var k=o.length-1;k>=0;k--)(C=o[k])&&(b=(E<3?C(b):E>3?C(l,p,b):C(l,p))||b);return E>3&&b&&Object.defineProperty(l,p,b),b},f=this&&this.__param||function(o,l){return function(p,y){l(p,y,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const h=n(9042),g=n(9924),m=n(844),w=n(4725),S=n(2585),c=n(3656);let u=i.AccessibilityManager=class extends m.Disposable{constructor(o,l,p,y){super(),this._terminal=o,this._coreBrowserService=p,this._renderService=y,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,c.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,m.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(o){for(let l=0;l<o;l++)this._handleChar(" ")}_handleChar(o){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==o&&(this._charsToAnnounce+=o):this._charsToAnnounce+=o,o===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(o){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(o)||this._charsToConsume.push(o)}_refreshRows(o,l){this._liveRegionDebouncer.refresh(o,l,this._terminal.rows)}_renderRows(o,l){const p=this._terminal.buffer,y=p.lines.length.toString();for(let C=o;C<=l;C++){const E=p.lines.get(p.ydisp+C),b=[],k=(E==null?void 0:E.translateToString(!0,void 0,void 0,b))||"",P=(p.ydisp+C+1).toString(),M=this._rowElements[C];M&&(k.length===0?(M.innerText="",this._rowColumns.set(M,[0,1])):(M.textContent=k,this._rowColumns.set(M,b)),M.setAttribute("aria-posinset",P),M.setAttribute("aria-setsize",y))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(o,l){const p=o.target,y=this._rowElements[l===0?1:this._rowElements.length-2];if(p.getAttribute("aria-posinset")===(l===0?"1":`${this._terminal.buffer.lines.length}`)||o.relatedTarget!==y)return;let C,E;if(l===0?(C=p,E=this._rowElements.pop(),this._rowContainer.removeChild(E)):(C=this._rowElements.shift(),E=p,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),E.removeEventListener("focus",this._bottomBoundaryFocusListener),l===0){const b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else{const b=this._createAccessibilityTreeNode();this._rowElements.push(b),this._rowContainer.appendChild(b)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(l===0?-1:1),this._rowElements[l===0?1:this._rowElements.length-2].focus(),o.preventDefault(),o.stopImmediatePropagation()}_handleSelectionChange(){var k;if(this._rowElements.length===0)return;const o=document.getSelection();if(!o)return;if(o.isCollapsed)return void(this._rowContainer.contains(o.anchorNode)&&this._terminal.clearSelection());if(!o.anchorNode||!o.focusNode)return void console.error("anchorNode and/or focusNode are null");let l={node:o.anchorNode,offset:o.anchorOffset},p={node:o.focusNode,offset:o.focusOffset};if((l.node.compareDocumentPosition(p.node)&Node.DOCUMENT_POSITION_PRECEDING||l.node===p.node&&l.offset>p.offset)&&([l,p]=[p,l]),l.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(l={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(l.node))return;const y=this._rowElements.slice(-1)[0];if(p.node.compareDocumentPosition(y)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(p={node:y,offset:((k=y.textContent)==null?void 0:k.length)??0}),!this._rowContainer.contains(p.node))return;const C=({node:P,offset:M})=>{const I=P instanceof Text?P.parentNode:P;let D=parseInt(I==null?void 0:I.getAttribute("aria-posinset"),10)-1;if(isNaN(D))return console.warn("row is invalid. Race condition?"),null;const U=this._rowColumns.get(I);if(!U)return console.warn("columns is null. Race condition?"),null;let q=M<U.length?U[M]:U.slice(-1)[0]+1;return q>=this._terminal.cols&&(++D,q=0),{row:D,column:q}},E=C(l),b=C(p);if(E&&b){if(E.row>b.row||E.row===b.row&&E.column>=b.column)throw new Error("invalid range");this._terminal.select(E.column,E.row,(b.row-E.row)*this._terminal.cols-E.column+b.column)}}_handleResize(o){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let l=this._rowContainer.children.length;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);for(;this._rowElements.length>o;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const o=this._coreBrowserService.mainDocument.createElement("div");return o.setAttribute("role","listitem"),o.tabIndex=-1,this._refreshRowDimensions(o),o}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let o=0;o<this._terminal.rows;o++)this._refreshRowDimensions(this._rowElements[o])}}_refreshRowDimensions(o){o.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=u=d([f(1,S.IInstantiationService),f(2,w.ICoreBrowserService),f(3,w.IRenderService)],u)},3614:(v,i)=>{function n(g){return g.replace(/\r?\n/g,"\r")}function d(g,m){return m?"\x1B[200~"+g+"\x1B[201~":g}function f(g,m,w,S){g=d(g=n(g),w.decPrivateModes.bracketedPasteMode&&S.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(g,!0),m.value=""}function h(g,m,w){const S=w.getBoundingClientRect(),c=g.clientX-S.left-10,u=g.clientY-S.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${c}px`,m.style.top=`${u}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=n,i.bracketTextForPaste=d,i.copyHandler=function(g,m){g.clipboardData&&g.clipboardData.setData("text/plain",m.selectionText),g.preventDefault()},i.handlePasteEvent=function(g,m,w,S){g.stopPropagation(),g.clipboardData&&f(g.clipboardData.getData("text/plain"),m,w,S)},i.paste=f,i.moveTextAreaUnderMouseCursor=h,i.rightClickHandler=function(g,m,w,S,c){h(g,m,w),c&&S.rightClickSelect(g),m.value=S.selectionText,m.select()}},7239:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const d=n(1505);i.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(f,h,g){this._css.set(f,h,g)}getCss(f,h){return this._css.get(f,h)}setColor(f,h,g){this._color.set(f,h,g)}getColor(f,h){return this._color.get(f,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(n,d,f,h){n.addEventListener(d,f,h);let g=!1;return{dispose:()=>{g||(g=!0,n.removeEventListener(d,f,h))}}}},3551:function(v,i,n){var d=this&&this.__decorate||function(u,o,l,p){var y,C=arguments.length,E=C<3?o:p===null?p=Object.getOwnPropertyDescriptor(o,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(u,o,l,p);else for(var b=u.length-1;b>=0;b--)(y=u[b])&&(E=(C<3?y(E):C>3?y(o,l,E):y(o,l))||E);return C>3&&E&&Object.defineProperty(o,l,E),E},f=this&&this.__param||function(u,o){return function(l,p){o(l,p,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const h=n(3656),g=n(8460),m=n(844),w=n(2585),S=n(4725);let c=i.Linkifier=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(u,o,l,p,y){super(),this._element=u,this._mouseService=o,this._renderService=l,this._bufferService=p,this._linkProviderService=y,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{var C;this._lastMouseEvent=void 0,(C=this._activeProviderReplies)==null||C.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(u){this._lastMouseEvent=u;const o=this._positionFromMouseEvent(u,this._element,this._mouseService);if(!o)return;this._isMouseOut=!1;const l=u.composedPath();for(let p=0;p<l.length;p++){const y=l[p];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&o.x===this._lastBufferCell.x&&o.y===this._lastBufferCell.y||(this._handleHover(o),this._lastBufferCell=o)}_handleHover(u){if(this._activeLine!==u.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(u,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,u)||(this._clearCurrentLink(),this._askForLink(u,!0))}_askForLink(u,o){var p,y;this._activeProviderReplies&&o||((p=this._activeProviderReplies)==null||p.forEach(C=>{C==null||C.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=u.y);let l=!1;for(const[C,E]of this._linkProviderService.linkProviders.entries())o?(y=this._activeProviderReplies)!=null&&y.get(C)&&(l=this._checkLinkProviderResult(C,u,l)):E.provideLinks(u.y,b=>{var P,M;if(this._isMouseOut)return;const k=b==null?void 0:b.map(I=>({link:I}));(P=this._activeProviderReplies)==null||P.set(C,k),l=this._checkLinkProviderResult(C,u,l),((M=this._activeProviderReplies)==null?void 0:M.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(u.y,this._activeProviderReplies)})}_removeIntersectingLinks(u,o){const l=new Set;for(let p=0;p<o.size;p++){const y=o.get(p);if(y)for(let C=0;C<y.length;C++){const E=y[C],b=E.link.range.start.y<u?0:E.link.range.start.x,k=E.link.range.end.y>u?this._bufferService.cols:E.link.range.end.x;for(let P=b;P<=k;P++){if(l.has(P)){y.splice(C--,1);break}l.add(P)}}}}_checkLinkProviderResult(u,o,l){var C;if(!this._activeProviderReplies)return l;const p=this._activeProviderReplies.get(u);let y=!1;for(let E=0;E<u;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(y=!0);if(!y&&p){const E=p.find(b=>this._linkAtPosition(b.link,o));E&&(l=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!l)for(let E=0;E<this._activeProviderReplies.size;E++){const b=(C=this._activeProviderReplies.get(E))==null?void 0:C.find(k=>this._linkAtPosition(k.link,o));if(b){l=!0,this._handleNewLink(b);break}}return l}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(u){if(!this._currentLink)return;const o=this._positionFromMouseEvent(u,this._element,this._mouseService);o&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,o)&&this._currentLink.link.activate(u,this._currentLink.link.text)}_clearCurrentLink(u,o){this._currentLink&&this._lastMouseEvent&&(!u||!o||this._currentLink.link.range.start.y>=u&&this._currentLink.link.range.end.y<=o)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(u){if(!this._lastMouseEvent)return;const o=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);o&&this._linkAtPosition(u.link,o)&&(this._currentLink=u,this._currentLink.state={decorations:{underline:u.link.decorations===void 0||u.link.decorations.underline,pointerCursor:u.link.decorations===void 0||u.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,u.link,this._lastMouseEvent),u.link.decorations={},Object.defineProperties(u.link.decorations,{pointerCursor:{get:()=>{var l,p;return(p=(l=this._currentLink)==null?void 0:l.state)==null?void 0:p.decorations.pointerCursor},set:l=>{var p;(p=this._currentLink)!=null&&p.state&&this._currentLink.state.decorations.pointerCursor!==l&&(this._currentLink.state.decorations.pointerCursor=l,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",l))}},underline:{get:()=>{var l,p;return(p=(l=this._currentLink)==null?void 0:l.state)==null?void 0:p.decorations.underline},set:l=>{var p,y,C;(p=this._currentLink)!=null&&p.state&&((C=(y=this._currentLink)==null?void 0:y.state)==null?void 0:C.decorations.underline)!==l&&(this._currentLink.state.decorations.underline=l,this._currentLink.state.isHovered&&this._fireUnderlineEvent(u.link,l))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(l=>{if(!this._currentLink)return;const p=l.start===0?0:l.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+l.end;if(this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(p,y),this._lastMouseEvent)){const C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(u,o,l){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!0),this._currentLink.state.decorations.pointerCursor&&u.classList.add("xterm-cursor-pointer")),o.hover&&o.hover(l,o.text)}_fireUnderlineEvent(u,o){const l=u.range,p=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(l.start.x-1,l.start.y-p-1,l.end.x,l.end.y-p-1,void 0);(o?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(u,o,l){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!1),this._currentLink.state.decorations.pointerCursor&&u.classList.remove("xterm-cursor-pointer")),o.leave&&o.leave(l,o.text)}_linkAtPosition(u,o){const l=u.range.start.y*this._bufferService.cols+u.range.start.x,p=u.range.end.y*this._bufferService.cols+u.range.end.x,y=o.y*this._bufferService.cols+o.x;return l<=y&&y<=p}_positionFromMouseEvent(u,o,l){const p=l.getCoords(u,o,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(u,o,l,p,y){return{x1:u,y1:o,x2:l,y2:p,cols:this._bufferService.cols,fg:y}}};i.Linkifier=c=d([f(1,S.IMouseService),f(2,S.IRenderService),f(3,w.IBufferService),f(4,S.ILinkProviderService)],c)},9042:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(v,i,n){var d=this&&this.__decorate||function(S,c,u,o){var l,p=arguments.length,y=p<3?c:o===null?o=Object.getOwnPropertyDescriptor(c,u):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(S,c,u,o);else for(var C=S.length-1;C>=0;C--)(l=S[C])&&(y=(p<3?l(y):p>3?l(c,u,y):l(c,u))||y);return p>3&&y&&Object.defineProperty(c,u,y),y},f=this&&this.__param||function(S,c){return function(u,o){c(u,o,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const h=n(511),g=n(2585);let m=i.OscLinkProvider=class{constructor(S,c,u){this._bufferService=S,this._optionsService=c,this._oscLinkService=u}provideLinks(S,c){var k;const u=this._bufferService.buffer.lines.get(S-1);if(!u)return void c(void 0);const o=[],l=this._optionsService.rawOptions.linkHandler,p=new h.CellData,y=u.getTrimmedLength();let C=-1,E=-1,b=!1;for(let P=0;P<y;P++)if(E!==-1||u.hasContent(P)){if(u.loadCell(P,p),p.hasExtendedAttrs()&&p.extended.urlId){if(E===-1){E=P,C=p.extended.urlId;continue}b=p.extended.urlId!==C}else E!==-1&&(b=!0);if(b||E!==-1&&P===y-1){const M=(k=this._oscLinkService.getLinkData(C))==null?void 0:k.uri;if(M){const I={start:{x:E+1,y:S},end:{x:P+(b||P!==y-1?0:1),y:S}};let D=!1;if(!(l!=null&&l.allowNonHttpProtocols))try{const U=new URL(M);["http:","https:"].includes(U.protocol)||(D=!0)}catch{D=!0}D||o.push({text:M,range:I,activate:(U,q)=>l?l.activate(U,q,I):w(0,q),hover:(U,q)=>{var G;return(G=l==null?void 0:l.hover)==null?void 0:G.call(l,U,q,I)},leave:(U,q)=>{var G;return(G=l==null?void 0:l.leave)==null?void 0:G.call(l,U,q,I)}})}b=!1,p.hasExtendedAttrs()&&p.extended.urlId?(E=P,C=p.extended.urlId):(E=-1,C=-1)}}c(o)}};function w(S,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){const u=window.open();if(u){try{u.opener=null}catch{}u.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=m=d([f(0,g.IBufferService),f(1,g.IOptionsService),f(2,g.IOscLinkService)],m)},6193:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(n,d){this._renderCallback=n,this._coreBrowserService=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,d,f){this._rowCount=f,n=n!==void 0?n:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},3236:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const d=n(3614),f=n(3656),h=n(3551),g=n(9042),m=n(3730),w=n(1680),S=n(3107),c=n(5744),u=n(2950),o=n(1296),l=n(428),p=n(4269),y=n(5114),C=n(8934),E=n(3230),b=n(9312),k=n(4725),P=n(6731),M=n(8055),I=n(8969),D=n(8460),U=n(844),q=n(6114),G=n(8437),z=n(2584),V=n(7399),R=n(5941),O=n(9074),B=n(2585),H=n(5435),J=n(4567),te=n(779);class ce extends I.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(A={}){super(A),this.browser=q,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new U.MutableDisposable),this._onCursorMove=this.register(new D.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new D.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new D.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new D.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new D.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new D.EventEmitter),this._onBlur=this.register(new D.EventEmitter),this._onA11yCharEmitter=this.register(new D.EventEmitter),this._onA11yTabEmitter=this.register(new D.EventEmitter),this._onWillOpen=this.register(new D.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(O.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(te.LinkProviderService),this._instantiationService.setService(k.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((x,$)=>this.refresh(x,$))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(x=>this._reportWindowsOptions(x))),this.register(this._inputHandler.onColor(x=>this._handleColorEvent(x))),this.register((0,D.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,D.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(x=>this._afterResize(x.cols,x.rows))),this.register((0,U.toDisposable)(()=>{var x,$;this._customKeyEventHandler=void 0,($=(x=this.element)==null?void 0:x.parentNode)==null||$.removeChild(this.element)}))}_handleColorEvent(A){if(this._themeService)for(const x of A){let $,F="";switch(x.index){case 256:$="foreground",F="10";break;case 257:$="background",F="11";break;case 258:$="cursor",F="12";break;default:$="ansi",F="4;"+x.index}switch(x.type){case 0:const Y=M.color.toColorRGB($==="ansi"?this._themeService.colors.ansi[x.index]:this._themeService.colors[$]);this.coreService.triggerDataEvent(`${z.C0.ESC}]${F};${(0,R.toRgbString)(Y)}${z.C1_ESCAPED.ST}`);break;case 1:if($==="ansi")this._themeService.modifyColors(Z=>Z.ansi[x.index]=M.channels.toColor(...x.color));else{const Z=$;this._themeService.modifyColors(L=>L[Z]=M.channels.toColor(...x.color))}break;case 2:this._themeService.restoreColor(x.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(A){A?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(J.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(A){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(z.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var A;return(A=this.textarea)==null?void 0:A.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(z.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const A=this.buffer.ybase+this.buffer.y,x=this.buffer.lines.get(A);if(!x)return;const $=Math.min(this.buffer.x,this.cols-1),F=this._renderService.dimensions.css.cell.height,Y=x.getWidth($),Z=this._renderService.dimensions.css.cell.width*Y,L=this.buffer.y*this._renderService.dimensions.css.cell.height,T=$*this._renderService.dimensions.css.cell.width;this.textarea.style.left=T+"px",this.textarea.style.top=L+"px",this.textarea.style.width=Z+"px",this.textarea.style.height=F+"px",this.textarea.style.lineHeight=F+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",x=>{this.hasSelection()&&(0,d.copyHandler)(x,this._selectionService)}));const A=x=>(0,d.handlePasteEvent)(x,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",A)),this.register((0,f.addDisposableDomListener)(this.element,"paste",A)),q.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",x=>{x.button===2&&(0,d.rightClickHandler)(x,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",x=>{(0,d.rightClickHandler)(x,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),q.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",x=>{x.button===1&&(0,d.moveTextAreaUnderMouseCursor)(x,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",A=>this._keyUp(A),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",A=>this._keyDown(A),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",A=>this._keyPress(A),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",A=>this._compositionHelper.compositionupdate(A))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",A=>this._inputEvent(A),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(A){var $;if(!A)throw new Error("Terminal requires a parent element.");if(A.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),(($=this.element)==null?void 0:$.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=A.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),A.appendChild(this.element);const x=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),x.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,f.addDisposableDomListener)(this.screenElement,"mousemove",F=>this.updateCursorStyle(F))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),x.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),q.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(y.CoreBrowserService,this.textarea,A.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(k.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",F=>this._handleTextAreaFocus(F))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(l.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(P.ThemeService),this._instantiationService.setService(k.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(F=>this._onRender.fire(F))),this.onResize(F=>this._renderService.resize(F.cols,F.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(u.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(x);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(b.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(F=>this._renderService.handleSelectionChanged(F.start,F.end,F.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(F=>{this.textarea.value=F,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(F=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(S.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",F=>this._selectionService.handleMouseDown(F))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(J.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",F=>this._handleScreenReaderModeOptionChange(F))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",F=>{!this._overviewRulerRenderer&&F&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(o.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const A=this,x=this.element;function $(Z){const L=A._mouseService.getMouseReportCoords(Z,A.screenElement);if(!L)return!1;let T,N;switch(Z.overrideType||Z.type){case"mousemove":N=32,Z.buttons===void 0?(T=3,Z.button!==void 0&&(T=Z.button<3?Z.button:3)):T=1&Z.buttons?0:4&Z.buttons?1:2&Z.buttons?2:3;break;case"mouseup":N=0,T=Z.button<3?Z.button:3;break;case"mousedown":N=1,T=Z.button<3?Z.button:3;break;case"wheel":if(A._customWheelEventHandler&&A._customWheelEventHandler(Z)===!1||A.viewport.getLinesScrolled(Z)===0)return!1;N=Z.deltaY<0?0:1,T=4;break;default:return!1}return!(N===void 0||T===void 0||T>4)&&A.coreMouseService.triggerMouseEvent({col:L.col,row:L.row,x:L.x,y:L.y,button:T,action:N,ctrl:Z.ctrlKey,alt:Z.altKey,shift:Z.shiftKey})}const F={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Y={mouseup:Z=>($(Z),Z.buttons||(this._document.removeEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.removeEventListener("mousemove",F.mousedrag)),this.cancel(Z)),wheel:Z=>($(Z),this.cancel(Z,!0)),mousedrag:Z=>{Z.buttons&&$(Z)},mousemove:Z=>{Z.buttons||$(Z)}};this.register(this.coreMouseService.onProtocolChange(Z=>{Z?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Z)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Z?F.mousemove||(x.addEventListener("mousemove",Y.mousemove),F.mousemove=Y.mousemove):(x.removeEventListener("mousemove",F.mousemove),F.mousemove=null),16&Z?F.wheel||(x.addEventListener("wheel",Y.wheel,{passive:!1}),F.wheel=Y.wheel):(x.removeEventListener("wheel",F.wheel),F.wheel=null),2&Z?F.mouseup||(F.mouseup=Y.mouseup):(this._document.removeEventListener("mouseup",F.mouseup),F.mouseup=null),4&Z?F.mousedrag||(F.mousedrag=Y.mousedrag):(this._document.removeEventListener("mousemove",F.mousedrag),F.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(x,"mousedown",Z=>{if(Z.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Z))return $(Z),F.mouseup&&this._document.addEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.addEventListener("mousemove",F.mousedrag),this.cancel(Z)})),this.register((0,f.addDisposableDomListener)(x,"wheel",Z=>{if(!F.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Z)===!1)return!1;if(!this.buffer.hasScrollback){const L=this.viewport.getLinesScrolled(Z);if(L===0)return;const T=z.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Z.deltaY<0?"A":"B");let N="";for(let K=0;K<Math.abs(L);K++)N+=T;return this.coreService.triggerDataEvent(N,!0),this.cancel(Z,!0)}return this.viewport.handleWheel(Z)?this.cancel(Z):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(x,"touchstart",Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Z),this.cancel(Z)},{passive:!0})),this.register((0,f.addDisposableDomListener)(x,"touchmove",Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Z)?void 0:this.cancel(Z)},{passive:!1}))}refresh(A,x){var $;($=this._renderService)==null||$.refreshRows(A,x)}updateCursorStyle(A){var x;(x=this._selectionService)!=null&&x.shouldColumnSelect(A)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(A,x,$=0){var F;$===1?(super.scrollLines(A,x,$),this.refresh(0,this.rows-1)):(F=this.viewport)==null||F.scrollLines(A)}paste(A){(0,d.paste)(A,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(A){this._customKeyEventHandler=A}attachCustomWheelEventHandler(A){this._customWheelEventHandler=A}registerLinkProvider(A){return this._linkProviderService.registerLinkProvider(A)}registerCharacterJoiner(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const x=this._characterJoinerService.register(A);return this.refresh(0,this.rows-1),x}deregisterCharacterJoiner(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(A)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(A){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+A)}registerDecoration(A){return this._decorationService.registerDecoration(A)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(A,x,$){this._selectionService.setSelection(A,x,$)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var A;(A=this._selectionService)==null||A.clearSelection()}selectAll(){var A;(A=this._selectionService)==null||A.selectAll()}selectLines(A,x){var $;($=this._selectionService)==null||$.selectLines(A,x)}_keyDown(A){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;const x=this.browser.isMac&&this.options.macOptionIsMeta&&A.altKey;if(!x&&!this._compositionHelper.keydown(A))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;x||A.key!=="Dead"&&A.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const $=(0,V.evaluateKeyboardEvent)(A,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(A),$.type===3||$.type===2){const F=this.rows-1;return this.scrollLines($.type===2?-F:F),this.cancel(A,!0)}return $.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,A)||($.cancel&&this.cancel(A,!0),!$.key||!!(A.key&&!A.ctrlKey&&!A.altKey&&!A.metaKey&&A.key.length===1&&A.key.charCodeAt(0)>=65&&A.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):($.key!==z.C0.ETX&&$.key!==z.C0.CR||(this.textarea.value=""),this._onKey.fire({key:$.key,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent($.key,!0),!this.optionsService.rawOptions.screenReaderMode||A.altKey||A.ctrlKey?this.cancel(A,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(A,x){const $=A.isMac&&!this.options.macOptionIsMeta&&x.altKey&&!x.ctrlKey&&!x.metaKey||A.isWindows&&x.altKey&&x.ctrlKey&&!x.metaKey||A.isWindows&&x.getModifierState("AltGraph");return x.type==="keypress"?$:$&&(!x.keyCode||x.keyCode>47)}_keyUp(A){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1||(function(x){return x.keyCode===16||x.keyCode===17||x.keyCode===18}(A)||this.focus(),this.updateCursorStyle(A),this._keyPressHandled=!1)}_keyPress(A){let x;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;if(this.cancel(A),A.charCode)x=A.charCode;else if(A.which===null||A.which===void 0)x=A.keyCode;else{if(A.which===0||A.charCode===0)return!1;x=A.which}return!(!x||(A.altKey||A.ctrlKey||A.metaKey)&&!this._isThirdLevelShift(this.browser,A)||(x=String.fromCharCode(x),this._onKey.fire({key:x,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(x,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(A){if(A.data&&A.inputType==="insertText"&&(!A.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const x=A.data;return this.coreService.triggerDataEvent(x,!0),this.cancel(A),!0}return!1}resize(A,x){A!==this.cols||x!==this.rows?super.resize(A,x):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(A,x){var $,F;($=this._charSizeService)==null||$.measure(),(F=this.viewport)==null||F.syncScrollArea(!0)}clear(){var A;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let x=1;x<this.rows;x++)this.buffer.lines.push(this.buffer.getBlankLine(G.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(A=this.viewport)==null||A.reset(),this.refresh(0,this.rows-1)}}reset(){var x,$;this.options.rows=this.rows,this.options.cols=this.cols;const A=this._customKeyEventHandler;this._setup(),super.reset(),(x=this._selectionService)==null||x.reset(),this._decorationService.reset(),($=this.viewport)==null||$.reset(),this._customKeyEventHandler=A,this.refresh(0,this.rows-1)}clearTextureAtlas(){var A;(A=this._renderService)==null||A.clearTextureAtlas()}_reportFocus(){var A;(A=this.element)!=null&&A.classList.contains("focus")?this.coreService.triggerDataEvent(z.C0.ESC+"[I"):this.coreService.triggerDataEvent(z.C0.ESC+"[O")}_reportWindowsOptions(A){if(this._renderService)switch(A){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const x=this._renderService.dimensions.css.canvas.width.toFixed(0),$=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${z.C0.ESC}[4;${$};${x}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const F=this._renderService.dimensions.css.cell.width.toFixed(0),Y=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${z.C0.ESC}[6;${Y};${F}t`)}}cancel(A,x){if(this.options.cancelEvents||x)return A.preventDefault(),A.stopPropagation(),!1}}i.Terminal=ce},9924:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(n,d=1e3){this._renderCallback=n,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,d,f){this._rowCount=f,n=n!==void 0?n:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=h-this._lastRefreshMs,m=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,d)}}},1680:function(v,i,n){var d=this&&this.__decorate||function(u,o,l,p){var y,C=arguments.length,E=C<3?o:p===null?p=Object.getOwnPropertyDescriptor(o,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(u,o,l,p);else for(var b=u.length-1;b>=0;b--)(y=u[b])&&(E=(C<3?y(E):C>3?y(o,l,E):y(o,l))||E);return C>3&&E&&Object.defineProperty(o,l,E),E},f=this&&this.__param||function(u,o){return function(l,p){o(l,p,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const h=n(3656),g=n(4725),m=n(8460),w=n(844),S=n(2585);let c=i.Viewport=class extends w.Disposable{constructor(u,o,l,p,y,C,E,b){super(),this._viewportElement=u,this._scrollArea=o,this._bufferService=l,this._optionsService=p,this._charSizeService=y,this._renderService=C,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(k=>this._renderDimensions=k)),this._handleThemeChange(b.colors),this.register(b.onChangeColors(k=>this._handleThemeChange(k))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(u){this._viewportElement.style.backgroundColor=u.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(u){if(u)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null}syncScrollArea(u=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(u);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(u)}_handleScroll(u){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const o=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const u=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(u*(this._smoothScrollState.target-this._smoothScrollState.origin)),u<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(u,o){const l=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(o<0&&this._viewportElement.scrollTop!==0||o>0&&l<this._lastRecordedBufferHeight)||(u.cancelable&&u.preventDefault(),!1)}handleWheel(u){const o=this._getPixelsScrolled(u);return o!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+o:this._smoothScrollState.target+=o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=o,this._bubbleScroll(u,o))}scrollLines(u){if(u!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const o=u*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!1})}_getPixelsScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let o=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_LINE?o*=this._currentRowHeight:u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._currentRowHeight*this._bufferService.rows),o}getBufferElements(u,o){var b;let l,p="";const y=[],C=o??this._bufferService.buffer.lines.length,E=this._bufferService.buffer.lines;for(let k=u;k<C;k++){const P=E.get(k);if(!P)continue;const M=(b=E.get(k+1))==null?void 0:b.isWrapped;if(p+=P.translateToString(!M),!M||k===E.length-1){const I=document.createElement("div");I.textContent=p,y.push(I),p.length>0&&(l=I),p=""}}return{bufferElements:y,cursorElement:l}}getLinesScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let o=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=this._currentRowHeight+0,this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(u,o){const l=this._optionsService.rawOptions.fastScrollModifier;return l==="alt"&&o.altKey||l==="ctrl"&&o.ctrlKey||l==="shift"&&o.shiftKey?u*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:u*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(u){this._lastTouchY=u.touches[0].pageY}handleTouchMove(u){const o=this._lastTouchY-u.touches[0].pageY;return this._lastTouchY=u.touches[0].pageY,o!==0&&(this._viewportElement.scrollTop+=o,this._bubbleScroll(u,o))}};i.Viewport=c=d([f(2,S.IBufferService),f(3,S.IOptionsService),f(4,g.ICharSizeService),f(5,g.IRenderService),f(6,g.ICoreBrowserService),f(7,g.IThemeService)],c)},3107:function(v,i,n){var d=this&&this.__decorate||function(S,c,u,o){var l,p=arguments.length,y=p<3?c:o===null?o=Object.getOwnPropertyDescriptor(c,u):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(S,c,u,o);else for(var C=S.length-1;C>=0;C--)(l=S[C])&&(y=(p<3?l(y):p>3?l(c,u,y):l(c,u))||y);return p>3&&y&&Object.defineProperty(c,u,y),y},f=this&&this.__param||function(S,c){return function(u,o){c(u,o,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const h=n(4725),g=n(844),m=n(2585);let w=i.BufferDecorationRenderer=class extends g.Disposable{constructor(S,c,u,o,l){super(),this._screenElement=S,this._bufferService=c,this._coreBrowserService=u,this._decorationService=o,this._renderService=l,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(p=>this._removeDecoration(p))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const S of this._decorationService.decorations)this._renderDecoration(S);this._dimensionsChanged=!1}_renderDecoration(S){this._refreshStyle(S),this._dimensionsChanged&&this._refreshXPosition(S)}_createElement(S){var o;const c=this._coreBrowserService.mainDocument.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((o=S==null?void 0:S.options)==null?void 0:o.layer)==="top"),c.style.width=`${Math.round((S.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(S.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(S.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const u=S.options.x??0;return u&&u>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(S,c),c}_refreshStyle(S){const c=S.marker.line-this._bufferService.buffers.active.ydisp;if(c<0||c>=this._bufferService.rows)S.element&&(S.element.style.display="none",S.onRenderEmitter.fire(S.element));else{let u=this._decorationElements.get(S);u||(u=this._createElement(S),S.element=u,this._decorationElements.set(S,u),this._container.appendChild(u),S.onDispose(()=>{this._decorationElements.delete(S),u.remove()})),u.style.top=c*this._renderService.dimensions.css.cell.height+"px",u.style.display=this._altBufferIsActive?"none":"block",S.onRenderEmitter.fire(u)}}_refreshXPosition(S,c=S.element){if(!c)return;const u=S.options.x??0;(S.options.anchor||"left")==="right"?c.style.right=u?u*this._renderService.dimensions.css.cell.width+"px":"":c.style.left=u?u*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(S){var c;(c=this._decorationElements.get(S))==null||c.remove(),this._decorationElements.delete(S),S.dispose()}};i.BufferDecorationRenderer=w=d([f(1,m.IBufferService),f(2,h.ICoreBrowserService),f(3,m.IDecorationService),f(4,h.IRenderService)],w)},5871:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const d of this._zones)if(d.color===n.options.overviewRulerOptions.color&&d.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,n.marker.line))return;if(this._lineAdjacentToZone(d,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(d,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,d){return d>=n.startBufferLine&&d<=n.endBufferLine}_lineAdjacentToZone(n,d,f){return d>=n.startBufferLine-this._linePadding[f||"full"]&&d<=n.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(n,d){n.startBufferLine=Math.min(n.startBufferLine,d),n.endBufferLine=Math.max(n.endBufferLine,d)}}},5744:function(v,i,n){var d=this&&this.__decorate||function(l,p,y,C){var E,b=arguments.length,k=b<3?p:C===null?C=Object.getOwnPropertyDescriptor(p,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,p,y,C);else for(var P=l.length-1;P>=0;P--)(E=l[P])&&(k=(b<3?E(k):b>3?E(p,y,k):E(p,y))||k);return b>3&&k&&Object.defineProperty(p,y,k),k},f=this&&this.__param||function(l,p){return function(y,C){p(y,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const h=n(5871),g=n(4725),m=n(844),w=n(2585),S={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0};let o=i.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(l,p,y,C,E,b,k){var M;super(),this._viewportElement=l,this._screenElement=p,this._bufferService=y,this._decorationService=C,this._renderService=E,this._optionsService=b,this._coreBrowserService=k,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(M=this._viewportElement.parentElement)==null||M.insertBefore(this._canvas,this._viewportElement);const P=this._canvas.getContext("2d");if(!P)throw new Error("Ctx cannot be null");this._ctx=P,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{var I;(I=this._canvas)==null||I.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const l=Math.floor(this._canvas.width/3),p=Math.ceil(this._canvas.width/3);c.full=this._canvas.width,c.left=l,c.center=p,c.right=l,this._refreshDrawHeightConstants(),u.full=0,u.left=0,u.center=c.left,u.right=c.left+c.center}_refreshDrawHeightConstants(){S.full=Math.round(2*this._coreBrowserService.dpr);const l=this._canvas.height/this._bufferService.buffer.lines.length,p=Math.round(Math.max(Math.min(l,12),6)*this._coreBrowserService.dpr);S.left=p,S.center=p,S.right=p}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*S.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*S.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*S.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*S.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const p of this._decorationService.decorations)this._colorZoneStore.addDecoration(p);this._ctx.lineWidth=1;const l=this._colorZoneStore.zones;for(const p of l)p.position!=="full"&&this._renderColorZone(p);for(const p of l)p.position==="full"&&this._renderColorZone(p);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(l){this._ctx.fillStyle=l.color,this._ctx.fillRect(u[l.position||"full"],Math.round((this._canvas.height-1)*(l.startBufferLine/this._bufferService.buffers.active.lines.length)-S[l.position||"full"]/2),c[l.position||"full"],Math.round((this._canvas.height-1)*((l.endBufferLine-l.startBufferLine)/this._bufferService.buffers.active.lines.length)+S[l.position||"full"]))}_queueRefresh(l,p){this._shouldUpdateDimensions=l||this._shouldUpdateDimensions,this._shouldUpdateAnchor=p||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=o=d([f(2,w.IBufferService),f(3,w.IDecorationService),f(4,g.IRenderService),f(5,w.IOptionsService),f(6,g.ICoreBrowserService)],o)},2950:function(v,i,n){var d=this&&this.__decorate||function(S,c,u,o){var l,p=arguments.length,y=p<3?c:o===null?o=Object.getOwnPropertyDescriptor(c,u):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(S,c,u,o);else for(var C=S.length-1;C>=0;C--)(l=S[C])&&(y=(p<3?l(y):p>3?l(c,u,y):l(c,u))||y);return p>3&&y&&Object.defineProperty(c,u,y),y},f=this&&this.__param||function(S,c){return function(u,o){c(u,o,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const h=n(4725),g=n(2585),m=n(2584);let w=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(S,c,u,o,l,p){this._textarea=S,this._compositionView=c,this._bufferService=u,this._optionsService=o,this._coreService=l,this._renderService=p,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(S){this._compositionView.textContent=S.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(S){if(this._isComposing||this._isSendingComposition){if(S.keyCode===229||S.keyCode===16||S.keyCode===17||S.keyCode===18)return!1;this._finalizeComposition(!1)}return S.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(S){if(this._compositionView.classList.remove("active"),this._isComposing=!1,S){const c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let u;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,u=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),u.length>0&&this._coreService.triggerDataEvent(u,!0)}},0)}else{this._isSendingComposition=!1;const c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){const S=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const c=this._textarea.value,u=c.replace(S,"");this._dataAlreadySent=u,c.length>S.length?this._coreService.triggerDataEvent(u,!0):c.length<S.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):c.length===S.length&&c!==S&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(S){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),u=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,l=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=l+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=u+"px",this._compositionView.style.lineHeight=u+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const p=this._compositionView.getBoundingClientRect();this._textarea.style.left=l+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(p.width,1)+"px",this._textarea.style.height=Math.max(p.height,1)+"px",this._textarea.style.lineHeight=p.height+"px"}S||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=w=d([f(2,g.IBufferService),f(3,g.IOptionsService),f(4,g.ICoreService),f(5,h.IRenderService)],w)},9806:(v,i)=>{function n(d,f,h){const g=h.getBoundingClientRect(),m=d.getComputedStyle(h),w=parseInt(m.getPropertyValue("padding-left")),S=parseInt(m.getPropertyValue("padding-top"));return[f.clientX-g.left-w,f.clientY-g.top-S]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=n,i.getCoords=function(d,f,h,g,m,w,S,c,u){if(!w)return;const o=n(d,f,h);return o?(o[0]=Math.ceil((o[0]+(u?S/2:0))/S),o[1]=Math.ceil(o[1]/c),o[0]=Math.min(Math.max(o[0],1),g+(u?1:0)),o[1]=Math.min(Math.max(o[1],1),m),o):void 0}},9504:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const d=n(2584);function f(c,u,o,l){const p=c-h(c,o),y=u-h(u,o),C=Math.abs(p-y)-function(E,b,k){let P=0;const M=E-h(E,k),I=b-h(b,k);for(let D=0;D<Math.abs(M-I);D++){const U=g(E,b)==="A"?-1:1,q=k.buffer.lines.get(M+U*D);q!=null&&q.isWrapped&&P++}return P}(c,u,o);return S(C,w(g(c,u),l))}function h(c,u){let o=0,l=u.buffer.lines.get(c),p=l==null?void 0:l.isWrapped;for(;p&&c>=0&&c<u.rows;)o++,l=u.buffer.lines.get(--c),p=l==null?void 0:l.isWrapped;return o}function g(c,u){return c>u?"A":"B"}function m(c,u,o,l,p,y){let C=c,E=u,b="";for(;C!==o||E!==l;)C+=p?1:-1,p&&C>y.cols-1?(b+=y.buffer.translateBufferLineToString(E,!1,c,C),C=0,c=0,E++):!p&&C<0&&(b+=y.buffer.translateBufferLineToString(E,!1,0,c+1),C=y.cols-1,c=C,E--);return b+y.buffer.translateBufferLineToString(E,!1,c,C)}function w(c,u){const o=u?"O":"[";return d.C0.ESC+o+c}function S(c,u){c=Math.floor(c);let o="";for(let l=0;l<c;l++)o+=u;return o}i.moveToCellSequence=function(c,u,o,l){const p=o.buffer.x,y=o.buffer.y;if(!o.buffer.hasScrollback)return function(b,k,P,M,I,D){return f(k,M,I,D).length===0?"":S(m(b,k,b,k-h(k,I),!1,I).length,w("D",D))}(p,y,0,u,o,l)+f(y,u,o,l)+function(b,k,P,M,I,D){let U;U=f(k,M,I,D).length>0?M-h(M,I):k;const q=M,G=function(z,V,R,O,B,H){let J;return J=f(R,O,B,H).length>0?O-h(O,B):V,z<R&&J<=O||z>=R&&J<O?"C":"D"}(b,k,P,M,I,D);return S(m(b,U,P,q,G==="C",I).length,w(G,D))}(p,y,c,u,o,l);let C;if(y===u)return C=p>c?"D":"C",S(Math.abs(p-c),w(C,l));C=y>u?"D":"C";const E=Math.abs(y-u);return S(function(b,k){return k.cols-b}(y>u?c:p,o)+(E-1)*o.cols+1+((y>u?p:c)-1),w(C,l))}},1296:function(v,i,n){var d=this&&this.__decorate||function(D,U,q,G){var z,V=arguments.length,R=V<3?U:G===null?G=Object.getOwnPropertyDescriptor(U,q):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(D,U,q,G);else for(var O=D.length-1;O>=0;O--)(z=D[O])&&(R=(V<3?z(R):V>3?z(U,q,R):z(U,q))||R);return V>3&&R&&Object.defineProperty(U,q,R),R},f=this&&this.__param||function(D,U){return function(q,G){U(q,G,D)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const h=n(3787),g=n(2550),m=n(2223),w=n(6171),S=n(6052),c=n(4725),u=n(8055),o=n(8460),l=n(844),p=n(2585),y="xterm-dom-renderer-owner-",C="xterm-rows",E="xterm-fg-",b="xterm-bg-",k="xterm-focus",P="xterm-selection";let M=1,I=i.DomRenderer=class extends l.Disposable{constructor(D,U,q,G,z,V,R,O,B,H,J,te,ce){super(),this._terminal=D,this._document=U,this._element=q,this._screenElement=G,this._viewportElement=z,this._helperContainer=V,this._linkifier2=R,this._charSizeService=B,this._optionsService=H,this._bufferService=J,this._coreBrowserService=te,this._themeService=ce,this._terminalClass=M++,this._rowElements=[],this._selectionRenderModel=(0,S.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new o.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(P),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(ae=>this._injectCss(ae))),this._injectCss(this._themeService.colors),this._rowFactory=O.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(ae=>this._handleLinkHover(ae))),this.register(this._linkifier2.onHideLinkUnderline(ae=>this._handleLinkLeave(ae))),this.register((0,l.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const q of this._rowElements)q.style.width=`${this.dimensions.css.canvas.width}px`,q.style.height=`${this.dimensions.css.cell.height}px`,q.style.lineHeight=`${this.dimensions.css.cell.height}px`,q.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const U=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=U,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let U=`${this._terminalSelector} .${C} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;U+=`${this._terminalSelector} .${C} .xterm-dim { color: ${u.color.multiplyOpacity(D.foreground,.5).css};}`,U+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const q=`blink_underline_${this._terminalClass}`,G=`blink_bar_${this._terminalClass}`,z=`blink_block_${this._terminalClass}`;U+=`@keyframes ${q} { 50% {  border-bottom-style: hidden; }}`,U+=`@keyframes ${G} { 50% {  box-shadow: none; }}`,U+=`@keyframes ${z} { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,U+=`${this._terminalSelector} .${C}.${k} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${q} 1s step-end infinite;}${this._terminalSelector} .${C}.${k} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${G} 1s step-end infinite;}${this._terminalSelector} .${C}.${k} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${z} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${D.cursor.css} !important; color: ${D.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,U+=`${this._terminalSelector} .${P} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${P} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${P} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[V,R]of D.ansi.entries())U+=`${this._terminalSelector} .${E}${V} { color: ${R.css}; }${this._terminalSelector} .${E}${V}.xterm-dim { color: ${u.color.multiplyOpacity(R,.5).css}; }${this._terminalSelector} .${b}${V} { background-color: ${R.css}; }`;U+=`${this._terminalSelector} .${E}${m.INVERTED_DEFAULT_COLOR} { color: ${u.color.opaque(D.background).css}; }${this._terminalSelector} .${E}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${u.color.multiplyOpacity(u.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${b}${m.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=U}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,U){for(let q=this._rowElements.length;q<=U;q++){const G=this._document.createElement("div");this._rowContainer.appendChild(G),this._rowElements.push(G)}for(;this._rowElements.length>U;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,U){this._refreshRowElements(D,U),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(k),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(k),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,U,q){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,U,q),this.renderRows(0,this._bufferService.rows-1),!D||!U)return;this._selectionRenderModel.update(this._terminal,D,U,q);const G=this._selectionRenderModel.viewportStartRow,z=this._selectionRenderModel.viewportEndRow,V=this._selectionRenderModel.viewportCappedStartRow,R=this._selectionRenderModel.viewportCappedEndRow;if(V>=this._bufferService.rows||R<0)return;const O=this._document.createDocumentFragment();if(q){const B=D[0]>U[0];O.appendChild(this._createSelectionElement(V,B?U[0]:D[0],B?D[0]:U[0],R-V+1))}else{const B=G===V?D[0]:0,H=V===z?U[0]:this._bufferService.cols;O.appendChild(this._createSelectionElement(V,B,H));const J=R-V-1;if(O.appendChild(this._createSelectionElement(V+1,0,this._bufferService.cols,J)),V!==R){const te=z===R?U[0]:this._bufferService.cols;O.appendChild(this._createSelectionElement(R,0,te))}}this._selectionContainer.appendChild(O)}_createSelectionElement(D,U,q,G=1){const z=this._document.createElement("div"),V=U*this.dimensions.css.cell.width;let R=this.dimensions.css.cell.width*(q-U);return V+R>this.dimensions.css.canvas.width&&(R=this.dimensions.css.canvas.width-V),z.style.height=G*this.dimensions.css.cell.height+"px",z.style.top=D*this.dimensions.css.cell.height+"px",z.style.left=`${V}px`,z.style.width=`${R}px`,z}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,U){const q=this._bufferService.buffer,G=q.ybase+q.y,z=Math.min(q.x,this._bufferService.cols-1),V=this._optionsService.rawOptions.cursorBlink,R=this._optionsService.rawOptions.cursorStyle,O=this._optionsService.rawOptions.cursorInactiveStyle;for(let B=D;B<=U;B++){const H=B+q.ydisp,J=this._rowElements[B],te=q.lines.get(H);if(!J||!te)break;J.replaceChildren(...this._rowFactory.createRow(te,H,H===G,R,O,z,V,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,U,q,G,z,V){q<0&&(D=0),G<0&&(U=0);const R=this._bufferService.rows-1;q=Math.max(Math.min(q,R),0),G=Math.max(Math.min(G,R),0),z=Math.min(z,this._bufferService.cols);const O=this._bufferService.buffer,B=O.ybase+O.y,H=Math.min(O.x,z-1),J=this._optionsService.rawOptions.cursorBlink,te=this._optionsService.rawOptions.cursorStyle,ce=this._optionsService.rawOptions.cursorInactiveStyle;for(let ae=q;ae<=G;++ae){const A=ae+O.ydisp,x=this._rowElements[ae],$=O.lines.get(A);if(!x||!$)break;x.replaceChildren(...this._rowFactory.createRow($,A,A===B,te,ce,H,J,this.dimensions.css.cell.width,this._widthCache,V?ae===q?D:0:-1,V?(ae===G?U:z)-1:-1))}}};i.DomRenderer=I=d([f(7,p.IInstantiationService),f(8,c.ICharSizeService),f(9,p.IOptionsService),f(10,p.IBufferService),f(11,c.ICoreBrowserService),f(12,c.IThemeService)],I)},3787:function(v,i,n){var d=this&&this.__decorate||function(C,E,b,k){var P,M=arguments.length,I=M<3?E:k===null?k=Object.getOwnPropertyDescriptor(E,b):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(C,E,b,k);else for(var D=C.length-1;D>=0;D--)(P=C[D])&&(I=(M<3?P(I):M>3?P(E,b,I):P(E,b))||I);return M>3&&I&&Object.defineProperty(E,b,I),I},f=this&&this.__param||function(C,E){return function(b,k){E(b,k,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const h=n(2223),g=n(643),m=n(511),w=n(2585),S=n(8055),c=n(4725),u=n(4269),o=n(6171),l=n(3734);let p=i.DomRendererRowFactory=class{constructor(C,E,b,k,P,M,I){this._document=C,this._characterJoinerService=E,this._optionsService=b,this._coreBrowserService=k,this._coreService=P,this._decorationService=M,this._themeService=I,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,E,b){this._selectionStart=C,this._selectionEnd=E,this._columnSelectMode=b}createRow(C,E,b,k,P,M,I,D,U,q,G){const z=[],V=this._characterJoinerService.getJoinedCharacters(E),R=this._themeService.colors;let O,B=C.getNoBgTrimmedLength();b&&B<M+1&&(B=M+1);let H=0,J="",te=0,ce=0,ae=0,A=!1,x=0,$=!1,F=0;const Y=[],Z=q!==-1&&G!==-1;for(let L=0;L<B;L++){C.loadCell(L,this._workCell);let T=this._workCell.getWidth();if(T===0)continue;let N=!1,K=L,j=this._workCell;if(V.length>0&&L===V[0][0]){N=!0;const ve=V.shift();j=new u.JoinedCellData(this._workCell,C.translateToString(!0,ve[0],ve[1]),ve[1]-ve[0]),K=ve[1]-1,T=j.getWidth()}const X=this._isCellInSelection(L,E),ie=b&&L===M,se=Z&&L>=q&&L<=G;let ee=!1;this._decorationService.forEachDecorationAtCell(L,E,void 0,ve=>{ee=!0});let Q=j.getChars()||g.WHITESPACE_CELL_CHAR;if(Q===" "&&(j.isUnderline()||j.isOverline())&&(Q=""),F=T*D-U.get(Q,j.isBold(),j.isItalic()),O){if(H&&(X&&$||!X&&!$&&j.bg===te)&&(X&&$&&R.selectionForeground||j.fg===ce)&&j.extended.ext===ae&&se===A&&F===x&&!ie&&!N&&!ee){j.isInvisible()?J+=g.WHITESPACE_CELL_CHAR:J+=Q,H++;continue}H&&(O.textContent=J),O=this._document.createElement("span"),H=0,J=""}else O=this._document.createElement("span");if(te=j.bg,ce=j.fg,ae=j.extended.ext,A=se,x=F,$=X,N&&M>=L&&M<=K&&(M=L),!this._coreService.isCursorHidden&&ie&&this._coreService.isCursorInitialized){if(Y.push("xterm-cursor"),this._coreBrowserService.isFocused)I&&Y.push("xterm-cursor-blink"),Y.push(k==="bar"?"xterm-cursor-bar":k==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(P)switch(P){case"outline":Y.push("xterm-cursor-outline");break;case"block":Y.push("xterm-cursor-block");break;case"bar":Y.push("xterm-cursor-bar");break;case"underline":Y.push("xterm-cursor-underline")}}if(j.isBold()&&Y.push("xterm-bold"),j.isItalic()&&Y.push("xterm-italic"),j.isDim()&&Y.push("xterm-dim"),J=j.isInvisible()?g.WHITESPACE_CELL_CHAR:j.getChars()||g.WHITESPACE_CELL_CHAR,j.isUnderline()&&(Y.push(`xterm-underline-${j.extended.underlineStyle}`),J===" "&&(J=""),!j.isUnderlineColorDefault()))if(j.isUnderlineColorRGB())O.style.textDecorationColor=`rgb(${l.AttributeData.toColorRGB(j.getUnderlineColor()).join(",")})`;else{let ve=j.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&j.isBold()&&ve<8&&(ve+=8),O.style.textDecorationColor=R.ansi[ve].css}j.isOverline()&&(Y.push("xterm-overline"),J===" "&&(J="")),j.isStrikethrough()&&Y.push("xterm-strikethrough"),se&&(O.style.textDecoration="underline");let oe=j.getFgColor(),re=j.getFgColorMode(),ne=j.getBgColor(),le=j.getBgColorMode();const _e=!!j.isInverse();if(_e){const ve=oe;oe=ne,ne=ve;const Fe=re;re=le,le=Fe}let ge,me,Le,Ae=!1;switch(this._decorationService.forEachDecorationAtCell(L,E,void 0,ve=>{ve.options.layer!=="top"&&Ae||(ve.backgroundColorRGB&&(le=50331648,ne=ve.backgroundColorRGB.rgba>>8&16777215,ge=ve.backgroundColorRGB),ve.foregroundColorRGB&&(re=50331648,oe=ve.foregroundColorRGB.rgba>>8&16777215,me=ve.foregroundColorRGB),Ae=ve.options.layer==="top")}),!Ae&&X&&(ge=this._coreBrowserService.isFocused?R.selectionBackgroundOpaque:R.selectionInactiveBackgroundOpaque,ne=ge.rgba>>8&16777215,le=50331648,Ae=!0,R.selectionForeground&&(re=50331648,oe=R.selectionForeground.rgba>>8&16777215,me=R.selectionForeground)),Ae&&Y.push("xterm-decoration-top"),le){case 16777216:case 33554432:Le=R.ansi[ne],Y.push(`xterm-bg-${ne}`);break;case 50331648:Le=S.channels.toColor(ne>>16,ne>>8&255,255&ne),this._addStyle(O,`background-color:#${y((ne>>>0).toString(16),"0",6)}`);break;default:_e?(Le=R.foreground,Y.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):Le=R.background}switch(ge||j.isDim()&&(ge=S.color.multiplyOpacity(Le,.5)),re){case 16777216:case 33554432:j.isBold()&&oe<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(oe+=8),this._applyMinimumContrast(O,Le,R.ansi[oe],j,ge,void 0)||Y.push(`xterm-fg-${oe}`);break;case 50331648:const ve=S.channels.toColor(oe>>16&255,oe>>8&255,255&oe);this._applyMinimumContrast(O,Le,ve,j,ge,me)||this._addStyle(O,`color:#${y(oe.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(O,Le,R.foreground,j,ge,me)||_e&&Y.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}Y.length&&(O.className=Y.join(" "),Y.length=0),ie||N||ee?O.textContent=J:H++,F!==this.defaultSpacing&&(O.style.letterSpacing=`${F}px`),z.push(O),L=K}return O&&H&&(O.textContent=J),z}_applyMinimumContrast(C,E,b,k,P,M){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,o.treatGlyphAsBackgroundColor)(k.getCode()))return!1;const I=this._getContrastCache(k);let D;if(P||M||(D=I.getColor(E.rgba,b.rgba)),D===void 0){const U=this._optionsService.rawOptions.minimumContrastRatio/(k.isDim()?2:1);D=S.color.ensureContrastRatio(P||E,M||b,U),I.setColor((P||E).rgba,(M||b).rgba,D??null)}return!!D&&(this._addStyle(C,`color:${D.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,E){C.setAttribute("style",`${C.getAttribute("style")||""}${E};`)}_isCellInSelection(C,E){const b=this._selectionStart,k=this._selectionEnd;return!(!b||!k)&&(this._columnSelectMode?b[0]<=k[0]?C>=b[0]&&E>=b[1]&&C<k[0]&&E<=k[1]:C<b[0]&&E>=b[1]&&C>=k[0]&&E<=k[1]:E>b[1]&&E<k[1]||b[1]===k[1]&&E===b[1]&&C>=b[0]&&C<k[0]||b[1]<k[1]&&E===k[1]&&C<k[0]||b[1]<k[1]&&E===b[1]&&C>=b[0])}};function y(C,E,b){for(;C.length<b;)C=E+C;return C}i.DomRendererRowFactory=p=d([f(1,c.ICharacterJoinerService),f(2,w.IOptionsService),f(3,c.ICoreBrowserService),f(4,w.ICoreService),f(5,w.IDecorationService),f(6,c.IThemeService)],p)},2550:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(n,d){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const f=n.createElement("span");f.classList.add("xterm-char-measure-element");const h=n.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const g=n.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontStyle="italic";const m=n.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[f,h,g,m],this._container.appendChild(f),this._container.appendChild(h),this._container.appendChild(g),this._container.appendChild(m),d.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,d,f,h){n===this._font&&d===this._fontSize&&f===this._weight&&h===this._weightBold||(this._font=n,this._fontSize=d,this._weight=f,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(n,d,f){let h=0;if(!d&&!f&&n.length===1&&(h=n.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const w=this._measure(n,0);return w>0&&(this._flat[h]=w),w}let g=n;d&&(g+="B"),f&&(g+="I");let m=this._holey.get(g);if(m===void 0){let w=0;d&&(w|=1),f&&(w|=2),m=this._measure(n,w),m>0&&this._holey.set(g,m)}return m}_measure(n,d){const f=this._measureElements[d];return f.textContent=n.repeat(32),f.offsetWidth/32}}},2223:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const d=n(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(v,i)=>{function n(f){return 57508<=f&&f<=57558}function d(f){return f>=128512&&f<=128591||f>=127744&&f<=128511||f>=128640&&f<=128767||f>=9728&&f<=9983||f>=9984&&f<=10175||f>=65024&&f<=65039||f>=129280&&f<=129535||f>=127462&&f<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f},i.isPowerlineGlyph=n,i.isRestrictedPowerlineGlyph=function(f){return 57520<=f&&f<=57527},i.isEmoji=d,i.allowRescaling=function(f,h,g,m){return h===1&&g>Math.ceil(1.5*m)&&f!==void 0&&f>255&&!d(f)&&!n(f)&&!function(w){return 57344<=w&&w<=63743}(f)},i.treatGlyphAsBackgroundColor=function(f){return n(f)||function(h){return 9472<=h&&h<=9631}(f)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(f,h,g=0){return(f-(2*Math.round(h)-g))%(2*Math.round(h))}},6052:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class n{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(f,h,g,m=!1){if(this.selectionStart=h,this.selectionEnd=g,!h||!g||h[0]===g[0]&&h[1]===g[1])return void this.clear();const w=f.buffers.active.ydisp,S=h[1]-w,c=g[1]-w,u=Math.max(S,0),o=Math.min(c,f.rows-1);u>=f.rows||o<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=S,this.viewportEndRow=c,this.viewportCappedStartRow=u,this.viewportCappedEndRow=o,this.startCol=h[0],this.endCol=g[0])}isCellSelected(f,h,g){return!!this.hasSelection&&(g-=f.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&g>=this.viewportCappedStartRow&&h<this.endCol&&g<=this.viewportCappedEndRow:h<this.startCol&&g>=this.viewportCappedStartRow&&h>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new n}},456:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,d=this.selectionEnd;return!(!n||!d)&&(n[1]>d[1]||n[1]===d[1]&&n[0]>d[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(v,i,n){var d=this&&this.__decorate||function(o,l,p,y){var C,E=arguments.length,b=E<3?l:y===null?y=Object.getOwnPropertyDescriptor(l,p):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(o,l,p,y);else for(var k=o.length-1;k>=0;k--)(C=o[k])&&(b=(E<3?C(b):E>3?C(l,p,b):C(l,p))||b);return E>3&&b&&Object.defineProperty(l,p,b),b},f=this&&this.__param||function(o,l){return function(p,y){l(p,y,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const h=n(2585),g=n(8460),m=n(844);let w=i.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,l,p){super(),this._optionsService=p,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new u(this._optionsService))}catch{this._measureStrategy=this.register(new c(o,l,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};i.CharSizeService=w=d([f(2,h.IOptionsService)],w);class S extends m.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(l,p){l!==void 0&&l>0&&p!==void 0&&p>0&&(this._result.width=l,this._result.height=p)}}class c extends S{constructor(l,p,y){super(),this._document=l,this._parentElement=p,this._optionsService=y,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class u extends S{constructor(l){super(),this._optionsService=l,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const p=this._ctx.measureText("W");if(!("width"in p&&"fontBoundingBoxAscent"in p&&"fontBoundingBoxDescent"in p))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const l=this._ctx.measureText("W");return this._validateAndSet(l.width,l.fontBoundingBoxAscent+l.fontBoundingBoxDescent),this._result}}},4269:function(v,i,n){var d=this&&this.__decorate||function(u,o,l,p){var y,C=arguments.length,E=C<3?o:p===null?p=Object.getOwnPropertyDescriptor(o,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(u,o,l,p);else for(var b=u.length-1;b>=0;b--)(y=u[b])&&(E=(C<3?y(E):C>3?y(o,l,E):y(o,l))||E);return C>3&&E&&Object.defineProperty(o,l,E),E},f=this&&this.__param||function(u,o){return function(l,p){o(l,p,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=n(3734),g=n(643),m=n(511),w=n(2585);class S extends h.AttributeData{constructor(o,l,p){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=l,this._width=p}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=S;let c=i.CharacterJoinerService=class ta{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(o){const l={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(l),l.id}deregister(o){for(let l=0;l<this._characterJoiners.length;l++)if(this._characterJoiners[l].id===o)return this._characterJoiners.splice(l,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const l=this._bufferService.buffer.lines.get(o);if(!l||l.length===0)return[];const p=[],y=l.translateToString(!0);let C=0,E=0,b=0,k=l.getFg(0),P=l.getBg(0);for(let M=0;M<l.getTrimmedLength();M++)if(l.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==k||this._workCell.bg!==P){if(M-C>1){const I=this._getJoinedRanges(y,b,E,l,C);for(let D=0;D<I.length;D++)p.push(I[D])}C=M,b=E,k=this._workCell.fg,P=this._workCell.bg}E+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const M=this._getJoinedRanges(y,b,E,l,C);for(let I=0;I<M.length;I++)p.push(M[I])}return p}_getJoinedRanges(o,l,p,y,C){const E=o.substring(l,p);let b=[];try{b=this._characterJoiners[0].handler(E)}catch(k){console.error(k)}for(let k=1;k<this._characterJoiners.length;k++)try{const P=this._characterJoiners[k].handler(E);for(let M=0;M<P.length;M++)ta._mergeRanges(b,P[M])}catch(P){console.error(P)}return this._stringRangesToCellRanges(b,y,C),b}_stringRangesToCellRanges(o,l,p){let y=0,C=!1,E=0,b=o[y];if(b){for(let k=p;k<this._bufferService.cols;k++){const P=l.getWidth(k),M=l.getString(k).length||g.WHITESPACE_CELL_CHAR.length;if(P!==0){if(!C&&b[0]<=E&&(b[0]=k,C=!0),b[1]<=E){if(b[1]=k,b=o[++y],!b)break;b[0]<=E?(b[0]=k,C=!0):C=!1}E+=M}}b&&(b[1]=this._bufferService.cols)}}static _mergeRanges(o,l){let p=!1;for(let y=0;y<o.length;y++){const C=o[y];if(p){if(l[1]<=C[0])return o[y-1][1]=l[1],o;if(l[1]<=C[1])return o[y-1][1]=Math.max(l[1],C[1]),o.splice(y,1),o;o.splice(y,1),y--}else{if(l[1]<=C[0])return o.splice(y,0,l),o;if(l[1]<=C[1])return C[0]=Math.min(l[0],C[0]),o;l[0]<C[1]&&(C[0]=Math.min(l[0],C[0]),p=!0)}}return p?o[o.length-1][1]=l[1]:o.push(l),o}};i.CharacterJoinerService=c=d([f(0,w.IBufferService)],c)},5114:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const d=n(844),f=n(8460),h=n(3656);class g extends d.Disposable{constructor(S,c,u){super(),this._textarea=S,this._window=c,this.mainDocument=u,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new m(this._window),this._onDprChange=this.register(new f.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new f.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(o=>this._screenDprMonitor.setWindow(o))),this.register((0,f.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(S){this._window!==S&&(this._window=S,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=g;class m extends d.Disposable{constructor(S){super(),this._parentWindow=S,this._windowResizeListener=this.register(new d.MutableDisposable),this._onDprChange=this.register(new f.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,d.toDisposable)(()=>this.clearListener()))}setWindow(S){this._parentWindow=S,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var S;this._outerListener&&((S=this._resolutionMediaMatchList)==null||S.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const d=n(844);class f extends d.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,d.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(g){return this.linkProviders.push(g),{dispose:()=>{const m=this.linkProviders.indexOf(g);m!==-1&&this.linkProviders.splice(m,1)}}}}i.LinkProviderService=f},8934:function(v,i,n){var d=this&&this.__decorate||function(w,S,c,u){var o,l=arguments.length,p=l<3?S:u===null?u=Object.getOwnPropertyDescriptor(S,c):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(w,S,c,u);else for(var y=w.length-1;y>=0;y--)(o=w[y])&&(p=(l<3?o(p):l>3?o(S,c,p):o(S,c))||p);return l>3&&p&&Object.defineProperty(S,c,p),p},f=this&&this.__param||function(w,S){return function(c,u){S(c,u,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const h=n(4725),g=n(9806);let m=i.MouseService=class{constructor(w,S){this._renderService=w,this._charSizeService=S}getCoords(w,S,c,u,o){return(0,g.getCoords)(window,w,S,c,u,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(w,S){const c=(0,g.getCoordsRelativeToElement)(window,w,S);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};i.MouseService=m=d([f(0,h.IRenderService),f(1,h.ICharSizeService)],m)},3230:function(v,i,n){var d=this&&this.__decorate||function(o,l,p,y){var C,E=arguments.length,b=E<3?l:y===null?y=Object.getOwnPropertyDescriptor(l,p):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(o,l,p,y);else for(var k=o.length-1;k>=0;k--)(C=o[k])&&(b=(E<3?C(b):E>3?C(l,p,b):C(l,p))||b);return E>3&&b&&Object.defineProperty(l,p,b),b},f=this&&this.__param||function(o,l){return function(p,y){l(p,y,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const h=n(6193),g=n(4725),m=n(8460),w=n(844),S=n(7226),c=n(2585);let u=i.RenderService=class extends w.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(o,l,p,y,C,E,b,k){super(),this._rowCount=o,this._charSizeService=y,this._renderer=this.register(new w.MutableDisposable),this._pausedResizeTask=new S.DebouncedIdleTask,this._observerDisposable=this.register(new w.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new m.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new m.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new m.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((P,M)=>this._renderRows(P,M),b),this.register(this._renderDebouncer),this.register(b.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(E.onResize(()=>this._fullRefresh())),this.register(E.buffers.onBufferActivate(()=>{var P;return(P=this._renderer.value)==null?void 0:P.clear()})),this.register(p.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(p.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(E.cols,E.rows),this._fullRefresh()})),this.register(p.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(E.buffer.y,E.buffer.y,!0))),this.register(k.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(b.window,l),this.register(b.onWindowChange(P=>this._registerIntersectionObserver(P,l)))}_registerIntersectionObserver(o,l){if("IntersectionObserver"in o){const p=new o.IntersectionObserver(y=>this._handleIntersectionChange(y[y.length-1]),{threshold:0});p.observe(l),this._observerDisposable.value=(0,w.toDisposable)(()=>p.disconnect())}}_handleIntersectionChange(o){this._isPaused=o.isIntersecting===void 0?o.intersectionRatio===0:!o.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(o,l,p=!1){this._isPaused?this._needsFullRefresh=!0:(p||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(o,l,this._rowCount))}_renderRows(o,l){this._renderer.value&&(o=Math.min(o,this._rowCount-1),l=Math.min(l,this._rowCount-1),this._renderer.value.renderRows(o,l),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:o,end:l}),this._onRender.fire({start:o,end:l}),this._isNextRenderRedrawOnly=!0)}resize(o,l){this._rowCount=l,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(o){this._renderer.value=o,this._renderer.value&&(this._renderer.value.onRequestRedraw(l=>this.refreshRows(l.start,l.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(o){return this._renderDebouncer.addRefreshCallback(o)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var o,l;this._renderer.value&&((l=(o=this._renderer.value).clearTextureAtlas)==null||l.call(o),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(o,l){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var p;return(p=this._renderer.value)==null?void 0:p.handleResize(o,l)}):this._renderer.value.handleResize(o,l),this._fullRefresh())}handleCharSizeChanged(){var o;(o=this._renderer.value)==null||o.handleCharSizeChanged()}handleBlur(){var o;(o=this._renderer.value)==null||o.handleBlur()}handleFocus(){var o;(o=this._renderer.value)==null||o.handleFocus()}handleSelectionChanged(o,l,p){var y;this._selectionState.start=o,this._selectionState.end=l,this._selectionState.columnSelectMode=p,(y=this._renderer.value)==null||y.handleSelectionChanged(o,l,p)}handleCursorMove(){var o;(o=this._renderer.value)==null||o.handleCursorMove()}clear(){var o;(o=this._renderer.value)==null||o.clear()}};i.RenderService=u=d([f(2,c.IOptionsService),f(3,g.ICharSizeService),f(4,c.IDecorationService),f(5,c.IBufferService),f(6,g.ICoreBrowserService),f(7,g.IThemeService)],u)},9312:function(v,i,n){var d=this&&this.__decorate||function(b,k,P,M){var I,D=arguments.length,U=D<3?k:M===null?M=Object.getOwnPropertyDescriptor(k,P):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(b,k,P,M);else for(var q=b.length-1;q>=0;q--)(I=b[q])&&(U=(D<3?I(U):D>3?I(k,P,U):I(k,P))||U);return D>3&&U&&Object.defineProperty(k,P,U),U},f=this&&this.__param||function(b,k){return function(P,M){k(P,M,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const h=n(9806),g=n(9504),m=n(456),w=n(4725),S=n(8460),c=n(844),u=n(6114),o=n(4841),l=n(511),p=n(2585),y="",C=new RegExp(y,"g");let E=i.SelectionService=class extends c.Disposable{constructor(b,k,P,M,I,D,U,q,G){super(),this._element=b,this._screenElement=k,this._linkifier=P,this._bufferService=M,this._coreService=I,this._mouseService=D,this._optionsService=U,this._renderService=q,this._coreBrowserService=G,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new l.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new S.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new S.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new S.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=z=>this._handleMouseMove(z),this._mouseUpListener=z=>this._handleMouseUp(z),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(z=>this._handleTrim(z)),this.register(this._bufferService.buffers.onBufferActivate(z=>this._handleBufferActivate(z))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const b=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!b||!k||b[0]===k[0]&&b[1]===k[1])}get selectionText(){const b=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!b||!k)return"";const P=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(b[0]===k[0])return"";const I=b[0]<k[0]?b[0]:k[0],D=b[0]<k[0]?k[0]:b[0];for(let U=b[1];U<=k[1];U++){const q=P.translateBufferLineToString(U,!0,I,D);M.push(q)}}else{const I=b[1]===k[1]?k[0]:void 0;M.push(P.translateBufferLineToString(b[1],!0,b[0],I));for(let D=b[1]+1;D<=k[1]-1;D++){const U=P.lines.get(D),q=P.translateBufferLineToString(D,!0);U!=null&&U.isWrapped?M[M.length-1]+=q:M.push(q)}if(b[1]!==k[1]){const D=P.lines.get(k[1]),U=P.translateBufferLineToString(k[1],!0,0,k[0]);D&&D.isWrapped?M[M.length-1]+=U:M.push(U)}}return M.map(I=>I.replace(C," ")).join(u.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(b){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),u.isLinux&&b&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(b){const k=this._getMouseBufferCoords(b),P=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(P&&M&&k)&&this._areCoordsInSelection(k,P,M)}isCellInSelection(b,k){const P=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!P||!M)&&this._areCoordsInSelection([b,k],P,M)}_areCoordsInSelection(b,k,P){return b[1]>k[1]&&b[1]<P[1]||k[1]===P[1]&&b[1]===k[1]&&b[0]>=k[0]&&b[0]<P[0]||k[1]<P[1]&&b[1]===P[1]&&b[0]<P[0]||k[1]<P[1]&&b[1]===k[1]&&b[0]>=k[0]}_selectWordAtCursor(b,k){var I,D;const P=(D=(I=this._linkifier.currentLink)==null?void 0:I.link)==null?void 0:D.range;if(P)return this._model.selectionStart=[P.start.x-1,P.start.y-1],this._model.selectionStartLength=(0,o.getRangeLength)(P,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const M=this._getMouseBufferCoords(b);return!!M&&(this._selectWordAt(M,k),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(b,k){this._model.clearSelection(),b=Math.max(b,0),k=Math.min(k,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,b],this._model.selectionEnd=[this._bufferService.cols,k],this.refresh(),this._onSelectionChange.fire()}_handleTrim(b){this._model.handleTrim(b)&&this.refresh()}_getMouseBufferCoords(b){const k=this._mouseService.getCoords(b,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(k)return k[0]--,k[1]--,k[1]+=this._bufferService.buffer.ydisp,k}_getMouseEventScrollAmount(b){let k=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,b,this._screenElement)[1];const P=this._renderService.dimensions.css.canvas.height;return k>=0&&k<=P?0:(k>P&&(k-=P),k=Math.min(Math.max(k,-50),50),k/=50,k/Math.abs(k)+Math.round(14*k))}shouldForceSelection(b){return u.isMac?b.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:b.shiftKey}handleMouseDown(b){if(this._mouseDownTimeStamp=b.timeStamp,(b.button!==2||!this.hasSelection)&&b.button===0){if(!this._enabled){if(!this.shouldForceSelection(b))return;b.stopPropagation()}b.preventDefault(),this._dragScrollAmount=0,this._enabled&&b.shiftKey?this._handleIncrementalClick(b):b.detail===1?this._handleSingleClick(b):b.detail===2?this._handleDoubleClick(b):b.detail===3&&this._handleTripleClick(b),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(b){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(b))}_handleSingleClick(b){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(b)?3:0,this._model.selectionStart=this._getMouseBufferCoords(b),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const k=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);k&&k.length!==this._model.selectionStart[0]&&k.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(b){this._selectWordAtCursor(b,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(b){const k=this._getMouseBufferCoords(b);k&&(this._activeSelectionMode=2,this._selectLineAt(k[1]))}shouldColumnSelect(b){return b.altKey&&!(u.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(b){if(b.stopImmediatePropagation(),!this._model.selectionStart)return;const k=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(b),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(b),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const P=this._bufferService.buffer;if(this._model.selectionEnd[1]<P.lines.length){const M=P.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}k&&k[0]===this._model.selectionEnd[0]&&k[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const b=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(b.ydisp+this._bufferService.rows,b.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=b.ydisp),this.refresh()}}_handleMouseUp(b){const k=b.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&k<500&&b.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const P=this._mouseService.getCoords(b,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(P&&P[0]!==void 0&&P[1]!==void 0){const M=(0,g.moveToCellSequence)(P[0]-1,P[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const b=this._model.finalSelectionStart,k=this._model.finalSelectionEnd,P=!(!b||!k||b[0]===k[0]&&b[1]===k[1]);P?b&&k&&(this._oldSelectionStart&&this._oldSelectionEnd&&b[0]===this._oldSelectionStart[0]&&b[1]===this._oldSelectionStart[1]&&k[0]===this._oldSelectionEnd[0]&&k[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(b,k,P)):this._oldHasSelection&&this._fireOnSelectionChange(b,k,P)}_fireOnSelectionChange(b,k,P){this._oldSelectionStart=b,this._oldSelectionEnd=k,this._oldHasSelection=P,this._onSelectionChange.fire()}_handleBufferActivate(b){this.clearSelection(),this._trimListener.dispose(),this._trimListener=b.activeBuffer.lines.onTrim(k=>this._handleTrim(k))}_convertViewportColToCharacterIndex(b,k){let P=k;for(let M=0;k>=M;M++){const I=b.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?P--:I>1&&k!==M&&(P+=I-1)}return P}setSelection(b,k,P){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[b,k],this._model.selectionStartLength=P,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(b){this._isClickInSelection(b)||(this._selectWordAtCursor(b,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(b,k,P=!0,M=!0){if(b[0]>=this._bufferService.cols)return;const I=this._bufferService.buffer,D=I.lines.get(b[1]);if(!D)return;const U=I.translateBufferLineToString(b[1],!1);let q=this._convertViewportColToCharacterIndex(D,b[0]),G=q;const z=b[0]-q;let V=0,R=0,O=0,B=0;if(U.charAt(q)===" "){for(;q>0&&U.charAt(q-1)===" ";)q--;for(;G<U.length&&U.charAt(G+1)===" ";)G++}else{let te=b[0],ce=b[0];D.getWidth(te)===0&&(V++,te--),D.getWidth(ce)===2&&(R++,ce++);const ae=D.getString(ce).length;for(ae>1&&(B+=ae-1,G+=ae-1);te>0&&q>0&&!this._isCharWordSeparator(D.loadCell(te-1,this._workCell));){D.loadCell(te-1,this._workCell);const A=this._workCell.getChars().length;this._workCell.getWidth()===0?(V++,te--):A>1&&(O+=A-1,q-=A-1),q--,te--}for(;ce<D.length&&G+1<U.length&&!this._isCharWordSeparator(D.loadCell(ce+1,this._workCell));){D.loadCell(ce+1,this._workCell);const A=this._workCell.getChars().length;this._workCell.getWidth()===2?(R++,ce++):A>1&&(B+=A-1,G+=A-1),G++,ce++}}G++;let H=q+z-V+O,J=Math.min(this._bufferService.cols,G-q+V+R-O-B);if(k||U.slice(q,G).trim()!==""){if(P&&H===0&&D.getCodePoint(0)!==32){const te=I.lines.get(b[1]-1);if(te&&D.isWrapped&&te.getCodePoint(this._bufferService.cols-1)!==32){const ce=this._getWordAt([this._bufferService.cols-1,b[1]-1],!1,!0,!1);if(ce){const ae=this._bufferService.cols-ce.start;H-=ae,J+=ae}}}if(M&&H+J===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){const te=I.lines.get(b[1]+1);if(te!=null&&te.isWrapped&&te.getCodePoint(0)!==32){const ce=this._getWordAt([0,b[1]+1],!1,!1,!0);ce&&(J+=ce.length)}}return{start:H,length:J}}}_selectWordAt(b,k){const P=this._getWordAt(b,k);if(P){for(;P.start<0;)P.start+=this._bufferService.cols,b[1]--;this._model.selectionStart=[P.start,b[1]],this._model.selectionStartLength=P.length}}_selectToWordAt(b){const k=this._getWordAt(b,!0);if(k){let P=b[1];for(;k.start<0;)k.start+=this._bufferService.cols,P--;if(!this._model.areSelectionValuesReversed())for(;k.start+k.length>this._bufferService.cols;)k.length-=this._bufferService.cols,P++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?k.start:k.start+k.length,P]}}_isCharWordSeparator(b){return b.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(b.getChars())>=0}_selectLineAt(b){const k=this._bufferService.buffer.getWrappedRangeForLine(b),P={start:{x:0,y:k.first},end:{x:this._bufferService.cols-1,y:k.last}};this._model.selectionStart=[0,k.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,o.getRangeLength)(P,this._bufferService.cols)}};i.SelectionService=E=d([f(3,p.IBufferService),f(4,p.ICoreService),f(5,w.IMouseService),f(6,p.IOptionsService),f(7,w.IRenderService),f(8,w.ICoreBrowserService)],E)},4725:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const d=n(8343);i.ICharSizeService=(0,d.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),i.IMouseService=(0,d.createDecorator)("MouseService"),i.IRenderService=(0,d.createDecorator)("RenderService"),i.ISelectionService=(0,d.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,d.createDecorator)("ThemeService"),i.ILinkProviderService=(0,d.createDecorator)("LinkProviderService")},6731:function(v,i,n){var d=this&&this.__decorate||function(E,b,k,P){var M,I=arguments.length,D=I<3?b:P===null?P=Object.getOwnPropertyDescriptor(b,k):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(E,b,k,P);else for(var U=E.length-1;U>=0;U--)(M=E[U])&&(D=(I<3?M(D):I>3?M(b,k,D):M(b,k))||D);return I>3&&D&&Object.defineProperty(b,k,D),D},f=this&&this.__param||function(E,b){return function(k,P){b(k,P,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const h=n(7239),g=n(8055),m=n(8460),w=n(844),S=n(2585),c=g.css.toColor("#ffffff"),u=g.css.toColor("#000000"),o=g.css.toColor("#ffffff"),l=g.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],b=[0,95,135,175,215,255];for(let k=0;k<216;k++){const P=b[k/36%6|0],M=b[k/6%6|0],I=b[k%6];E.push({css:g.channels.toCss(P,M,I),rgba:g.channels.toRgba(P,M,I)})}for(let k=0;k<24;k++){const P=8+10*k;E.push({css:g.channels.toCss(P,P,P),rgba:g.channels.toRgba(P,P,P)})}return E})());let y=i.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:u,cursor:o,cursorAccent:l,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:g.color.blend(u,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:g.color.blend(u,p),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const b=this._colors;if(b.foreground=C(E.foreground,c),b.background=C(E.background,u),b.cursor=C(E.cursor,o),b.cursorAccent=C(E.cursorAccent,l),b.selectionBackgroundTransparent=C(E.selectionBackground,p),b.selectionBackgroundOpaque=g.color.blend(b.background,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundTransparent=C(E.selectionInactiveBackground,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundOpaque=g.color.blend(b.background,b.selectionInactiveBackgroundTransparent),b.selectionForeground=E.selectionForeground?C(E.selectionForeground,g.NULL_COLOR):void 0,b.selectionForeground===g.NULL_COLOR&&(b.selectionForeground=void 0),g.color.isOpaque(b.selectionBackgroundTransparent)&&(b.selectionBackgroundTransparent=g.color.opacity(b.selectionBackgroundTransparent,.3)),g.color.isOpaque(b.selectionInactiveBackgroundTransparent)&&(b.selectionInactiveBackgroundTransparent=g.color.opacity(b.selectionInactiveBackgroundTransparent,.3)),b.ansi=i.DEFAULT_ANSI_COLORS.slice(),b.ansi[0]=C(E.black,i.DEFAULT_ANSI_COLORS[0]),b.ansi[1]=C(E.red,i.DEFAULT_ANSI_COLORS[1]),b.ansi[2]=C(E.green,i.DEFAULT_ANSI_COLORS[2]),b.ansi[3]=C(E.yellow,i.DEFAULT_ANSI_COLORS[3]),b.ansi[4]=C(E.blue,i.DEFAULT_ANSI_COLORS[4]),b.ansi[5]=C(E.magenta,i.DEFAULT_ANSI_COLORS[5]),b.ansi[6]=C(E.cyan,i.DEFAULT_ANSI_COLORS[6]),b.ansi[7]=C(E.white,i.DEFAULT_ANSI_COLORS[7]),b.ansi[8]=C(E.brightBlack,i.DEFAULT_ANSI_COLORS[8]),b.ansi[9]=C(E.brightRed,i.DEFAULT_ANSI_COLORS[9]),b.ansi[10]=C(E.brightGreen,i.DEFAULT_ANSI_COLORS[10]),b.ansi[11]=C(E.brightYellow,i.DEFAULT_ANSI_COLORS[11]),b.ansi[12]=C(E.brightBlue,i.DEFAULT_ANSI_COLORS[12]),b.ansi[13]=C(E.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),b.ansi[14]=C(E.brightCyan,i.DEFAULT_ANSI_COLORS[14]),b.ansi[15]=C(E.brightWhite,i.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const k=Math.min(b.ansi.length-16,E.extendedAnsi.length);for(let P=0;P<k;P++)b.ansi[P+16]=C(E.extendedAnsi[P],i.DEFAULT_ANSI_COLORS[P+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let b=0;b<this._restoreColors.ansi.length;++b)this._colors.ansi[b]=this._restoreColors.ansi[b]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(E,b){if(E!==void 0)try{return g.css.toColor(E)}catch{}return b}i.ThemeService=y=d([f(0,S.IOptionsService)],y)},6349:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const d=n(8460),f=n(844);class h extends f.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;const w=new Array(m);for(let S=0;S<Math.min(m,this.length);S++)w[S]=this._array[this._getCyclicIndex(S)];this._array=w,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let w=this._length;w<m;w++)this._array[w]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,w){this._array[this._getCyclicIndex(m)]=w}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,w,...S){if(w){for(let c=m;c<this._length-w;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+w)];this._length-=w,this.onDeleteEmitter.fire({index:m,amount:w})}for(let c=this._length-1;c>=m;c--)this._array[this._getCyclicIndex(c+S.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<S.length;c++)this._array[this._getCyclicIndex(m+c)]=S[c];if(S.length&&this.onInsertEmitter.fire({index:m,amount:S.length}),this._length+S.length>this._maxLength){const c=this._length+S.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=S.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,w,S){if(!(w<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+S<0)throw new Error("Cannot shift elements in list beyond index 0");if(S>0){for(let u=w-1;u>=0;u--)this.set(m+u+S,this.get(m+u));const c=m+w+S-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<w;c++)this.set(m+c+S,this.get(m+c))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}i.CircularList=h},1439:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function n(d,f=5){if(typeof d!="object")return d;const h=Array.isArray(d)?[]:{};for(const g in d)h[g]=f<=1?d[g]:d[g]&&n(d[g],f-1);return h}},8055:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let n=0,d=0,f=0,h=0;var g,m,w,S,c;function u(l){const p=l.toString(16);return p.length<2?"0"+p:p}function o(l,p){return l<p?(p+.05)/(l+.05):(l+.05)/(p+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(l){l.toCss=function(p,y,C,E){return E!==void 0?`#${u(p)}${u(y)}${u(C)}${u(E)}`:`#${u(p)}${u(y)}${u(C)}`},l.toRgba=function(p,y,C,E=255){return(p<<24|y<<16|C<<8|E)>>>0},l.toColor=function(p,y,C,E){return{css:l.toCss(p,y,C,E),rgba:l.toRgba(p,y,C,E)}}}(g||(i.channels=g={})),function(l){function p(y,C){return h=Math.round(255*C),[n,d,f]=c.toChannels(y.rgba),{css:g.toCss(n,d,f,h),rgba:g.toRgba(n,d,f,h)}}l.blend=function(y,C){if(h=(255&C.rgba)/255,h===1)return{css:C.css,rgba:C.rgba};const E=C.rgba>>24&255,b=C.rgba>>16&255,k=C.rgba>>8&255,P=y.rgba>>24&255,M=y.rgba>>16&255,I=y.rgba>>8&255;return n=P+Math.round((E-P)*h),d=M+Math.round((b-M)*h),f=I+Math.round((k-I)*h),{css:g.toCss(n,d,f),rgba:g.toRgba(n,d,f)}},l.isOpaque=function(y){return(255&y.rgba)==255},l.ensureContrastRatio=function(y,C,E){const b=c.ensureContrastRatio(y.rgba,C.rgba,E);if(b)return g.toColor(b>>24&255,b>>16&255,b>>8&255)},l.opaque=function(y){const C=(255|y.rgba)>>>0;return[n,d,f]=c.toChannels(C),{css:g.toCss(n,d,f),rgba:C}},l.opacity=p,l.multiplyOpacity=function(y,C){return h=255&y.rgba,p(y,h*C/255)},l.toColorRGB=function(y){return[y.rgba>>24&255,y.rgba>>16&255,y.rgba>>8&255]}}(m||(i.color=m={})),function(l){let p,y;try{const C=document.createElement("canvas");C.width=1,C.height=1;const E=C.getContext("2d",{willReadFrequently:!0});E&&(p=E,p.globalCompositeOperation="copy",y=p.createLinearGradient(0,0,1,1))}catch{}l.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return n=parseInt(C.slice(1,2).repeat(2),16),d=parseInt(C.slice(2,3).repeat(2),16),f=parseInt(C.slice(3,4).repeat(2),16),g.toColor(n,d,f);case 5:return n=parseInt(C.slice(1,2).repeat(2),16),d=parseInt(C.slice(2,3).repeat(2),16),f=parseInt(C.slice(3,4).repeat(2),16),h=parseInt(C.slice(4,5).repeat(2),16),g.toColor(n,d,f,h);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const E=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return n=parseInt(E[1]),d=parseInt(E[2]),f=parseInt(E[3]),h=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),g.toColor(n,d,f,h);if(!p||!y)throw new Error("css.toColor: Unsupported css format");if(p.fillStyle=y,p.fillStyle=C,typeof p.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(p.fillRect(0,0,1,1),[n,d,f,h]=p.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(n,d,f,h),css:C}}}(w||(i.css=w={})),function(l){function p(y,C,E){const b=y/255,k=C/255,P=E/255;return .2126*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.7152*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))+.0722*(P<=.03928?P/12.92:Math.pow((P+.055)/1.055,2.4))}l.relativeLuminance=function(y){return p(y>>16&255,y>>8&255,255&y)},l.relativeLuminance2=p}(S||(i.rgb=S={})),function(l){function p(C,E,b){const k=C>>24&255,P=C>>16&255,M=C>>8&255;let I=E>>24&255,D=E>>16&255,U=E>>8&255,q=o(S.relativeLuminance2(I,D,U),S.relativeLuminance2(k,P,M));for(;q<b&&(I>0||D>0||U>0);)I-=Math.max(0,Math.ceil(.1*I)),D-=Math.max(0,Math.ceil(.1*D)),U-=Math.max(0,Math.ceil(.1*U)),q=o(S.relativeLuminance2(I,D,U),S.relativeLuminance2(k,P,M));return(I<<24|D<<16|U<<8|255)>>>0}function y(C,E,b){const k=C>>24&255,P=C>>16&255,M=C>>8&255;let I=E>>24&255,D=E>>16&255,U=E>>8&255,q=o(S.relativeLuminance2(I,D,U),S.relativeLuminance2(k,P,M));for(;q<b&&(I<255||D<255||U<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),D=Math.min(255,D+Math.ceil(.1*(255-D))),U=Math.min(255,U+Math.ceil(.1*(255-U))),q=o(S.relativeLuminance2(I,D,U),S.relativeLuminance2(k,P,M));return(I<<24|D<<16|U<<8|255)>>>0}l.blend=function(C,E){if(h=(255&E)/255,h===1)return E;const b=E>>24&255,k=E>>16&255,P=E>>8&255,M=C>>24&255,I=C>>16&255,D=C>>8&255;return n=M+Math.round((b-M)*h),d=I+Math.round((k-I)*h),f=D+Math.round((P-D)*h),g.toRgba(n,d,f)},l.ensureContrastRatio=function(C,E,b){const k=S.relativeLuminance(C>>8),P=S.relativeLuminance(E>>8);if(o(k,P)<b){if(P<k){const D=p(C,E,b),U=o(k,S.relativeLuminance(D>>8));if(U<b){const q=y(C,E,b);return U>o(k,S.relativeLuminance(q>>8))?D:q}return D}const M=y(C,E,b),I=o(k,S.relativeLuminance(M>>8));if(I<b){const D=p(C,E,b);return I>o(k,S.relativeLuminance(D>>8))?M:D}return M}},l.reduceLuminance=p,l.increaseLuminance=y,l.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}}(c||(i.rgba=c={})),i.toPaddedHex=u,i.contrastRatio=o},8969:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const d=n(844),f=n(2585),h=n(4348),g=n(7866),m=n(744),w=n(7302),S=n(6975),c=n(8460),u=n(1753),o=n(1480),l=n(7994),p=n(9282),y=n(5435),C=n(5981),E=n(2660);let b=!1;class k extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(M=>{var I;(I=this._onScrollApi)==null||I.fire(M.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(M){for(const I in M)this.optionsService.options[I]=M[I]}constructor(M){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new w.OptionsService(M)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(S.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(u.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(o.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(l.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new y.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((I,D)=>this._inputHandler.parse(I,D))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(M,I){this._writeBuffer.write(M,I)}writeSync(M,I){this._logService.logLevel<=f.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(M,I)}input(M,I=!0){this.coreService.triggerDataEvent(M,I)}resize(M,I){isNaN(M)||isNaN(I)||(M=Math.max(M,m.MINIMUM_COLS),I=Math.max(I,m.MINIMUM_ROWS),this._bufferService.resize(M,I))}scroll(M,I=!1){this._bufferService.scroll(M,I)}scrollLines(M,I,D){this._bufferService.scrollLines(M,I,D)}scrollPages(M){this.scrollLines(M*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(M){const I=M-this._bufferService.buffer.ydisp;I!==0&&this.scrollLines(I)}registerEscHandler(M,I){return this._inputHandler.registerEscHandler(M,I)}registerDcsHandler(M,I){return this._inputHandler.registerDcsHandler(M,I)}registerCsiHandler(M,I){return this._inputHandler.registerCsiHandler(M,I)}registerOscHandler(M,I){return this._inputHandler.registerOscHandler(M,I)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let M=!1;const I=this.optionsService.rawOptions.windowsPty;I&&I.buildNumber!==void 0&&I.buildNumber!==void 0?M=I.backend==="conpty"&&I.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(M=!0),M?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const M=[];M.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const I of M)I.dispose()})}}}i.CoreTerminal=k},8460:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===n)return void this._listeners.splice(d,1)}}})),this._event}fire(n,d){const f=[];for(let h=0;h<this._listeners.length;h++)f.push(this._listeners[h]);for(let h=0;h<f.length;h++)f[h].call(void 0,n,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(n,d){return n(f=>d.fire(f))},i.runAndSubscribe=function(n,d){return d(void 0),n(f=>d(f))}},5435:function(v,i,n){var d=this&&this.__decorate||function(V,R,O,B){var H,J=arguments.length,te=J<3?R:B===null?B=Object.getOwnPropertyDescriptor(R,O):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(V,R,O,B);else for(var ce=V.length-1;ce>=0;ce--)(H=V[ce])&&(te=(J<3?H(te):J>3?H(R,O,te):H(R,O))||te);return J>3&&te&&Object.defineProperty(R,O,te),te},f=this&&this.__param||function(V,R){return function(O,B){R(O,B,V)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const h=n(2584),g=n(7116),m=n(2015),w=n(844),S=n(482),c=n(8437),u=n(8460),o=n(643),l=n(511),p=n(3734),y=n(2585),C=n(1480),E=n(6242),b=n(6351),k=n(5941),P={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function I(V,R){if(V>24)return R.setWinLines||!1;switch(V){case 1:return!!R.restoreWin;case 2:return!!R.minimizeWin;case 3:return!!R.setWinPosition;case 4:return!!R.setWinSizePixels;case 5:return!!R.raiseWin;case 6:return!!R.lowerWin;case 7:return!!R.refreshWin;case 8:return!!R.setWinSizeChars;case 9:return!!R.maximizeWin;case 10:return!!R.fullscreenWin;case 11:return!!R.getWinState;case 13:return!!R.getWinPosition;case 14:return!!R.getWinSizePixels;case 15:return!!R.getScreenSizePixels;case 16:return!!R.getCellSizePixels;case 18:return!!R.getWinSizeChars;case 19:return!!R.getScreenSizeChars;case 20:return!!R.getIconTitle;case 21:return!!R.getWinTitle;case 22:return!!R.pushTitle;case 23:return!!R.popTitle;case 24:return!!R.setWinLines}return!1}var D;(function(V){V[V.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",V[V.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(i.WindowsOptionsReportType=D={}));let U=0;class q extends w.Disposable{getAttrData(){return this._curAttrData}constructor(R,O,B,H,J,te,ce,ae,A=new m.EscapeSequenceParser){super(),this._bufferService=R,this._charsetService=O,this._coreService=B,this._logService=H,this._optionsService=J,this._oscLinkService=te,this._coreMouseService=ce,this._unicodeService=ae,this._parser=A,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new S.StringToUtf32,this._utf8Decoder=new S.Utf8ToUtf32,this._workCell=new l.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new u.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new u.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new u.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new u.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new u.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new u.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new u.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new u.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new u.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new u.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new u.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new G(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(x=>this._activeBuffer=x.activeBuffer)),this._parser.setCsiHandlerFallback((x,$)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(x),params:$.toArray()})}),this._parser.setEscHandlerFallback(x=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(x)})}),this._parser.setExecuteHandlerFallback(x=>{this._logService.debug("Unknown EXECUTE code: ",{code:x})}),this._parser.setOscHandlerFallback((x,$,F)=>{this._logService.debug("Unknown OSC code: ",{identifier:x,action:$,data:F})}),this._parser.setDcsHandlerFallback((x,$,F)=>{$==="HOOK"&&(F=F.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(x),action:$,payload:F})}),this._parser.setPrintHandler((x,$,F)=>this.print(x,$,F)),this._parser.registerCsiHandler({final:"@"},x=>this.insertChars(x)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},x=>this.scrollLeft(x)),this._parser.registerCsiHandler({final:"A"},x=>this.cursorUp(x)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},x=>this.scrollRight(x)),this._parser.registerCsiHandler({final:"B"},x=>this.cursorDown(x)),this._parser.registerCsiHandler({final:"C"},x=>this.cursorForward(x)),this._parser.registerCsiHandler({final:"D"},x=>this.cursorBackward(x)),this._parser.registerCsiHandler({final:"E"},x=>this.cursorNextLine(x)),this._parser.registerCsiHandler({final:"F"},x=>this.cursorPrecedingLine(x)),this._parser.registerCsiHandler({final:"G"},x=>this.cursorCharAbsolute(x)),this._parser.registerCsiHandler({final:"H"},x=>this.cursorPosition(x)),this._parser.registerCsiHandler({final:"I"},x=>this.cursorForwardTab(x)),this._parser.registerCsiHandler({final:"J"},x=>this.eraseInDisplay(x,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},x=>this.eraseInDisplay(x,!0)),this._parser.registerCsiHandler({final:"K"},x=>this.eraseInLine(x,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},x=>this.eraseInLine(x,!0)),this._parser.registerCsiHandler({final:"L"},x=>this.insertLines(x)),this._parser.registerCsiHandler({final:"M"},x=>this.deleteLines(x)),this._parser.registerCsiHandler({final:"P"},x=>this.deleteChars(x)),this._parser.registerCsiHandler({final:"S"},x=>this.scrollUp(x)),this._parser.registerCsiHandler({final:"T"},x=>this.scrollDown(x)),this._parser.registerCsiHandler({final:"X"},x=>this.eraseChars(x)),this._parser.registerCsiHandler({final:"Z"},x=>this.cursorBackwardTab(x)),this._parser.registerCsiHandler({final:"`"},x=>this.charPosAbsolute(x)),this._parser.registerCsiHandler({final:"a"},x=>this.hPositionRelative(x)),this._parser.registerCsiHandler({final:"b"},x=>this.repeatPrecedingCharacter(x)),this._parser.registerCsiHandler({final:"c"},x=>this.sendDeviceAttributesPrimary(x)),this._parser.registerCsiHandler({prefix:">",final:"c"},x=>this.sendDeviceAttributesSecondary(x)),this._parser.registerCsiHandler({final:"d"},x=>this.linePosAbsolute(x)),this._parser.registerCsiHandler({final:"e"},x=>this.vPositionRelative(x)),this._parser.registerCsiHandler({final:"f"},x=>this.hVPosition(x)),this._parser.registerCsiHandler({final:"g"},x=>this.tabClear(x)),this._parser.registerCsiHandler({final:"h"},x=>this.setMode(x)),this._parser.registerCsiHandler({prefix:"?",final:"h"},x=>this.setModePrivate(x)),this._parser.registerCsiHandler({final:"l"},x=>this.resetMode(x)),this._parser.registerCsiHandler({prefix:"?",final:"l"},x=>this.resetModePrivate(x)),this._parser.registerCsiHandler({final:"m"},x=>this.charAttributes(x)),this._parser.registerCsiHandler({final:"n"},x=>this.deviceStatus(x)),this._parser.registerCsiHandler({prefix:"?",final:"n"},x=>this.deviceStatusPrivate(x)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},x=>this.softReset(x)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},x=>this.setCursorStyle(x)),this._parser.registerCsiHandler({final:"r"},x=>this.setScrollRegion(x)),this._parser.registerCsiHandler({final:"s"},x=>this.saveCursor(x)),this._parser.registerCsiHandler({final:"t"},x=>this.windowOptions(x)),this._parser.registerCsiHandler({final:"u"},x=>this.restoreCursor(x)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},x=>this.insertColumns(x)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},x=>this.deleteColumns(x)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},x=>this.selectProtected(x)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},x=>this.requestMode(x,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},x=>this.requestMode(x,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(x=>(this.setTitle(x),this.setIconName(x),!0))),this._parser.registerOscHandler(1,new E.OscHandler(x=>this.setIconName(x))),this._parser.registerOscHandler(2,new E.OscHandler(x=>this.setTitle(x))),this._parser.registerOscHandler(4,new E.OscHandler(x=>this.setOrReportIndexedColor(x))),this._parser.registerOscHandler(8,new E.OscHandler(x=>this.setHyperlink(x))),this._parser.registerOscHandler(10,new E.OscHandler(x=>this.setOrReportFgColor(x))),this._parser.registerOscHandler(11,new E.OscHandler(x=>this.setOrReportBgColor(x))),this._parser.registerOscHandler(12,new E.OscHandler(x=>this.setOrReportCursorColor(x))),this._parser.registerOscHandler(104,new E.OscHandler(x=>this.restoreIndexedColor(x))),this._parser.registerOscHandler(110,new E.OscHandler(x=>this.restoreFgColor(x))),this._parser.registerOscHandler(111,new E.OscHandler(x=>this.restoreBgColor(x))),this._parser.registerOscHandler(112,new E.OscHandler(x=>this.restoreCursorColor(x))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const x in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:x},()=>this.selectCharset("("+x)),this._parser.registerEscHandler({intermediates:")",final:x},()=>this.selectCharset(")"+x)),this._parser.registerEscHandler({intermediates:"*",final:x},()=>this.selectCharset("*"+x)),this._parser.registerEscHandler({intermediates:"+",final:x},()=>this.selectCharset("+"+x)),this._parser.registerEscHandler({intermediates:"-",final:x},()=>this.selectCharset("-"+x)),this._parser.registerEscHandler({intermediates:".",final:x},()=>this.selectCharset("."+x)),this._parser.registerEscHandler({intermediates:"/",final:x},()=>this.selectCharset("/"+x));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(x=>(this._logService.error("Parsing error: ",x),x)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new b.DcsHandler((x,$)=>this.requestStatusString(x,$)))}_preserveStack(R,O,B,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=R,this._parseStack.cursorStartY=O,this._parseStack.decodedLength=B,this._parseStack.position=H}_logSlowResolvingAsync(R){this._logService.logLevel<=y.LogLevelEnum.WARN&&Promise.race([R,new Promise((O,B)=>setTimeout(()=>B("#SLOW_TIMEOUT"),5e3))]).catch(O=>{if(O!=="#SLOW_TIMEOUT")throw O;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(R,O){let B,H=this._activeBuffer.x,J=this._activeBuffer.y,te=0;const ce=this._parseStack.paused;if(ce){if(B=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,O))return this._logSlowResolvingAsync(B),B;H=this._parseStack.cursorStartX,J=this._parseStack.cursorStartY,this._parseStack.paused=!1,R.length>M&&(te=this._parseStack.position+M)}if(this._logService.logLevel<=y.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof R=="string"?` "${R}"`:` "${Array.prototype.map.call(R,x=>String.fromCharCode(x)).join("")}"`),typeof R=="string"?R.split("").map(x=>x.charCodeAt(0)):R),this._parseBuffer.length<R.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(R.length,M))),ce||this._dirtyRowTracker.clearRange(),R.length>M)for(let x=te;x<R.length;x+=M){const $=x+M<R.length?x+M:R.length,F=typeof R=="string"?this._stringDecoder.decode(R.substring(x,$),this._parseBuffer):this._utf8Decoder.decode(R.subarray(x,$),this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,F))return this._preserveStack(H,J,F,x),this._logSlowResolvingAsync(B),B}else if(!ce){const x=typeof R=="string"?this._stringDecoder.decode(R,this._parseBuffer):this._utf8Decoder.decode(R,this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,x))return this._preserveStack(H,J,x,0),this._logSlowResolvingAsync(B),B}this._activeBuffer.x===H&&this._activeBuffer.y===J||this._onCursorMove.fire();const ae=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),A=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);A<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(A,this._bufferService.rows-1),Math.min(ae,this._bufferService.rows-1))}print(R,O,B){let H,J;const te=this._charsetService.charset,ce=this._optionsService.rawOptions.screenReaderMode,ae=this._bufferService.cols,A=this._coreService.decPrivateModes.wraparound,x=this._coreService.modes.insertMode,$=this._curAttrData;let F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&B-O>0&&F.getWidth(this._activeBuffer.x-1)===2&&F.setCellFromCodepoint(this._activeBuffer.x-1,0,1,$);let Y=this._parser.precedingJoinState;for(let Z=O;Z<B;++Z){if(H=R[Z],H<127&&te){const K=te[String.fromCharCode(H)];K&&(H=K.charCodeAt(0))}const L=this._unicodeService.charProperties(H,Y);J=C.UnicodeService.extractWidth(L);const T=C.UnicodeService.extractShouldJoin(L),N=T?C.UnicodeService.extractWidth(Y):0;if(Y=L,ce&&this._onA11yChar.fire((0,S.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+J-N>ae){if(A){const K=F;let j=this._activeBuffer.x-N;for(this._activeBuffer.x=N,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),N>0&&F instanceof c.BufferLine&&F.copyCellsFrom(K,j,0,N,!1);j<ae;)K.setCellFromCodepoint(j++,0,1,$)}else if(this._activeBuffer.x=ae-1,J===2)continue}if(T&&this._activeBuffer.x){const K=F.getWidth(this._activeBuffer.x-1)?1:2;F.addCodepointToCell(this._activeBuffer.x-K,H,J);for(let j=J-N;--j>=0;)F.setCellFromCodepoint(this._activeBuffer.x++,0,0,$)}else if(x&&(F.insertCells(this._activeBuffer.x,J-N,this._activeBuffer.getNullCell($)),F.getWidth(ae-1)===2&&F.setCellFromCodepoint(ae-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,$)),F.setCellFromCodepoint(this._activeBuffer.x++,H,J,$),J>0)for(;--J;)F.setCellFromCodepoint(this._activeBuffer.x++,0,0,$)}this._parser.precedingJoinState=Y,this._activeBuffer.x<ae&&B-O>0&&F.getWidth(this._activeBuffer.x)===0&&!F.hasContent(this._activeBuffer.x)&&F.setCellFromCodepoint(this._activeBuffer.x,0,1,$),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(R,O){return R.final!=="t"||R.prefix||R.intermediates?this._parser.registerCsiHandler(R,O):this._parser.registerCsiHandler(R,B=>!I(B.params[0],this._optionsService.rawOptions.windowOptions)||O(B))}registerDcsHandler(R,O){return this._parser.registerDcsHandler(R,new b.DcsHandler(O))}registerEscHandler(R,O){return this._parser.registerEscHandler(R,O)}registerOscHandler(R,O){return this._parser.registerOscHandler(R,new E.OscHandler(O))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var R;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&R.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);O.hasWidth(this._activeBuffer.x)&&!O.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const R=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-R),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(R=this._bufferService.cols-1){this._activeBuffer.x=Math.min(R,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(R,O){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=R,this._activeBuffer.y=this._activeBuffer.scrollTop+O):(this._activeBuffer.x=R,this._activeBuffer.y=O),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(R,O){this._restrictCursor(),this._setCursor(this._activeBuffer.x+R,this._activeBuffer.y+O)}cursorUp(R){const O=this._activeBuffer.y-this._activeBuffer.scrollTop;return O>=0?this._moveCursor(0,-Math.min(O,R.params[0]||1)):this._moveCursor(0,-(R.params[0]||1)),!0}cursorDown(R){const O=this._activeBuffer.scrollBottom-this._activeBuffer.y;return O>=0?this._moveCursor(0,Math.min(O,R.params[0]||1)):this._moveCursor(0,R.params[0]||1),!0}cursorForward(R){return this._moveCursor(R.params[0]||1,0),!0}cursorBackward(R){return this._moveCursor(-(R.params[0]||1),0),!0}cursorNextLine(R){return this.cursorDown(R),this._activeBuffer.x=0,!0}cursorPrecedingLine(R){return this.cursorUp(R),this._activeBuffer.x=0,!0}cursorCharAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(R){return this._setCursor(R.length>=2?(R.params[1]||1)-1:0,(R.params[0]||1)-1),!0}charPosAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(R){return this._moveCursor(R.params[0]||1,0),!0}linePosAbsolute(R){return this._setCursor(this._activeBuffer.x,(R.params[0]||1)-1),!0}vPositionRelative(R){return this._moveCursor(0,R.params[0]||1),!0}hVPosition(R){return this.cursorPosition(R),!0}tabClear(R){const O=R.params[0];return O===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:O===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=R.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=R.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(R){const O=R.params[0];return O===1&&(this._curAttrData.bg|=536870912),O!==2&&O!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(R,O,B,H=!1,J=!1){const te=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);te.replaceCells(O,B,this._activeBuffer.getNullCell(this._eraseAttrData()),J),H&&(te.isWrapped=!1)}_resetBufferLine(R,O=!1){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);B&&(B.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),O),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+R),B.isWrapped=!1)}eraseInDisplay(R,O=!1){let B;switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);B<this._bufferService.rows;B++)this._resetBufferLine(B,O);this._dirtyRowTracker.markDirty(B);break;case 1:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B,0,this._activeBuffer.x+1,!0,O),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(B+1).isWrapped=!1);B--;)this._resetBufferLine(B,O);this._dirtyRowTracker.markDirty(0);break;case 2:for(B=this._bufferService.rows,this._dirtyRowTracker.markDirty(B-1);B--;)this._resetBufferLine(B,O);this._dirtyRowTracker.markDirty(0);break;case 3:const H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(R,O=!1){switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,O);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,O)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(R){this._restrictCursor();let O=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,J=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;O--;)this._activeBuffer.lines.splice(J-1,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(R){this._restrictCursor();let O=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y;let H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;O--;)this._activeBuffer.lines.splice(B,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(R){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.insertCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(R){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.deleteCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(R){let O=R.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(R){let O=R.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=R.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);H.deleteCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=R.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);H.insertCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=R.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);H.insertCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=R.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);H.deleteCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(R){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(R.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(R){const O=this._parser.precedingJoinState;if(!O)return!0;const B=R.params[0]||1,H=C.UnicodeService.extractWidth(O),J=this._activeBuffer.x-H,te=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(J),ce=new Uint32Array(te.length*B);let ae=0;for(let x=0;x<te.length;){const $=te.codePointAt(x)||0;ce[ae++]=$,x+=$>65535?2:1}let A=ae;for(let x=1;x<B;++x)ce.copyWithin(A,0,ae),A+=ae;return this.print(ce,0,A),!0}sendDeviceAttributesPrimary(R){return R.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(R){return R.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(R.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(R){return(this._optionsService.rawOptions.termName+"").indexOf(R)===0}setMode(R){for(let O=0;O<R.length;O++)switch(R.params[O]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(R){for(let O=0;O<R.length;O++)switch(R.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(R){for(let O=0;O<R.length;O++)switch(R.params[O]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(R){for(let O=0;O<R.length;O++)switch(R.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),R.params[O]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(R,O){const B=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:J}=this._coreMouseService,te=this._coreService,{buffers:ce,cols:ae}=this._bufferService,{active:A,alt:x}=ce,$=this._optionsService.rawOptions,F=T=>T?1:2,Y=R.params[0];return Z=Y,L=O?Y===2?4:Y===4?F(te.modes.insertMode):Y===12?3:Y===20?F($.convertEol):0:Y===1?F(B.applicationCursorKeys):Y===3?$.windowOptions.setWinLines?ae===80?2:ae===132?1:0:0:Y===6?F(B.origin):Y===7?F(B.wraparound):Y===8?3:Y===9?F(H==="X10"):Y===12?F($.cursorBlink):Y===25?F(!te.isCursorHidden):Y===45?F(B.reverseWraparound):Y===66?F(B.applicationKeypad):Y===67?4:Y===1e3?F(H==="VT200"):Y===1002?F(H==="DRAG"):Y===1003?F(H==="ANY"):Y===1004?F(B.sendFocus):Y===1005?4:Y===1006?F(J==="SGR"):Y===1015?4:Y===1016?F(J==="SGR_PIXELS"):Y===1048?1:Y===47||Y===1047||Y===1049?F(A===x):Y===2004?F(B.bracketedPasteMode):0,te.triggerDataEvent(`${h.C0.ESC}[${O?"":"?"}${Z};${L}$y`),!0;var Z,L}_updateAttrColor(R,O,B,H,J){return O===2?(R|=50331648,R&=-16777216,R|=p.AttributeData.fromColorRGB([B,H,J])):O===5&&(R&=-50331904,R|=33554432|255&B),R}_extractColor(R,O,B){const H=[0,0,-1,0,0,0];let J=0,te=0;do{if(H[te+J]=R.params[O+te],R.hasSubParams(O+te)){const ce=R.getSubParams(O+te);let ae=0;do H[1]===5&&(J=1),H[te+ae+1+J]=ce[ae];while(++ae<ce.length&&ae+te+1+J<H.length);break}if(H[1]===5&&te+J>=2||H[1]===2&&te+J>=5)break;H[1]&&(J=1)}while(++te+O<R.length&&te+J<H.length);for(let ce=2;ce<H.length;++ce)H[ce]===-1&&(H[ce]=0);switch(H[0]){case 38:B.fg=this._updateAttrColor(B.fg,H[1],H[3],H[4],H[5]);break;case 48:B.bg=this._updateAttrColor(B.bg,H[1],H[3],H[4],H[5]);break;case 58:B.extended=B.extended.clone(),B.extended.underlineColor=this._updateAttrColor(B.extended.underlineColor,H[1],H[3],H[4],H[5])}return te}_processUnderline(R,O){O.extended=O.extended.clone(),(!~R||R>5)&&(R=1),O.extended.underlineStyle=R,O.fg|=268435456,R===0&&(O.fg&=-268435457),O.updateExtended()}_processSGR0(R){R.fg=c.DEFAULT_ATTR_DATA.fg,R.bg=c.DEFAULT_ATTR_DATA.bg,R.extended=R.extended.clone(),R.extended.underlineStyle=0,R.extended.underlineColor&=-67108864,R.updateExtended()}charAttributes(R){if(R.length===1&&R.params[0]===0)return this._processSGR0(this._curAttrData),!0;const O=R.length;let B;const H=this._curAttrData;for(let J=0;J<O;J++)B=R.params[J],B>=30&&B<=37?(H.fg&=-50331904,H.fg|=16777216|B-30):B>=40&&B<=47?(H.bg&=-50331904,H.bg|=16777216|B-40):B>=90&&B<=97?(H.fg&=-50331904,H.fg|=16777224|B-90):B>=100&&B<=107?(H.bg&=-50331904,H.bg|=16777224|B-100):B===0?this._processSGR0(H):B===1?H.fg|=134217728:B===3?H.bg|=67108864:B===4?(H.fg|=268435456,this._processUnderline(R.hasSubParams(J)?R.getSubParams(J)[0]:1,H)):B===5?H.fg|=536870912:B===7?H.fg|=67108864:B===8?H.fg|=1073741824:B===9?H.fg|=2147483648:B===2?H.bg|=134217728:B===21?this._processUnderline(2,H):B===22?(H.fg&=-134217729,H.bg&=-134217729):B===23?H.bg&=-67108865:B===24?(H.fg&=-268435457,this._processUnderline(0,H)):B===25?H.fg&=-536870913:B===27?H.fg&=-67108865:B===28?H.fg&=-1073741825:B===29?H.fg&=2147483647:B===39?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):B===49?(H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):B===38||B===48||B===58?J+=this._extractColor(R,J,H):B===53?H.bg|=1073741824:B===55?H.bg&=-1073741825:B===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):B===100?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",B);return!0}deviceStatus(R){switch(R.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const O=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${O};${B}R`)}return!0}deviceStatusPrivate(R){if(R.params[0]===6){const O=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${O};${B}R`)}return!0}softReset(R){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(R){const O=R.params[0]||1;switch(O){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const B=O%2==1;return this._optionsService.options.cursorBlink=B,!0}setScrollRegion(R){const O=R.params[0]||1;let B;return(R.length<2||(B=R.params[1])>this._bufferService.rows||B===0)&&(B=this._bufferService.rows),B>O&&(this._activeBuffer.scrollTop=O-1,this._activeBuffer.scrollBottom=B-1,this._setCursor(0,0)),!0}windowOptions(R){if(!I(R.params[0],this._optionsService.rawOptions.windowOptions))return!0;const O=R.length>1?R.params[1]:0;switch(R.params[0]){case 14:O!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:O!==0&&O!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),O!==0&&O!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:O!==0&&O!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),O!==0&&O!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(R){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(R){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(R){return this._windowTitle=R,this._onTitleChange.fire(R),!0}setIconName(R){return this._iconName=R,!0}setOrReportIndexedColor(R){const O=[],B=R.split(";");for(;B.length>1;){const H=B.shift(),J=B.shift();if(/^\d+$/.exec(H)){const te=parseInt(H);if(z(te))if(J==="?")O.push({type:0,index:te});else{const ce=(0,k.parseColor)(J);ce&&O.push({type:1,index:te,color:ce})}}}return O.length&&this._onColor.fire(O),!0}setHyperlink(R){const O=R.split(";");return!(O.length<2)&&(O[1]?this._createHyperlink(O[0],O[1]):!O[0]&&this._finishHyperlink())}_createHyperlink(R,O){this._getCurrentLinkId()&&this._finishHyperlink();const B=R.split(":");let H;const J=B.findIndex(te=>te.startsWith("id="));return J!==-1&&(H=B[J].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:O}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(R,O){const B=R.split(";");for(let H=0;H<B.length&&!(O>=this._specialColors.length);++H,++O)if(B[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[O]}]);else{const J=(0,k.parseColor)(B[H]);J&&this._onColor.fire([{type:1,index:this._specialColors[O],color:J}])}return!0}setOrReportFgColor(R){return this._setOrReportSpecialColor(R,0)}setOrReportBgColor(R){return this._setOrReportSpecialColor(R,1)}setOrReportCursorColor(R){return this._setOrReportSpecialColor(R,2)}restoreIndexedColor(R){if(!R)return this._onColor.fire([{type:2}]),!0;const O=[],B=R.split(";");for(let H=0;H<B.length;++H)if(/^\d+$/.exec(B[H])){const J=parseInt(B[H]);z(J)&&O.push({type:2,index:J})}return O.length&&this._onColor.fire(O),!0}restoreFgColor(R){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(R){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(R){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(R){return R.length!==2?(this.selectDefaultCharset(),!0):(R[0]==="/"||this._charsetService.setgCharset(P[R[0]],g.CHARSETS[R[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const R=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,R,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(R){return this._charsetService.setgLevel(R),!0}screenAlignmentPattern(){const R=new l.CellData;R.content=4194373,R.fg=this._curAttrData.fg,R.bg=this._curAttrData.bg,this._setCursor(0,0);for(let O=0;O<this._bufferService.rows;++O){const B=this._activeBuffer.ybase+this._activeBuffer.y+O,H=this._activeBuffer.lines.get(B);H&&(H.fill(R),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(R,O){const B=this._bufferService.buffer,H=this._optionsService.rawOptions;return(J=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${J}${h.C0.ESC}\\`),!0))(R==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:R==='"p'?'P1$r61;1"p':R==="r"?`P1$r${B.scrollTop+1};${B.scrollBottom+1}r`:R==="m"?"P1$r0m":R===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(R,O){this._dirtyRowTracker.markRangeDirty(R,O)}}i.InputHandler=q;let G=class{constructor(V){this._bufferService=V,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(V){V<this.start?this.start=V:V>this.end&&(this.end=V)}markRangeDirty(V,R){V>R&&(U=V,V=R,R=U),V<this.start&&(this.start=V),R>this.end&&(this.end=R)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function z(V){return 0<=V&&V<256}G=d([f(0,y.IBufferService)],G)},844:(v,i)=>{function n(d){for(const f of d)f.dispose();d.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const f=this._disposables.indexOf(d);f!==-1&&this._disposables.splice(f,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var f;this._isDisposed||d===this._value||((f=this._value)==null||f.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)==null||d.dispose(),this._value=void 0}},i.toDisposable=function(d){return{dispose:d}},i.disposeArray=n,i.getDisposeArrayDisposable=function(d){return{dispose:()=>n(d)}}},1505:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(f,h,g){this._data[f]||(this._data[f]={}),this._data[f][h]=g}get(f,h){return this._data[f]?this._data[f][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=n,i.FourKeyMap=class{constructor(){this._data=new n}set(d,f,h,g,m){this._data.get(d,f)||this._data.set(d,f,new n),this._data.get(d,f).set(h,g,m)}get(d,f,h,g){var m;return(m=this._data.get(d,f))==null?void 0:m.get(h,g)}clear(){this._data.clear()}}},6114:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const n=i.isNode?"node":navigator.userAgent,d=i.isNode?"node":navigator.platform;i.isFirefox=n.includes("Firefox"),i.isLegacyEdge=n.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(n),i.getSafariVersion=function(){if(!i.isSafari)return 0;const f=n.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),i.isIpad=d==="iPad",i.isIphone=d==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),i.isLinux=d.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(n)},6106:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let n=0;i.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(n=this._search(this._getKey(d)),this._array.splice(n,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const f=this._getKey(d);if(f===void 0||(n=this._search(f),n===-1)||this._getKey(this._array[n])!==f)return!1;do if(this._array[n]===d)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===f);return!1}*getKeyIterator(d){if(this._array.length!==0&&(n=this._search(d),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===d))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===d)}forEachByKey(d,f){if(this._array.length!==0&&(n=this._search(d),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===d))do f(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===d)}values(){return[...this._array].values()}_search(d){let f=0,h=this._array.length-1;for(;h>=f;){let g=f+h>>1;const m=this._getKey(this._array[g]);if(m>d)h=g-1;else{if(!(m<d)){for(;g>0&&this._getKey(this._array[g-1])===d;)g--;return g}f=g+1}}return f}}},7226:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const d=n(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let w=0,S=0,c=m.timeRemaining(),u=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),S=Math.max(w,S),u=m.timeRemaining(),1.5*S>u)return c-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-w))}ms`),void this._start();c=u}this.clear()}}class h extends f{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){const w=Date.now()+m;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const d=n(643);i.updateWindowsModeWrappedState=function(f){const h=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),g=h==null?void 0:h.get(f.cols-1),m=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);m&&g&&(m.isWrapped=g[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&g[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new n;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=n;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,g=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=g}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=d},9092:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const d=n(6349),f=n(7226),h=n(3734),g=n(8437),m=n(4634),w=n(511),S=n(643),c=n(4863),u=n(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(o,l,p){this._hasScrollback=o,this._optionsService=l,this._bufferService=p,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,S.WHITESPACE_CELL_CHAR,S.WHITESPACE_CELL_WIDTH,S.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(o,l){return new g.BufferLine(this._bufferService.cols,this.getNullCell(o),l)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows}_getCorrectBufferLength(o){if(!this._hasScrollback)return o;const l=o+this._optionsService.rawOptions.scrollback;return l>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:l}fillViewportRows(o){if(this.lines.length===0){o===void 0&&(o=g.DEFAULT_ATTR_DATA);let l=this._rows;for(;l--;)this.lines.push(this.getBlankLine(o))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(o,l){const p=this.getNullCell(g.DEFAULT_ATTR_DATA);let y=0;const C=this._getCorrectBufferLength(l);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<o)for(let b=0;b<this.lines.length;b++)y+=+this.lines.get(b).resize(o,p);let E=0;if(this._rows<l)for(let b=this._rows;b<l;b++)this.lines.length<l+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(o,p)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(o,p)));else for(let b=this._rows;b>l;b--)this.lines.length>l+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const b=this.lines.length-C;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=C}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,l-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=l-1,this._isReflowEnabled&&(this._reflow(o,l),this._cols>o))for(let E=0;E<this.lines.length;E++)y+=+this.lines.get(E).resize(o,p);this._cols=o,this._rows=l,this._memoryCleanupQueue.clear(),y>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let o=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,o=!1);let l=0;for(;this._memoryCleanupPosition<this.lines.length;)if(l+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),l>100)return!0;return o}get _isReflowEnabled(){const o=this._optionsService.rawOptions.windowsPty;return o&&o.buildNumber?this._hasScrollback&&o.backend==="conpty"&&o.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(o,l){this._cols!==o&&(o>this._cols?this._reflowLarger(o,l):this._reflowSmaller(o,l))}_reflowLarger(o,l){const p=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(p.length>0){const y=(0,m.reflowLargerCreateNewLayout)(this.lines,p);(0,m.reflowLargerApplyNewLayout)(this.lines,y.layout),this._reflowLargerAdjustViewport(o,l,y.countRemoved)}}_reflowLargerAdjustViewport(o,l,p){const y=this.getNullCell(g.DEFAULT_ATTR_DATA);let C=p;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<l&&this.lines.push(new g.BufferLine(o,y))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-p,0)}_reflowSmaller(o,l){const p=this.getNullCell(g.DEFAULT_ATTR_DATA),y=[];let C=0;for(let E=this.lines.length-1;E>=0;E--){let b=this.lines.get(E);if(!b||!b.isWrapped&&b.getTrimmedLength()<=o)continue;const k=[b];for(;b.isWrapped&&E>0;)b=this.lines.get(--E),k.unshift(b);const P=this.ybase+this.y;if(P>=E&&P<E+k.length)continue;const M=k[k.length-1].getTrimmedLength(),I=(0,m.reflowSmallerGetNewLineLengths)(k,this._cols,o),D=I.length-k.length;let U;U=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+D):Math.max(0,this.lines.length-this.lines.maxLength+D);const q=[];for(let B=0;B<D;B++){const H=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);q.push(H)}q.length>0&&(y.push({start:E+k.length+C,newLines:q}),C+=q.length),k.push(...q);let G=I.length-1,z=I[G];z===0&&(G--,z=I[G]);let V=k.length-D-1,R=M;for(;V>=0;){const B=Math.min(R,z);if(k[G]===void 0)break;if(k[G].copyCellsFrom(k[V],R-B,z-B,B,!0),z-=B,z===0&&(G--,z=I[G]),R-=B,R===0){V--;const H=Math.max(V,0);R=(0,m.getWrappedLineTrimmedLength)(k,H,this._cols)}}for(let B=0;B<k.length;B++)I[B]<o&&k[B].setCell(I[B],p);let O=D-U;for(;O-- >0;)this.ybase===0?this.y<l-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-l&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+D,this.ybase+l-1)}if(y.length>0){const E=[],b=[];for(let G=0;G<this.lines.length;G++)b.push(this.lines.get(G));const k=this.lines.length;let P=k-1,M=0,I=y[M];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let D=0;for(let G=Math.min(this.lines.maxLength-1,k+C-1);G>=0;G--)if(I&&I.start>P+D){for(let z=I.newLines.length-1;z>=0;z--)this.lines.set(G--,I.newLines[z]);G++,E.push({index:P+1,amount:I.newLines.length}),D+=I.newLines.length,I=y[++M]}else this.lines.set(G,b[P--]);let U=0;for(let G=E.length-1;G>=0;G--)E[G].index+=U,this.lines.onInsertEmitter.fire(E[G]),U+=E[G].amount;const q=Math.max(0,k+C-this.lines.maxLength);q>0&&this.lines.onTrimEmitter.fire(q)}}translateBufferLineToString(o,l,p=0,y){const C=this.lines.get(o);return C?C.translateToString(l,p,y):""}getWrappedRangeForLine(o){let l=o,p=o;for(;l>0&&this.lines.get(l).isWrapped;)l--;for(;p+1<this.lines.length&&this.lines.get(p+1).isWrapped;)p++;return{first:l,last:p}}setupTabStops(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.rawOptions.tabStopWidth)this.tabs[o]=!0}prevStop(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o}nextStop(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o}clearMarkers(o){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].line===o&&(this.markers[l].dispose(),this.markers.splice(l--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].dispose(),this.markers.splice(o--,1);this._isClearing=!1}addMarker(o){const l=new c.Marker(o);return this.markers.push(l),l.register(this.lines.onTrim(p=>{l.line-=p,l.line<0&&l.dispose()})),l.register(this.lines.onInsert(p=>{l.line>=p.index&&(l.line+=p.amount)})),l.register(this.lines.onDelete(p=>{l.line>=p.index&&l.line<p.index+p.amount&&l.dispose(),l.line>p.index&&(l.line-=p.amount)})),l.register(l.onDispose(()=>this._removeMarker(l))),l}_removeMarker(o){this._isClearing||this.markers.splice(this.markers.indexOf(o),1)}}},8437:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const d=n(3734),f=n(511),h=n(643),g=n(482);i.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let m=0;class w{constructor(c,u,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);const l=u||f.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let p=0;p<c;++p)this.setCell(p,l);this.length=c}get(c){const u=this._data[3*c+0],o=2097151&u;return[this._data[3*c+1],2097152&u?this._combined[c]:o?(0,g.stringFromCodePoint)(o):"",u>>22,2097152&u?this._combined[c].charCodeAt(this._combined[c].length-1):o]}set(c,u){this._data[3*c+1]=u[h.CHAR_DATA_ATTR_INDEX],u[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=u[1],this._data[3*c+0]=2097152|c|u[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=u[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){const u=this._data[3*c+0];return 2097152&u?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&u}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){const u=this._data[3*c+0];return 2097152&u?this._combined[c]:2097151&u?(0,g.stringFromCodePoint)(2097151&u):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,u){return m=3*c,u.content=this._data[m+0],u.fg=this._data[m+1],u.bg=this._data[m+2],2097152&u.content&&(u.combinedData=this._combined[c]),268435456&u.bg&&(u.extended=this._extendedAttrs[c]),u}setCell(c,u){2097152&u.content&&(this._combined[c]=u.combinedData),268435456&u.bg&&(this._extendedAttrs[c]=u.extended),this._data[3*c+0]=u.content,this._data[3*c+1]=u.fg,this._data[3*c+2]=u.bg}setCellFromCodepoint(c,u,o,l){268435456&l.bg&&(this._extendedAttrs[c]=l.extended),this._data[3*c+0]=u|o<<22,this._data[3*c+1]=l.fg,this._data[3*c+2]=l.bg}addCodepointToCell(c,u,o){let l=this._data[3*c+0];2097152&l?this._combined[c]+=(0,g.stringFromCodePoint)(u):2097151&l?(this._combined[c]=(0,g.stringFromCodePoint)(2097151&l)+(0,g.stringFromCodePoint)(u),l&=-2097152,l|=2097152):l=u|4194304,o&&(l&=-12582913,l|=o<<22),this._data[3*c+0]=l}insertCells(c,u,o){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,o),u<this.length-c){const l=new f.CellData;for(let p=this.length-c-u-1;p>=0;--p)this.setCell(c+u+p,this.loadCell(c+p,l));for(let p=0;p<u;++p)this.setCell(c+p,o)}else for(let l=c;l<this.length;++l)this.setCell(l,o);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,o)}deleteCells(c,u,o){if(c%=this.length,u<this.length-c){const l=new f.CellData;for(let p=0;p<this.length-c-u;++p)this.setCell(c+p,this.loadCell(c+u+p,l));for(let p=this.length-u;p<this.length;++p)this.setCell(p,o)}else for(let l=c;l<this.length;++l)this.setCell(l,o);c&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,o),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodepoint(c,0,1,o)}replaceCells(c,u,o,l=!1){if(l)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodepoint(c-1,0,1,o),u<this.length&&this.getWidth(u-1)===2&&!this.isProtected(u)&&this.setCellFromCodepoint(u,0,1,o);c<u&&c<this.length;)this.isProtected(c)||this.setCell(c,o),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,o),u<this.length&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u,0,1,o);c<u&&c<this.length;)this.setCell(c++,o)}resize(c,u){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const o=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*o)this._data=new Uint32Array(this._data.buffer,0,o);else{const l=new Uint32Array(o);l.set(this._data),this._data=l}for(let l=this.length;l<c;++l)this.setCell(l,u)}else{this._data=this._data.subarray(0,o);const l=Object.keys(this._combined);for(let y=0;y<l.length;y++){const C=parseInt(l[y],10);C>=c&&delete this._combined[C]}const p=Object.keys(this._extendedAttrs);for(let y=0;y<p.length;y++){const C=parseInt(p[y],10);C>=c&&delete this._extendedAttrs[C]}}return this.length=c,4*o*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,u=!1){if(u)for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,c);else{this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(const u in c._combined)this._combined[u]=c._combined[u];this._extendedAttrs={};for(const u in c._extendedAttrs)this._extendedAttrs[u]=c._extendedAttrs[u];this.isWrapped=c.isWrapped}clone(){const c=new w(0);c._data=new Uint32Array(this._data),c.length=this.length;for(const u in this._combined)c._combined[u]=this._combined[u];for(const u in this._extendedAttrs)c._extendedAttrs[u]=this._extendedAttrs[u];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,u,o,l,p){const y=c._data;if(p)for(let E=l-1;E>=0;E--){for(let b=0;b<3;b++)this._data[3*(o+E)+b]=y[3*(u+E)+b];268435456&y[3*(u+E)+2]&&(this._extendedAttrs[o+E]=c._extendedAttrs[u+E])}else for(let E=0;E<l;E++){for(let b=0;b<3;b++)this._data[3*(o+E)+b]=y[3*(u+E)+b];268435456&y[3*(u+E)+2]&&(this._extendedAttrs[o+E]=c._extendedAttrs[u+E])}const C=Object.keys(c._combined);for(let E=0;E<C.length;E++){const b=parseInt(C[E],10);b>=u&&(this._combined[b-u+o]=c._combined[b])}}translateToString(c,u,o,l){u=u??0,o=o??this.length,c&&(o=Math.min(o,this.getTrimmedLength())),l&&(l.length=0);let p="";for(;u<o;){const y=this._data[3*u+0],C=2097151&y,E=2097152&y?this._combined[u]:C?(0,g.stringFromCodePoint)(C):h.WHITESPACE_CELL_CHAR;if(p+=E,l)for(let b=0;b<E.length;++b)l.push(u);u+=y>>22||1}return l&&l.push(u),p}}i.BufferLine=w},4841:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(n,d){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return d*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(v,i)=>{function n(d,f,h){if(f===d.length-1)return d[f].getTrimmedLength();const g=!d[f].hasContent(h-1)&&d[f].getWidth(h-1)===1,m=d[f+1].getWidth(0)===2;return g&&m?h-1:h}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(d,f,h,g,m){const w=[];for(let S=0;S<d.length-1;S++){let c=S,u=d.get(++c);if(!u.isWrapped)continue;const o=[d.get(S)];for(;c<d.length&&u.isWrapped;)o.push(u),u=d.get(++c);if(g>=S&&g<c){S+=o.length-1;continue}let l=0,p=n(o,l,f),y=1,C=0;for(;y<o.length;){const b=n(o,y,f),k=b-C,P=h-p,M=Math.min(k,P);o[l].copyCellsFrom(o[y],C,p,M,!1),p+=M,p===h&&(l++,p=0),C+=M,C===b&&(y++,C=0),p===0&&l!==0&&o[l-1].getWidth(h-1)===2&&(o[l].copyCellsFrom(o[l-1],h-1,p++,1,!1),o[l-1].setCell(h-1,m))}o[l].replaceCells(p,h,m);let E=0;for(let b=o.length-1;b>0&&(b>l||o[b].getTrimmedLength()===0);b--)E++;E>0&&(w.push(S+o.length-E),w.push(E)),S+=o.length-1}return w},i.reflowLargerCreateNewLayout=function(d,f){const h=[];let g=0,m=f[g],w=0;for(let S=0;S<d.length;S++)if(m===S){const c=f[++g];d.onDeleteEmitter.fire({index:S-w,amount:c}),S+=c-1,w+=c,m=f[++g]}else h.push(S);return{layout:h,countRemoved:w}},i.reflowLargerApplyNewLayout=function(d,f){const h=[];for(let g=0;g<f.length;g++)h.push(d.get(f[g]));for(let g=0;g<h.length;g++)d.set(g,h[g]);d.length=f.length},i.reflowSmallerGetNewLineLengths=function(d,f,h){const g=[],m=d.map((u,o)=>n(d,o,f)).reduce((u,o)=>u+o);let w=0,S=0,c=0;for(;c<m;){if(m-c<h){g.push(m-c);break}w+=h;const u=n(d,S,f);w>u&&(w-=u,S++);const o=d[S].getWidth(w-1)===2;o&&w--;const l=o?h-1:h;g.push(l),c+=l}return g},i.getWrappedLineTrimmedLength=n},5295:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const d=n(8460),f=n(844),h=n(9092);class g extends f.Disposable{constructor(w,S){super(),this._optionsService=w,this._bufferService=S,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,S){this._normal.resize(w,S),this._alt.resize(w,S),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}i.BufferSet=g},511:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const d=n(482),f=n(643),h=n(3734);class g extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const S=new g;return S.setFromCharData(w),S}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let S=!1;if(w[f.CHAR_DATA_CHAR_INDEX].length>2)S=!0;else if(w[f.CHAR_DATA_CHAR_INDEX].length===2){const c=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){const u=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=u&&u<=57343?this.content=1024*(c-55296)+u-56320+65536|w[f.CHAR_DATA_WIDTH_INDEX]<<22:S=!0}else S=!0}else this.content=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[f.CHAR_DATA_WIDTH_INDEX]<<22;S&&(this.combinedData=w[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=g},643:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const d=n(8460),f=n(844);class h{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}i.Marker=h,h._nextId=1},7116:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(v,i)=>{var n,d,f;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(n||(i.C0=n={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(d||(i.C1=d={})),function(h){h.ST=`${n.ESC}\\`}(f||(i.C1_ESCAPED=f={}))},7399:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const d=n(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(h,g,m,w){const S={type:0,cancel:!1,key:void 0},c=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?S.key=g?d.C0.ESC+"OA":d.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?S.key=g?d.C0.ESC+"OD":d.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?S.key=g?d.C0.ESC+"OC":d.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(S.key=g?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:S.key=h.ctrlKey?"\b":d.C0.DEL,h.altKey&&(S.key=d.C0.ESC+S.key);break;case 9:if(h.shiftKey){S.key=d.C0.ESC+"[Z";break}S.key=d.C0.HT,S.cancel=!0;break;case 13:S.key=h.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,S.cancel=!0;break;case 27:S.key=d.C0.ESC,h.altKey&&(S.key=d.C0.ESC+d.C0.ESC),S.cancel=!0;break;case 37:if(h.metaKey)break;c?(S.key=d.C0.ESC+"[1;"+(c+1)+"D",S.key===d.C0.ESC+"[1;3D"&&(S.key=d.C0.ESC+(m?"b":"[1;5D"))):S.key=g?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(h.metaKey)break;c?(S.key=d.C0.ESC+"[1;"+(c+1)+"C",S.key===d.C0.ESC+"[1;3C"&&(S.key=d.C0.ESC+(m?"f":"[1;5C"))):S.key=g?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(h.metaKey)break;c?(S.key=d.C0.ESC+"[1;"+(c+1)+"A",m||S.key!==d.C0.ESC+"[1;3A"||(S.key=d.C0.ESC+"[1;5A")):S.key=g?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(h.metaKey)break;c?(S.key=d.C0.ESC+"[1;"+(c+1)+"B",m||S.key!==d.C0.ESC+"[1;3B"||(S.key=d.C0.ESC+"[1;5B")):S.key=g?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(S.key=d.C0.ESC+"[2~");break;case 46:S.key=c?d.C0.ESC+"[3;"+(c+1)+"~":d.C0.ESC+"[3~";break;case 36:S.key=c?d.C0.ESC+"[1;"+(c+1)+"H":g?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:S.key=c?d.C0.ESC+"[1;"+(c+1)+"F":g?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:h.shiftKey?S.type=2:h.ctrlKey?S.key=d.C0.ESC+"[5;"+(c+1)+"~":S.key=d.C0.ESC+"[5~";break;case 34:h.shiftKey?S.type=3:h.ctrlKey?S.key=d.C0.ESC+"[6;"+(c+1)+"~":S.key=d.C0.ESC+"[6~";break;case 112:S.key=c?d.C0.ESC+"[1;"+(c+1)+"P":d.C0.ESC+"OP";break;case 113:S.key=c?d.C0.ESC+"[1;"+(c+1)+"Q":d.C0.ESC+"OQ";break;case 114:S.key=c?d.C0.ESC+"[1;"+(c+1)+"R":d.C0.ESC+"OR";break;case 115:S.key=c?d.C0.ESC+"[1;"+(c+1)+"S":d.C0.ESC+"OS";break;case 116:S.key=c?d.C0.ESC+"[15;"+(c+1)+"~":d.C0.ESC+"[15~";break;case 117:S.key=c?d.C0.ESC+"[17;"+(c+1)+"~":d.C0.ESC+"[17~";break;case 118:S.key=c?d.C0.ESC+"[18;"+(c+1)+"~":d.C0.ESC+"[18~";break;case 119:S.key=c?d.C0.ESC+"[19;"+(c+1)+"~":d.C0.ESC+"[19~";break;case 120:S.key=c?d.C0.ESC+"[20;"+(c+1)+"~":d.C0.ESC+"[20~";break;case 121:S.key=c?d.C0.ESC+"[21;"+(c+1)+"~":d.C0.ESC+"[21~";break;case 122:S.key=c?d.C0.ESC+"[23;"+(c+1)+"~":d.C0.ESC+"[23~";break;case 123:S.key=c?d.C0.ESC+"[24;"+(c+1)+"~":d.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(m&&!w||!h.altKey||h.metaKey)!m||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?S.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(S.key=d.C0.US),h.key==="@"&&(S.key=d.C0.NUL)):h.keyCode===65&&(S.type=1);else{const u=f[h.keyCode],o=u==null?void 0:u[h.shiftKey?1:0];if(o)S.key=d.C0.ESC+o;else if(h.keyCode>=65&&h.keyCode<=90){const l=h.ctrlKey?h.keyCode-64:h.keyCode+32;let p=String.fromCharCode(l);h.shiftKey&&(p=p.toUpperCase()),S.key=d.C0.ESC+p}else if(h.keyCode===32)S.key=d.C0.ESC+(h.ctrlKey?d.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let l=h.code.slice(3,4);h.shiftKey||(l=l.toLowerCase()),S.key=d.C0.ESC+l,S.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?S.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?S.key=d.C0.NUL:h.keyCode>=51&&h.keyCode<=55?S.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?S.key=d.C0.DEL:h.keyCode===219?S.key=d.C0.ESC:h.keyCode===220?S.key=d.C0.FS:h.keyCode===221&&(S.key=d.C0.GS)}return S}},482:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},i.utf32ToString=function(n,d=0,f=n.length){let h="";for(let g=d;g<f;++g){let m=n[g];m>65535?(m-=65536,h+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):h+=String.fromCharCode(m)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,d){const f=n.length;if(!f)return 0;let h=0,g=0;if(this._interim){const m=n.charCodeAt(g++);56320<=m&&m<=57343?d[h++]=1024*(this._interim-55296)+m-56320+65536:(d[h++]=this._interim,d[h++]=m),this._interim=0}for(let m=g;m<f;++m){const w=n.charCodeAt(m);if(55296<=w&&w<=56319){if(++m>=f)return this._interim=w,h;const S=n.charCodeAt(m);56320<=S&&S<=57343?d[h++]=1024*(w-55296)+S-56320+65536:(d[h++]=w,d[h++]=S)}else w!==65279&&(d[h++]=w)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,d){const f=n.length;if(!f)return 0;let h,g,m,w,S=0,c=0,u=0;if(this.interim[0]){let p=!1,y=this.interim[0];y&=(224&y)==192?31:(240&y)==224?15:7;let C,E=0;for(;(C=63&this.interim[++E])&&E<4;)y<<=6,y|=C;const b=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=b-E;for(;u<k;){if(u>=f)return 0;if(C=n[u++],(192&C)!=128){u--,p=!0;break}this.interim[E++]=C,y<<=6,y|=63&C}p||(b===2?y<128?u--:d[S++]=y:b===3?y<2048||y>=55296&&y<=57343||y===65279||(d[S++]=y):y<65536||y>1114111||(d[S++]=y)),this.interim.fill(0)}const o=f-4;let l=u;for(;l<f;){for(;!(!(l<o)||128&(h=n[l])||128&(g=n[l+1])||128&(m=n[l+2])||128&(w=n[l+3]));)d[S++]=h,d[S++]=g,d[S++]=m,d[S++]=w,l+=4;if(h=n[l++],h<128)d[S++]=h;else if((224&h)==192){if(l>=f)return this.interim[0]=h,S;if(g=n[l++],(192&g)!=128){l--;continue}if(c=(31&h)<<6|63&g,c<128){l--;continue}d[S++]=c}else if((240&h)==224){if(l>=f)return this.interim[0]=h,S;if(g=n[l++],(192&g)!=128){l--;continue}if(l>=f)return this.interim[0]=h,this.interim[1]=g,S;if(m=n[l++],(192&m)!=128){l--;continue}if(c=(15&h)<<12|(63&g)<<6|63&m,c<2048||c>=55296&&c<=57343||c===65279)continue;d[S++]=c}else if((248&h)==240){if(l>=f)return this.interim[0]=h,S;if(g=n[l++],(192&g)!=128){l--;continue}if(l>=f)return this.interim[0]=h,this.interim[1]=g,S;if(m=n[l++],(192&m)!=128){l--;continue}if(l>=f)return this.interim[0]=h,this.interim[1]=g,this.interim[2]=m,S;if(w=n[l++],(192&w)!=128){l--;continue}if(c=(7&h)<<18|(63&g)<<12|(63&m)<<6|63&w,c<65536||c>1114111)continue;d[S++]=c}}return S}}},225:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const d=n(1480),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;i.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let m=0;m<f.length;++m)g.fill(0,f[m][0],f[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?g[m]:function(w,S){let c,u=0,o=S.length-1;if(w<S[0][0]||w>S[o][1])return!1;for(;o>=u;)if(c=u+o>>1,w>S[c][1])u=c+1;else{if(!(w<S[c][0]))return!0;o=c-1}return!1}(m,h)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}charProperties(m,w){let S=this.wcwidth(m),c=S===0&&w!==0;if(c){const u=d.UnicodeService.extractWidth(w);u===0?c=!1:u>S&&(S=u)}return d.UnicodeService.createPropertyValue(0,S,c)}}},5981:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const d=n(8460),f=n(844);class h extends f.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);const c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(w)}_innerWrite(m=0,w=!0){const S=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const c=this._writeBuffer[this._bufferOffset],u=this._action(c,w);if(u){const l=p=>Date.now()-S>=12?setTimeout(()=>this._innerWrite(0,p)):this._innerWrite(S,p);return void u.catch(p=>(queueMicrotask(()=>{throw p}),Promise.resolve(!1))).then(l)}const o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-S>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=h},5941:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function f(h,g){const m=h.toString(16),w=m.length<2?"0"+m:m;switch(g){case 4:return m[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}i.parseColor=function(h){if(!h)return;let g=h.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const m=n.exec(g);if(m){const w=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/w*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/w*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/w*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),d.exec(g)&&[3,6,9,12].includes(g.length))){const m=g.length/3,w=[0,0,0];for(let S=0;S<3;++S){const c=parseInt(g.slice(m*S,m*S+m),16);w[S]=m===1?c<<4:m===2?c:m===3?c>>4:c>>8}return w}},i.toRgbString=function(h,g=16){const[m,w,S]=h;return`rgb:${f(m,g)}/${f(w,g)}/${f(S,g)}`}},5770:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const d=n(482),f=n(8742),h=n(5770),g=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(w,S){this._handlers[w]===void 0&&(this._handlers[w]=[]);const c=this._handlers[w];return c.push(S),{dispose:()=>{const u=c.indexOf(S);u!==-1&&c.splice(u,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(w,S){if(this.reset(),this._ident=w,this._active=this._handlers[w]||g,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(S);else this._handlerFb(this._ident,"HOOK",S)}put(w,S,c){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(w,S,c);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(w,S,c))}unhook(w,S=!0){if(this._active.length){let c=!1,u=this._active.length-1,o=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,c=S,o=this._stack.fallThrough,this._stack.paused=!1),!o&&c===!1){for(;u>=0&&(c=this._active[u].unhook(w),c!==!0);u--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,c;u--}for(;u>=0;u--)if(c=this._active[u].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",w);this._active=g,this._ident=0}};const m=new f.Params;m.addParam(0),i.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=m,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():m,this._data="",this._hitLimit=!1}put(w,S,c){this._hitLimit||(this._data+=(0,d.utf32ToString)(w,S,c),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let S=!1;if(this._hitLimit)S=!1;else if(w&&(S=this._handler(this._data,this._params),S instanceof Promise))return S.then(c=>(this._params=m,this._data="",this._hitLimit=!1,c));return this._params=m,this._data="",this._hitLimit=!1,S}}},2015:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const d=n(844),f=n(8742),h=n(6242),g=n(6351);class m{constructor(u){this.table=new Uint8Array(u)}setDefault(u,o){this.table.fill(u<<4|o)}add(u,o,l,p){this.table[o<<8|u]=l<<4|p}addMany(u,o,l,p){for(let y=0;y<u.length;y++)this.table[o<<8|u[y]]=l<<4|p}}i.TransitionTable=m;const w=160;i.VT500_TRANSITION_TABLE=function(){const c=new m(4095),u=Array.apply(null,Array(256)).map((E,b)=>b),o=(E,b)=>u.slice(E,b),l=o(32,127),p=o(0,24);p.push(25),p.push.apply(p,o(28,32));const y=o(0,14);let C;for(C in c.setDefault(1,0),c.addMany(l,0,2,0),y)c.addMany([24,26,153,154],C,3,0),c.addMany(o(128,144),C,3,0),c.addMany(o(144,152),C,3,0),c.add(156,C,0,0),c.add(27,C,11,1),c.add(157,C,4,8),c.addMany([152,158,159],C,0,7),c.add(155,C,11,3),c.add(144,C,11,9);return c.addMany(p,0,3,0),c.addMany(p,1,3,1),c.add(127,1,0,1),c.addMany(p,8,0,8),c.addMany(p,3,3,3),c.add(127,3,0,3),c.addMany(p,4,3,4),c.add(127,4,0,4),c.addMany(p,6,3,6),c.addMany(p,5,3,5),c.add(127,5,0,5),c.addMany(p,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(l,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(o(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(l,7,0,7),c.addMany(p,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(o(64,127),3,7,0),c.addMany(o(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(o(48,60),4,8,4),c.addMany(o(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(o(32,64),6,0,6),c.add(127,6,0,6),c.addMany(o(64,127),6,0,0),c.addMany(o(32,48),3,9,5),c.addMany(o(32,48),5,9,5),c.addMany(o(48,64),5,0,6),c.addMany(o(64,127),5,7,0),c.addMany(o(32,48),4,9,5),c.addMany(o(32,48),1,9,2),c.addMany(o(32,48),2,9,2),c.addMany(o(48,127),2,10,0),c.addMany(o(48,80),1,10,0),c.addMany(o(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(o(96,127),1,10,0),c.add(80,1,11,9),c.addMany(p,9,0,9),c.add(127,9,0,9),c.addMany(o(28,32),9,0,9),c.addMany(o(32,48),9,9,12),c.addMany(o(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(p,11,0,11),c.addMany(o(32,128),11,0,11),c.addMany(o(28,32),11,0,11),c.addMany(p,10,0,10),c.add(127,10,0,10),c.addMany(o(28,32),10,0,10),c.addMany(o(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(o(32,48),10,9,12),c.addMany(p,12,0,12),c.add(127,12,0,12),c.addMany(o(28,32),12,0,12),c.addMany(o(32,48),12,9,12),c.addMany(o(48,64),12,0,11),c.addMany(o(64,127),12,12,13),c.addMany(o(64,127),10,12,13),c.addMany(o(64,127),9,12,13),c.addMany(p,13,13,13),c.addMany(l,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(w,0,2,0),c.add(w,8,5,8),c.add(w,6,0,6),c.add(w,11,0,11),c.add(w,13,13,13),c}();class S extends d.Disposable{constructor(u=i.VT500_TRANSITION_TABLE){super(),this._transitions=u,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(o,l,p)=>{},this._executeHandlerFb=o=>{},this._csiHandlerFb=(o,l)=>{},this._escHandlerFb=o=>{},this._errorHandlerFb=o=>o,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(u,o=[64,126]){let l=0;if(u.prefix){if(u.prefix.length>1)throw new Error("only one byte as prefix supported");if(l=u.prefix.charCodeAt(0),l&&60>l||l>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(u.intermediates){if(u.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let y=0;y<u.intermediates.length;++y){const C=u.intermediates.charCodeAt(y);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");l<<=8,l|=C}}if(u.final.length!==1)throw new Error("final must be a single byte");const p=u.final.charCodeAt(0);if(o[0]>p||p>o[1])throw new Error(`final must be in range ${o[0]} .. ${o[1]}`);return l<<=8,l|=p,l}identToString(u){const o=[];for(;u;)o.push(String.fromCharCode(255&u)),u>>=8;return o.reverse().join("")}setPrintHandler(u){this._printHandler=u}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(u,o){const l=this._identifier(u,[48,126]);this._escHandlers[l]===void 0&&(this._escHandlers[l]=[]);const p=this._escHandlers[l];return p.push(o),{dispose:()=>{const y=p.indexOf(o);y!==-1&&p.splice(y,1)}}}clearEscHandler(u){this._escHandlers[this._identifier(u,[48,126])]&&delete this._escHandlers[this._identifier(u,[48,126])]}setEscHandlerFallback(u){this._escHandlerFb=u}setExecuteHandler(u,o){this._executeHandlers[u.charCodeAt(0)]=o}clearExecuteHandler(u){this._executeHandlers[u.charCodeAt(0)]&&delete this._executeHandlers[u.charCodeAt(0)]}setExecuteHandlerFallback(u){this._executeHandlerFb=u}registerCsiHandler(u,o){const l=this._identifier(u);this._csiHandlers[l]===void 0&&(this._csiHandlers[l]=[]);const p=this._csiHandlers[l];return p.push(o),{dispose:()=>{const y=p.indexOf(o);y!==-1&&p.splice(y,1)}}}clearCsiHandler(u){this._csiHandlers[this._identifier(u)]&&delete this._csiHandlers[this._identifier(u)]}setCsiHandlerFallback(u){this._csiHandlerFb=u}registerDcsHandler(u,o){return this._dcsParser.registerHandler(this._identifier(u),o)}clearDcsHandler(u){this._dcsParser.clearHandler(this._identifier(u))}setDcsHandlerFallback(u){this._dcsParser.setHandlerFallback(u)}registerOscHandler(u,o){return this._oscParser.registerHandler(u,o)}clearOscHandler(u){this._oscParser.clearHandler(u)}setOscHandlerFallback(u){this._oscParser.setHandlerFallback(u)}setErrorHandler(u){this._errorHandler=u}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(u,o,l,p,y){this._parseStack.state=u,this._parseStack.handlers=o,this._parseStack.handlerPos=l,this._parseStack.transition=p,this._parseStack.chunkPos=y}parse(u,o,l){let p,y=0,C=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(l===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const b=this._parseStack.handlers;let k=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(l===!1&&k>-1){for(;k>=0&&(p=b[k](this._params),p!==!0);k--)if(p instanceof Promise)return this._parseStack.handlerPos=k,p}this._parseStack.handlers=[];break;case 4:if(l===!1&&k>-1){for(;k>=0&&(p=b[k](),p!==!0);k--)if(p instanceof Promise)return this._parseStack.handlerPos=k,p}this._parseStack.handlers=[];break;case 6:if(y=u[this._parseStack.chunkPos],p=this._dcsParser.unhook(y!==24&&y!==26,l),p)return p;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(y=u[this._parseStack.chunkPos],p=this._oscParser.end(y!==24&&y!==26,l),p)return p;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let b=E;b<o;++b){switch(y=u[b],C=this._transitions.table[this.currentState<<8|(y<160?y:w)],C>>4){case 2:for(let D=b+1;;++D){if(D>=o||(y=u[D])<32||y>126&&y<w){this._printHandler(u,b,D),b=D-1;break}if(++D>=o||(y=u[D])<32||y>126&&y<w){this._printHandler(u,b,D),b=D-1;break}if(++D>=o||(y=u[D])<32||y>126&&y<w){this._printHandler(u,b,D),b=D-1;break}if(++D>=o||(y=u[D])<32||y>126&&y<w){this._printHandler(u,b,D),b=D-1;break}}break;case 3:this._executeHandlers[y]?this._executeHandlers[y]():this._executeHandlerFb(y),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:b,code:y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const k=this._csiHandlers[this._collect<<8|y];let P=k?k.length-1:-1;for(;P>=0&&(p=k[P](this._params),p!==!0);P--)if(p instanceof Promise)return this._preserveStack(3,k,P,C,b),p;P<0&&this._csiHandlerFb(this._collect<<8|y,this._params),this.precedingJoinState=0;break;case 8:do switch(y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(y-48)}while(++b<o&&(y=u[b])>47&&y<60);b--;break;case 9:this._collect<<=8,this._collect|=y;break;case 10:const M=this._escHandlers[this._collect<<8|y];let I=M?M.length-1:-1;for(;I>=0&&(p=M[I](),p!==!0);I--)if(p instanceof Promise)return this._preserveStack(4,M,I,C,b),p;I<0&&this._escHandlerFb(this._collect<<8|y),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|y,this._params);break;case 13:for(let D=b+1;;++D)if(D>=o||(y=u[D])===24||y===26||y===27||y>127&&y<w){this._dcsParser.put(u,b,D),b=D-1;break}break;case 14:if(p=this._dcsParser.unhook(y!==24&&y!==26),p)return this._preserveStack(6,[],0,C,b),p;y===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let D=b+1;;D++)if(D>=o||(y=u[D])<32||y>127&&y<w){this._oscParser.put(u,b,D),b=D-1;break}break;case 6:if(p=this._oscParser.end(y!==24&&y!==26),p)return this._preserveStack(5,[],0,C,b),p;y===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}i.EscapeSequenceParser=S},6242:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const d=n(5770),f=n(482),h=[];i.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,m){this._handlers[g]===void 0&&(this._handlers[g]=[]);const w=this._handlers[g];return w.push(m),{dispose:()=>{const S=w.indexOf(m);S!==-1&&w.splice(S,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,m,w){if(this._active.length)for(let S=this._active.length-1;S>=0;S--)this._active[S].put(g,m,w);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(g,m,w))}start(){this.reset(),this._state=1}put(g,m,w){if(this._state!==3){if(this._state===1)for(;m<w;){const S=g[m++];if(S===59){this._state=2,this._start();break}if(S<48||57<S)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+S-48}this._state===2&&w-m>0&&this._put(g,m,w)}}end(g,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,S=this._active.length-1,c=!1;if(this._stack.paused&&(S=this._stack.loopPosition-1,w=m,c=this._stack.fallThrough,this._stack.paused=!1),!c&&w===!1){for(;S>=0&&(w=this._active[S].end(g),w!==!0);S--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!1,w;S--}for(;S>=0;S--)if(w=this._active[S].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",g);this._active=h,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,m,w){this._hitLimit||(this._data+=(0,f.utf32ToString)(g,m,w),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let m=!1;if(this._hitLimit)m=!1;else if(g&&(m=this._handler(this._data),m instanceof Promise))return m.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,m}}},8742:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const n=2147483647;class d{static fromArray(h){const g=new d;if(!h.length)return g;for(let m=Array.isArray(h[0])?1:0;m<h.length;++m){const w=h[m];if(Array.isArray(w))for(let S=0;S<w.length;++S)g.addSubParam(w[S]);else g.addParam(w)}return g}constructor(h=32,g=32){if(this.maxLength=h,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new d(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let g=0;g<this.length;++g){h.push(this.params[g]);const m=this._subParamsIdx[g]>>8,w=255&this._subParamsIdx[g];w-m>0&&h.push(Array.prototype.slice.call(this._subParams,m,w))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>n?n:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>n?n:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const g=this._subParamsIdx[h]>>8,m=255&this._subParamsIdx[h];return m-g>0?this._subParams.subarray(g,m):null}getSubParamsAll(){const h={};for(let g=0;g<this.length;++g){const m=this._subParamsIdx[g]>>8,w=255&this._subParamsIdx[g];w-m>0&&(h[g]=this._subParams.slice(m,w))}return h}addDigit(h){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const m=this._digitIsSub?this._subParams:this.params,w=m[g-1];m[g-1]=~w?Math.min(10*w+h,n):h}}i.Params=d},5741:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,d){const f={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(f),d.dispose=()=>this._wrappedAddonDispose(f),d.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let d=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===n){d=f;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(d,1)}}},8771:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const d=n(3785),f=n(511);i.BufferApiView=class{constructor(h,g){this._buffer=h,this.type=g}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const g=this._buffer.lines.get(h);if(g)return new d.BufferLineApiView(g)}getNullCell(){return new f.CellData}}},3785:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const d=n(511);i.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,h){if(!(f<0||f>=this._line.length))return h?(this._line.loadCell(f,h),h):this._line.loadCell(f,new d.CellData)}translateToString(f,h,g){return this._line.translateToString(f,h,g)}}},8285:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const d=n(8771),f=n(8460),h=n(844);class g extends h.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=g},7975:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,d){return this._core.registerCsiHandler(n,f=>d(f.toArray()))}addCsiHandler(n,d){return this.registerCsiHandler(n,d)}registerDcsHandler(n,d){return this._core.registerDcsHandler(n,(f,h)=>d(f,h.toArray()))}addDcsHandler(n,d){return this.registerDcsHandler(n,d)}registerEscHandler(n,d){return this._core.registerEscHandler(n,d)}addEscHandler(n,d){return this.registerEscHandler(n,d)}registerOscHandler(n,d){return this._core.registerOscHandler(n,d)}addOscHandler(n,d){return this.registerOscHandler(n,d)}}},7090:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(v,i,n){var d=this&&this.__decorate||function(c,u,o,l){var p,y=arguments.length,C=y<3?u:l===null?l=Object.getOwnPropertyDescriptor(u,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(c,u,o,l);else for(var E=c.length-1;E>=0;E--)(p=c[E])&&(C=(y<3?p(C):y>3?p(u,o,C):p(u,o))||C);return y>3&&C&&Object.defineProperty(u,o,C),C},f=this&&this.__param||function(c,u){return function(o,l){u(o,l,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const h=n(8460),g=n(844),m=n(5295),w=n(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let S=i.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(c,this))}resize(c,u){this.cols=c,this.rows=u,this.buffers.resize(c,u),this._onResize.fire({cols:c,rows:u})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,u=!1){const o=this.buffer;let l;l=this._cachedBlankLine,l&&l.length===this.cols&&l.getFg(0)===c.fg&&l.getBg(0)===c.bg||(l=o.getBlankLine(c,u),this._cachedBlankLine=l),l.isWrapped=u;const p=o.ybase+o.scrollTop,y=o.ybase+o.scrollBottom;if(o.scrollTop===0){const C=o.lines.isFull;y===o.lines.length-1?C?o.lines.recycle().copyFrom(l):o.lines.push(l.clone()):o.lines.splice(y+1,0,l.clone()),C?this.isUserScrolling&&(o.ydisp=Math.max(o.ydisp-1,0)):(o.ybase++,this.isUserScrolling||o.ydisp++)}else{const C=y-p+1;o.lines.shiftElements(p+1,C-1,-1),o.lines.set(y,l.clone())}this.isUserScrolling||(o.ydisp=o.ybase),this._onScroll.fire(o.ydisp)}scrollLines(c,u,o){const l=this.buffer;if(c<0){if(l.ydisp===0)return;this.isUserScrolling=!0}else c+l.ydisp>=l.ybase&&(this.isUserScrolling=!1);const p=l.ydisp;l.ydisp=Math.max(Math.min(l.ydisp+c,l.ybase),0),p!==l.ydisp&&(u||this._onScroll.fire(l.ydisp))}};i.BufferService=S=d([f(0,w.IOptionsService)],S)},7994:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,d){this._charsets[n]=d,this.glevel===n&&(this.charset=d)}}},1753:function(v,i,n){var d=this&&this.__decorate||function(l,p,y,C){var E,b=arguments.length,k=b<3?p:C===null?C=Object.getOwnPropertyDescriptor(p,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,p,y,C);else for(var P=l.length-1;P>=0;P--)(E=l[P])&&(k=(b<3?E(k):b>3?E(p,y,k):E(p,y))||k);return b>3&&k&&Object.defineProperty(p,y,k),k},f=this&&this.__param||function(l,p){return function(y,C){p(y,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const h=n(2585),g=n(8460),m=n(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:l=>l.button!==4&&l.action===1&&(l.ctrl=!1,l.alt=!1,l.shift=!1,!0)},VT200:{events:19,restrict:l=>l.action!==32},DRAG:{events:23,restrict:l=>l.action!==32||l.button!==3},ANY:{events:31,restrict:l=>!0}};function S(l,p){let y=(l.ctrl?16:0)|(l.shift?4:0)|(l.alt?8:0);return l.button===4?(y|=64,y|=l.action):(y|=3&l.button,4&l.button&&(y|=64),8&l.button&&(y|=128),l.action===32?y|=32:l.action!==0||p||(y|=3)),y}const c=String.fromCharCode,u={DEFAULT:l=>{const p=[S(l,!1)+32,l.col+32,l.row+32];return p[0]>255||p[1]>255||p[2]>255?"":`\x1B[M${c(p[0])}${c(p[1])}${c(p[2])}`},SGR:l=>{const p=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${S(l,!0)};${l.col};${l.row}${p}`},SGR_PIXELS:l=>{const p=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${S(l,!0)};${l.x};${l.y}${p}`}};let o=i.CoreMouseService=class extends m.Disposable{constructor(l,p){super(),this._bufferService=l,this._coreService=p,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const y of Object.keys(w))this.addProtocol(y,w[y]);for(const y of Object.keys(u))this.addEncoding(y,u[y]);this.reset()}addProtocol(l,p){this._protocols[l]=p}addEncoding(l,p){this._encodings[l]=p}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(l){if(!this._protocols[l])throw new Error(`unknown protocol "${l}"`);this._activeProtocol=l,this._onProtocolChange.fire(this._protocols[l].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(l){if(!this._encodings[l])throw new Error(`unknown encoding "${l}"`);this._activeEncoding=l}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(l){if(l.col<0||l.col>=this._bufferService.cols||l.row<0||l.row>=this._bufferService.rows||l.button===4&&l.action===32||l.button===3&&l.action!==32||l.button!==4&&(l.action===2||l.action===3)||(l.col++,l.row++,l.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,l,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(l))return!1;const p=this._encodings[this._activeEncoding](l);return p&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(p):this._coreService.triggerDataEvent(p,!0)),this._lastEvent=l,!0}explainEvents(l){return{down:!!(1&l),up:!!(2&l),drag:!!(4&l),move:!!(8&l),wheel:!!(16&l)}}_equalEvents(l,p,y){if(y){if(l.x!==p.x||l.y!==p.y)return!1}else if(l.col!==p.col||l.row!==p.row)return!1;return l.button===p.button&&l.action===p.action&&l.ctrl===p.ctrl&&l.alt===p.alt&&l.shift===p.shift}};i.CoreMouseService=o=d([f(0,h.IBufferService),f(1,h.ICoreService)],o)},6975:function(v,i,n){var d=this&&this.__decorate||function(o,l,p,y){var C,E=arguments.length,b=E<3?l:y===null?y=Object.getOwnPropertyDescriptor(l,p):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(o,l,p,y);else for(var k=o.length-1;k>=0;k--)(C=o[k])&&(b=(E<3?C(b):E>3?C(l,p,b):C(l,p))||b);return E>3&&b&&Object.defineProperty(l,p,b),b},f=this&&this.__param||function(o,l){return function(p,y){l(p,y,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const h=n(1439),g=n(8460),m=n(844),w=n(2585),S=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let u=i.CoreService=class extends m.Disposable{constructor(o,l,p){super(),this._bufferService=o,this._logService=l,this._optionsService=p,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(S),this.decPrivateModes=(0,h.clone)(c)}reset(){this.modes=(0,h.clone)(S),this.decPrivateModes=(0,h.clone)(c)}triggerDataEvent(o,l=!1){if(this._optionsService.rawOptions.disableStdin)return;const p=this._bufferService.buffer;l&&this._optionsService.rawOptions.scrollOnUserInput&&p.ybase!==p.ydisp&&this._onRequestScrollToBottom.fire(),l&&this._onUserInput.fire(),this._logService.debug(`sending data "${o}"`,()=>o.split("").map(y=>y.charCodeAt(0))),this._onData.fire(o)}triggerBinaryEvent(o){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${o}"`,()=>o.split("").map(l=>l.charCodeAt(0))),this._onBinary.fire(o))}};i.CoreService=u=d([f(0,w.IBufferService),f(1,w.ILogService),f(2,w.IOptionsService)],u)},9074:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const d=n(8055),f=n(8460),h=n(844),g=n(6106);let m=0,w=0;class S extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(o=>o==null?void 0:o.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(o){if(o.marker.isDisposed)return;const l=new c(o);if(l){const p=l.marker.onDispose(()=>l.dispose());l.onDispose(()=>{l&&(this._decorations.delete(l)&&this._onDecorationRemoved.fire(l),p.dispose())}),this._decorations.insert(l),this._onDecorationRegistered.fire(l)}return l}reset(){for(const o of this._decorations.values())o.dispose();this._decorations.clear()}*getDecorationsAtCell(o,l,p){let y=0,C=0;for(const E of this._decorations.getKeyIterator(l))y=E.options.x??0,C=y+(E.options.width??1),o>=y&&o<C&&(!p||(E.options.layer??"bottom")===p)&&(yield E)}forEachDecorationAtCell(o,l,p,y){this._decorations.forEachByKey(l,C=>{m=C.options.x??0,w=m+(C.options.width??1),o>=m&&o<w&&(!p||(C.options.layer??"bottom")===p)&&y(C)})}}i.DecorationService=S;class c extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(o){super(),this.options=o,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=o.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const d=n(2585),f=n(8343);class h{constructor(...m){this._entries=new Map;for(const[w,S]of m)this.set(w,S)}set(m,w){const S=this._entries.get(m);return this._entries.set(m,w),S}forEach(m){for(const[w,S]of this._entries.entries())m(w,S)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}i.ServiceCollection=h,i.InstantiationService=class{constructor(){this._services=new h,this._services.set(d.IInstantiationService,this)}setService(g,m){this._services.set(g,m)}getService(g){return this._services.get(g)}createInstance(g,...m){const w=(0,f.getServiceDependencies)(g).sort((u,o)=>u.index-o.index),S=[];for(const u of w){const o=this._services.get(u.id);if(!o)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${u.id}.`);S.push(o)}const c=w.length>0?w[0].index:m.length;if(m.length!==c)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${c+1} conflicts with ${m.length} static arguments`);return new g(...m,...S)}}},7866:function(v,i,n){var d=this&&this.__decorate||function(c,u,o,l){var p,y=arguments.length,C=y<3?u:l===null?l=Object.getOwnPropertyDescriptor(u,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(c,u,o,l);else for(var E=c.length-1;E>=0;E--)(p=c[E])&&(C=(y<3?p(C):y>3?p(u,o,C):p(u,o))||C);return y>3&&C&&Object.defineProperty(u,o,C),C},f=this&&this.__param||function(c,u){return function(o,l){u(o,l,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=n(844),g=n(2585),m={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let w,S=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let u=0;u<c.length;u++)typeof c[u]=="function"&&(c[u]=c[u]())}_log(c,u,o){this._evalLazyOptionalParams(o),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+u,...o)}trace(c,...u){var o;this._logLevel<=g.LogLevelEnum.TRACE&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.trace.bind(this._optionsService.options.logger))??console.log,c,u)}debug(c,...u){var o;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.debug.bind(this._optionsService.options.logger))??console.log,c,u)}info(c,...u){var o;this._logLevel<=g.LogLevelEnum.INFO&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.info.bind(this._optionsService.options.logger))??console.info,c,u)}warn(c,...u){var o;this._logLevel<=g.LogLevelEnum.WARN&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.warn.bind(this._optionsService.options.logger))??console.warn,c,u)}error(c,...u){var o;this._logLevel<=g.LogLevelEnum.ERROR&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.error.bind(this._optionsService.options.logger))??console.error,c,u)}};i.LogService=S=d([f(0,g.IOptionsService)],S),i.setTraceLogger=function(c){w=c},i.traceCall=function(c,u,o){if(typeof o.value!="function")throw new Error("not supported");const l=o.value;o.value=function(...p){if(w.logLevel!==g.LogLevelEnum.TRACE)return l.apply(this,p);w.trace(`GlyphRenderer#${l.name}(${p.map(C=>JSON.stringify(C)).join(", ")})`);const y=l.apply(this,p);return w.trace(`GlyphRenderer#${l.name} return`,y),y}}},7302:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const d=n(8460),f=n(844),h=n(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends f.Disposable{constructor(S){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const c={...i.DEFAULT_OPTIONS};for(const u in S)if(u in c)try{const o=S[u];c[u]=this._sanitizeAndValidateOption(u,o)}catch(o){console.error(o)}this.rawOptions=c,this.options={...c},this._setupOptions(),this.register((0,f.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(S,c){return this.onOptionChange(u=>{u===S&&c(this.rawOptions[S])})}onMultipleOptionChange(S,c){return this.onOptionChange(u=>{S.indexOf(u)!==-1&&c()})}_setupOptions(){const S=u=>{if(!(u in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);return this.rawOptions[u]},c=(u,o)=>{if(!(u in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);o=this._sanitizeAndValidateOption(u,o),this.rawOptions[u]!==o&&(this.rawOptions[u]=o,this._onOptionChange.fire(u))};for(const u in this.rawOptions){const o={get:S.bind(this,u),set:c.bind(this,u)};Object.defineProperty(this.options,u,o)}}_sanitizeAndValidateOption(S,c){switch(S){case"cursorStyle":if(c||(c=i.DEFAULT_OPTIONS[S]),!function(u){return u==="block"||u==="underline"||u==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${S}`);break;case"wordSeparator":c||(c=i.DEFAULT_OPTIONS[S]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=g.includes(c)?c:i.DEFAULT_OPTIONS[S];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${S} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${S} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${S} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${S} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}i.OptionsService=m},2660:function(v,i,n){var d=this&&this.__decorate||function(m,w,S,c){var u,o=arguments.length,l=o<3?w:c===null?c=Object.getOwnPropertyDescriptor(w,S):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(m,w,S,c);else for(var p=m.length-1;p>=0;p--)(u=m[p])&&(l=(o<3?u(l):o>3?u(w,S,l):u(w,S))||l);return o>3&&l&&Object.defineProperty(w,S,l),l},f=this&&this.__param||function(m,w){return function(S,c){w(S,c,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const h=n(2585);let g=i.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){const w=this._bufferService.buffer;if(m.id===void 0){const p=w.addMarker(w.ybase+w.y),y={data:m,id:this._nextId++,lines:[p]};return p.onDispose(()=>this._removeMarkerFromLink(y,p)),this._dataByLinkId.set(y.id,y),y.id}const S=m,c=this._getEntryIdKey(S),u=this._entriesWithId.get(c);if(u)return this.addLineToLink(u.id,w.ybase+w.y),u.id;const o=w.addMarker(w.ybase+w.y),l={id:this._nextId++,key:this._getEntryIdKey(S),data:S,lines:[o]};return o.onDispose(()=>this._removeMarkerFromLink(l,o)),this._entriesWithId.set(l.key,l),this._dataByLinkId.set(l.id,l),l.id}addLineToLink(m,w){const S=this._dataByLinkId.get(m);if(S&&S.lines.every(c=>c.line!==w)){const c=this._bufferService.buffer.addMarker(w);S.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(S,c))}}getLinkData(m){var w;return(w=this._dataByLinkId.get(m))==null?void 0:w.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,w){const S=m.lines.indexOf(w);S!==-1&&(m.lines.splice(S,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};i.OscLinkService=g=d([f(0,h.IBufferService)],g)},8343:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const n="di$target",d="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(f){return f[d]||[]},i.createDecorator=function(f){if(i.serviceRegistry.has(f))return i.serviceRegistry.get(f);const h=function(g,m,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(S,c,u){c[n]===c?c[d].push({id:S,index:u}):(c[d]=[{id:S,index:u}],c[n]=c)})(h,g,w)};return h.toString=()=>f,i.serviceRegistry.set(f,h),h}},2585:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const d=n(8343);var f;i.IBufferService=(0,d.createDecorator)("BufferService"),i.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),i.ICoreService=(0,d.createDecorator)("CoreService"),i.ICharsetService=(0,d.createDecorator)("CharsetService"),i.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(f||(i.LogLevelEnum=f={})),i.ILogService=(0,d.createDecorator)("LogService"),i.IOptionsService=(0,d.createDecorator)("OptionsService"),i.IOscLinkService=(0,d.createDecorator)("OscLinkService"),i.IUnicodeService=(0,d.createDecorator)("UnicodeService"),i.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(v,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const d=n(8460),f=n(225);class h{static extractShouldJoin(m){return(1&m)!=0}static extractWidth(m){return m>>1&3}static extractCharKind(m){return m>>3}static createPropertyValue(m,w,S=!1){return(16777215&m)<<3|(3&w)<<1|(S?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const m=new f.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let w=0,S=0;const c=m.length;for(let u=0;u<c;++u){let o=m.charCodeAt(u);if(55296<=o&&o<=56319){if(++u>=c)return w+this.wcwidth(o);const y=m.charCodeAt(u);56320<=y&&y<=57343?o=1024*(o-55296)+y-56320+65536:w+=this.wcwidth(y)}const l=this.charProperties(o,S);let p=h.extractWidth(l);h.extractShouldJoin(l)&&(p-=h.extractWidth(S)),w+=p,S=l}return w}charProperties(m,w){return this._activeProvider.charProperties(m,w)}}i.UnicodeService=h}},r={};function a(v){var i=r[v];if(i!==void 0)return i.exports;var n=r[v]={exports:{}};return s[v].call(n.exports,n,n.exports,a),n.exports}var _={};return(()=>{var v=_;Object.defineProperty(v,"__esModule",{value:!0}),v.Terminal=void 0;const i=a(9042),n=a(3236),d=a(844),f=a(5741),h=a(8285),g=a(7975),m=a(7090),w=["cols","rows"];class S extends d.Disposable{constructor(u){super(),this._core=this.register(new n.Terminal(u)),this._addonManager=this.register(new f.AddonManager),this._publicOptions={...this._core.options};const o=p=>this._core.options[p],l=(p,y)=>{this._checkReadonlyOptions(p),this._core.options[p]=y};for(const p in this._core.options){const y={get:o.bind(this,p),set:l.bind(this,p)};Object.defineProperty(this._publicOptions,p,y)}}_checkReadonlyOptions(u){if(w.includes(u))throw new Error(`Option "${u}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const u=this._core.coreService.decPrivateModes;let o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:u.applicationCursorKeys,applicationKeypadMode:u.applicationKeypad,bracketedPasteMode:u.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:u.origin,reverseWraparoundMode:u.reverseWraparound,sendFocusMode:u.sendFocus,wraparoundMode:u.wraparound}}get options(){return this._publicOptions}set options(u){for(const o in u)this._publicOptions[o]=u[o]}blur(){this._core.blur()}focus(){this._core.focus()}input(u,o=!0){this._core.input(u,o)}resize(u,o){this._verifyIntegers(u,o),this._core.resize(u,o)}open(u){this._core.open(u)}attachCustomKeyEventHandler(u){this._core.attachCustomKeyEventHandler(u)}attachCustomWheelEventHandler(u){this._core.attachCustomWheelEventHandler(u)}registerLinkProvider(u){return this._core.registerLinkProvider(u)}registerCharacterJoiner(u){return this._checkProposedApi(),this._core.registerCharacterJoiner(u)}deregisterCharacterJoiner(u){this._checkProposedApi(),this._core.deregisterCharacterJoiner(u)}registerMarker(u=0){return this._verifyIntegers(u),this._core.registerMarker(u)}registerDecoration(u){return this._checkProposedApi(),this._verifyPositiveIntegers(u.x??0,u.width??0,u.height??0),this._core.registerDecoration(u)}hasSelection(){return this._core.hasSelection()}select(u,o,l){this._verifyIntegers(u,o,l),this._core.select(u,o,l)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(u,o){this._verifyIntegers(u,o),this._core.selectLines(u,o)}dispose(){super.dispose()}scrollLines(u){this._verifyIntegers(u),this._core.scrollLines(u)}scrollPages(u){this._verifyIntegers(u),this._core.scrollPages(u)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(u){this._verifyIntegers(u),this._core.scrollToLine(u)}clear(){this._core.clear()}write(u,o){this._core.write(u,o)}writeln(u,o){this._core.write(u),this._core.write(`\r
`,o)}paste(u){this._core.paste(u)}refresh(u,o){this._verifyIntegers(u,o),this._core.refresh(u,o)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(u){this._addonManager.loadAddon(this,u)}static get strings(){return i}_verifyIntegers(...u){for(const o of u)if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...u){for(const o of u)if(o&&(o===1/0||isNaN(o)||o%1!=0||o<0))throw new Error("This API only accepts positive integers")}}v.Terminal=S})(),_})())})(ea);var sa=ea.exports,ia={exports:{}};(function(e,t){(function(s,r){e.exports=r()})(self,()=>(()=>{var s={};return(()=>{var r=s;Object.defineProperty(r,"__esModule",{value:!0}),r.FitAddon=void 0,r.FitAddon=class{activate(a){this._terminal=a}dispose(){}fit(){const a=this.proposeDimensions();if(!a||!this._terminal||isNaN(a.cols)||isNaN(a.rows))return;const _=this._terminal._core;this._terminal.rows===a.rows&&this._terminal.cols===a.cols||(_._renderService.clear(),this._terminal.resize(a.cols,a.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const a=this._terminal._core,_=a._renderService.dimensions;if(_.css.cell.width===0||_.css.cell.height===0)return;const v=this._terminal.options.scrollback===0?0:a.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(i.getPropertyValue("height")),d=Math.max(0,parseInt(i.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),h=n-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),g=d-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-v;return{cols:Math.max(2,Math.floor(g/_.css.cell.width)),rows:Math.max(1,Math.floor(h/_.css.cell.height))}}}})(),s})())})(ia);var ra=ia.exports,na={exports:{}};(function(e,t){(function(s,r){e.exports=r()})(self,()=>(()=>{var s={};return(()=>{var r=s;function a(_,v,i){return _.addEventListener(v,i),{dispose:()=>{i&&_.removeEventListener(v,i)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.AttachAddon=void 0,r.AttachAddon=class{constructor(_,v){this._disposables=[],this._socket=_,this._socket.binaryType="arraybuffer",this._bidirectional=!(v&&v.bidirectional===!1)}activate(_){this._disposables.push(a(this._socket,"message",v=>{const i=v.data;_.write(typeof i=="string"?i:new Uint8Array(i))})),this._bidirectional&&(this._disposables.push(_.onData(v=>this._sendData(v))),this._disposables.push(_.onBinary(v=>this._sendBinary(v)))),this._disposables.push(a(this._socket,"close",()=>this.dispose())),this._disposables.push(a(this._socket,"error",()=>this.dispose()))}dispose(){for(const _ of this._disposables)_.dispose()}_sendData(_){this._checkOpenSocket()&&this._socket.send(_)}_sendBinary(_){if(!this._checkOpenSocket())return;const v=new Uint8Array(_.length);for(let i=0;i<_.length;++i)v[i]=255&_.charCodeAt(i);this._socket.send(v)}_checkOpenSocket(){switch(this._socket.readyState){case WebSocket.OPEN:return!0;case WebSocket.CONNECTING:throw new Error("Attach addon was loaded before socket was open");case WebSocket.CLOSING:return console.warn("Attach addon socket is closing"),!1;case WebSocket.CLOSED:throw new Error("Attach addon socket is closed");default:throw new Error("Unexpected socket state")}}}})(),s})())})(na);var Wu=na.exports,ju={cursorBlink:!0,lineHeight:1.2,tabStopWidth:4,convertEol:!0,theme:{background:"#303446",foreground:"#c6d0f5",cursor:"#c6d0f5"}};const Uu={class:"h-full w-full"},qu=xe({__name:"TaskLogTerminal",props:{task:{}},setup(e){const t=e,s=Lt(),r=Pe(null),a=new sa.Terminal(ju),_=new ra.FitAddon,v=()=>_.fit();let i;return wt(()=>t.task,async()=>{try{const n=`undefined/api/scriptflow/task/${t.task.id}/log-ws`;i=new WebSocket(n),i.onerror=()=>{s.addToast("WebSocket connection failed.","error")};const d=new Wu.AttachAddon(i,{bidirectional:!1});a.loadAddon(d)}catch(n){s.addToast(n.message,"error")}}),Rt(()=>{r.value&&(a.open(r.value),a.loadAddon(_),_.fit(),window.addEventListener("resize",v),window.addEventListener("resize",()=>{_.fit()}))}),Es(()=>{window.removeEventListener("resize",v),a.dispose()}),(n,d)=>(he(),pe("div",Uu,[W("div",{ref_key:"terminalRef",ref:r,class:""},null,512)]))}}),Ku={class:"flex flex-row gap-4"},zu={class:"basis-1/4"},Vu={class:"basis-3/4"},Gu={role:"tablist",class:"tabs tabs-lifted"},Ju={role:"tabpanel",class:"tab-content bg-base-100 border-base-300 rounded-box p-6"},Xu=xe({__name:"TaskLogView",setup(e){const t=Lt(),s=gr(),r=Zt(),a=li(),_=Array.isArray(a.params.id)?a.params.id[0]:a.params.id,v=we(()=>s.getTask);Rt(async()=>{try{await s.fetchTask(_)}catch(n){t.addToast(n.message,"error")}});const i=()=>{r.push({name:"task",params:{id:_}})};return(n,d)=>(he(),pe(Oe,null,[fe(Ls,{title:`Task log ${Ye(_)}`},null,8,["title"]),W("div",Ku,[W("div",zu,[fe(Qo,{task:v.value},null,8,["task"])]),W("div",Vu,[W("div",Gu,[W("a",{role:"tab",class:"tab",onClick:d[0]||(d[0]=f=>i())},"History"),d[1]||(d[1]=W("div",{role:"tabpanel",class:"tab-content bg-base-100 border-base-300 rounded-box p-6"},null,-1)),d[2]||(d[2]=W("a",{role:"tab",class:"tab tab-active"},"Logs",-1)),W("div",Ju,[fe(qu,{task:v.value},null,8,["task"])])])])])],64))}}),Yu={class:"card card-compact bg-base-200 w-96 shadow-xl"},Zu={class:"card-body"},Qu={class:"card-title"},ed={class:"table table-xs"},td=xe({__name:"RunCard",props:{run:{}},setup(e){const t=e,s=Zt(),r=()=>{var a,_,v;s.push({name:"task",params:{id:(v=(_=(a=t.run)==null?void 0:a.expand)==null?void 0:_.task)==null?void 0:v.id}})};return(a,_)=>{var v,i,n,d,f,h;return he(),pe("div",Yu,[W("div",Zu,[W("h2",Qu,Ce((n=(i=(v=t.run)==null?void 0:v.expand)==null?void 0:i.task)==null?void 0:n.name),1),t.run.command?(he(),Je(ui,{key:0,command:t.run.command},null,8,["command"])):ft("",!0),W("table",ed,[W("tbody",null,[W("tr",null,[_[1]||(_[1]=W("td",null,"Task",-1)),W("td",null,[fe(Ht,{id:(h=(f=(d=t.run)==null?void 0:d.expand)==null?void 0:f.task)==null?void 0:h.id,onClick:_[0]||(_[0]=g=>r())},null,8,["id"])])]),W("tr",null,[_[2]||(_[2]=W("td",null,"Id",-1)),W("td",null,[fe(Ht,{id:t.run.id},null,8,["id"])])]),W("tr",null,[_[3]||(_[3]=W("td",null,"status",-1)),W("td",null,[fe(mr,{run:t.run},null,8,["run"])])]),W("tr",null,[_[4]||(_[4]=W("td",null,"Host",-1)),W("td",null,Ce(t.run.host),1)]),W("tr",null,[_[5]||(_[5]=W("td",null,"Exit code",-1)),W("td",null,Ce(t.run.exit_code),1)]),W("tr",null,[_[6]||(_[6]=W("td",null,"Connection error",-1)),W("td",null,Ce(t.run.connection_error),1)]),W("tr",null,[_[7]||(_[7]=W("td",null,"Created",-1)),W("td",null,Ce(t.run.created),1)]),W("tr",null,[_[8]||(_[8]=W("td",null,"Updated",-1)),W("td",null,Ce(t.run.updated),1)])])])])])}}});var sd={cursorBlink:!0,lineHeight:1.2,tabStopWidth:4,convertEol:!0,theme:{background:"#303446",foreground:"#c6d0f5",cursor:"#c6d0f5"}};const id={class:"h-full w-full"},rd=xe({__name:"RunLogTerminal",props:{run:{}},setup(e){const t=e,s=Rs(),r=Lt(),a=Pe(null),_=new sa.Terminal(sd),v=new ra.FitAddon,i=()=>v.fit();wt(()=>t.run,async()=>{try{await n()}catch(d){r.addToast(d.message,"error")}});const n=async()=>{const d=`undefined/api/scriptflow/run/${t.run.id}/log`;fetch(d,{method:"GET",headers:{Authorization:`${s.token}`}}).then(f=>f.text()).then(f=>{const h=JSON.parse(f);if("code"in h)r.addToast(h.message,"error");else for(const g of h.logs)_.write(g+`
`)})};return Rt(()=>{a.value&&(_.open(a.value),_.element&&(_.element.style.padding="0.5rem")),_.loadAddon(v),v.fit(),window.addEventListener("resize",i),window.addEventListener("resize",()=>{v.fit()})}),Es(()=>{window.removeEventListener("resize",i),_.dispose()}),(d,f)=>(he(),pe("div",id,[W("div",{ref_key:"terminalRef",ref:a,class:"m-2"},null,512)]))}}),nd={class:"flex flex-row gap-4"},od={class:"basis-1/4"},ad={class:"basis-3/4"},cd=xe({__name:"RunView",setup(e){const t=Lt(),s=vr(),r=li(),a=Array.isArray(r.params.id)?r.params.id[0]:r.params.id,_=we(()=>s.getRun);return Rt(async()=>{try{await s.fetchRun(a)}catch(v){t.addToast(v.message,"error")}}),(v,i)=>(he(),pe(Oe,null,[fe(Ls,{title:`Run ${_.value.id}`},null,8,["title"]),W("div",nd,[W("div",od,[fe(td,{run:_.value},null,8,["run"])]),W("div",ad,[fe(rd,{run:_.value},null,8,["run"])])])],64))}}),As=(e,t)=>{const s=e.__vccOpts||e;for(const[r,a]of t)s[r]=a;return s},ld={},hd={class:"flex"};function ud(e,t){return he(),pe("div",hd,t[0]||(t[0]=[W("h1",{class:"text-xl text-bold mx-auto"},"Page not found",-1)]))}const dd=As(ld,[["render",ud]]),ys=Mh({history:uh("./"),routes:[{path:"/",name:"home",component:_u,meta:{title:"Home",requireAuth:!1}},{path:"/tasks/:projectId",name:"tasks",component:Cu,meta:{title:"Tasks",requireAuth:!0}},{path:"/task/:id",children:[{name:"task",path:"hostory",component:Nu,meta:{title:"Task",requireAuth:!0}},{name:"task-log",path:"log",component:Xu,meta:{title:"Task",requireAuth:!0}}]},{path:"/run/:id",name:"run",component:cd,meta:{title:"Run",requireAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:dd,meta:{title:"Page not found",requireAuth:!1}}]}),fd={class:"flex items-center justify-between p-4 bg-neutral-content text-primary"},_d=xe({__name:"Header",setup(e){const t=Rs(),s=async()=>{await t.logout(),ys.push({name:"home"})};return(r,a)=>(he(),pe("header",fd,[a[0]||(a[0]=W("div",{class:"flex items-start space-x-4"},[W("span",{class:"text-xl font-bold"},[W("a",{href:"/",class:"text-primary"}," Scriptflow ")])],-1)),W("nav",null,[Ye(t).isAuthenticated?(he(),pe("button",{key:0,onClick:s,class:"btn btn-ghost btn-xs"},"Logout")):ft("",!0)])]))}}),pd={},gd={class:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-blue-500 bg-blue-100 rounded-lg dark:bg-blue-800 dark:text-blue-200"};function vd(e,t){return he(),pe("div",gd,t[0]||(t[0]=[W("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[W("path",{d:"M15.147 15.085a7.159 7.159 0 0 1-6.189 3.307A6.713 6.713 0 0 1 3.1 15.444c-2.679-4.513.287-8.737.888-9.548A4.373 4.373 0 0 0 5 1.608c1.287.953 6.445 3.218 5.537 10.5 1.5-1.122 2.706-3.01 2.853-6.14 1.433 1.049 3.993 5.395 1.757 9.117Z"})],-1),W("span",{class:"sr-only"},"Info icon",-1)]))}const md=As(pd,[["render",vd]]),Sd={},bd={class:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg dark:bg-green-800 dark:text-green-200"};function yd(e,t){return he(),pe("div",bd,t[0]||(t[0]=[W("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[W("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})],-1),W("span",{class:"sr-only"},"Success icon",-1)]))}const Cd=As(Sd,[["render",yd]]),wd={},Ed={class:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-orange-500 bg-orange-100 rounded-lg dark:bg-orange-700 dark:text-orange-200"};function kd(e,t){return he(),pe("div",Ed,t[0]||(t[0]=[W("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[W("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM10 15a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm1-4a1 1 0 0 1-2 0V6a1 1 0 0 1 2 0v5Z"})],-1),W("span",{class:"sr-only"},"Warning icon",-1)]))}const xd=As(wd,[["render",kd]]),Rd={},Ld={class:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-red-500 bg-red-100 rounded-lg dark:bg-red-800 dark:text-red-200"};function Ad(e,t){return he(),pe("div",Ld,t[0]||(t[0]=[W("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[W("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 11.793a1 1 0 1 1-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L8.586 10 6.293 7.707a1 1 0 0 1 1.414-1.414L10 8.586l2.293-2.293a1 1 0 0 1 1.414 1.414L11.414 10l2.293 2.293Z"})],-1),W("span",{class:"sr-only"},"Error icon",-1)]))}const Td=As(Rd,[["render",Ad]]),Dd={class:"fixed bottom-4 left-1/2 transform -translate-x-1/2 flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800",role:"alert"},Od={class:"ms-3 text-sm font-normal"},Pd=xe({__name:"Toast",props:{toast:{type:Object,required:!0}},setup(e){const t=Pe(!0),s=()=>{t.value=!1};return(r,a)=>Mi((he(),pe("div",Dd,[e.toast.type==="success"?(he(),Je(Cd,{key:0})):e.toast.type==="icon"?(he(),Je(md,{key:1})):e.toast.type==="warning"?(he(),Je(xd,{key:2})):e.toast.type==="error"?(he(),Je(Td,{key:3})):ft("",!0),W("div",Od,Ce(e.toast.message),1),W("button",{type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700",onClick:s,"aria-label":"Close"},a[0]||(a[0]=[W("span",{class:"sr-only"},"Close",-1),W("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[W("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)]))],512)),[[cl,t.value]])}}),Bd={class:"fixed bottom-4 right-4 space-y-2"},Md=xe({__name:"Toasts",setup(e){const t=Lt(),s=we(()=>t.getToasts);return(r,a)=>(he(),pe("div",Bd,[(he(!0),pe(Oe,null,si(s.value,_=>(he(),Je(Pd,{key:_.fired,toast:_},null,8,["toast"]))),128))]))}}),Id={class:"p-4 w-full"},Hd={class:"border-base-300 bg-base-100 rounded-b-box rounded-se-box items-center justify-center gap-2 overflow-x-hidden bg-cover bg-top p-4 [border-width:var(--tab-border)]"},Fd=xe({__name:"App",setup(e){return(t,s)=>{const r=uc("RouterView");return he(),pe(Oe,null,[fe(_d),W("div",Id,[W("div",Hd,[fe(r)])]),fe(Md)],64)}}}),Sr=kl(Fd);Sr.use(Al());const $d=Rs();ys.beforeEach(e=>e.meta.requireAuth&&!$d.isAuthenticated?(ys.push({name:"home"}),!1):!0);Sr.use(ys);Sr.mount("#app");
